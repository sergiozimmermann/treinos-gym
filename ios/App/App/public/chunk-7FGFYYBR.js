import{a as b}from"./chunk-ATSHN4RT.js";import{a as O}from"./chunk-LMBDK6FW.js";import{Ha as de,ga as N,ha as v,j as q,ja as ie,l as te,la as V,pa as j,qa as re,sa as ne,ta as oe,ua as se,va as ae,wa as ce,xa as le,ya as pe,za as me}from"./chunk-ACG6Z66O.js";import{$ as I,$a as P,Ab as c,Ac as Z,Bc as w,Cb as _,Ec as ee,Ib as A,Jb as k,Kb as F,Mb as m,Ob as Q,Tb as X,Xa as p,Ya as u,_ as T,ea as M,fb as S,hb as l,ia as f,ja as D,ma as x,na as g,ob as G,pb as J,qb as H,rb as s,sb as a,ub as K,vb as W,wb as E,zc as Y}from"./chunk-2OKAN6CQ.js";var y=(()=>{let i=class i{constructor(e){this.afs=e}getTreinosPreset(e){return this.afs.collection("Treinos_Preset",t=>t.where("idUsuario","==",e).orderBy("divPreset")).snapshotChanges()}addPreset(e){return e=JSON.parse(JSON.stringify(e)),delete e.id,this.afs.collection("Treinos_Preset").add(e)}atualizarPreset(e){let t=e.id;return delete e.id,this.afs.collection("Treinos_Preset").doc(t).update(e)}deletarPreset(e){return this.deletarExerciciosPorPreset(e),this.afs.collection("Treinos_Preset").doc(e).delete()}deletarExerciciosPorPreset(e){this.afs.collection("Exercicios_Preset",t=>t.where("idPreset","==",e)).get().subscribe(t=>{t.forEach(n=>{n.ref.delete()})})}getExerciciosPreset(e){return this.afs.collection("Exercicios_Preset",t=>t.where("idPreset","==",e).orderBy("dtCriacao")).snapshotChanges()}addExercicioPreset(e){return e=JSON.stringify(e),e=JSON.parse(e),e.dtCriacao=new Date,this.afs.collection("Exercicios_Preset").add(e)}atualizarExercicioPreset(e){return this.afs.collection("Exercicios_Preset").doc(e.id).update(e)}deletarExercicioPreset(e){return this.afs.collection("Exercicios_Preset").doc(e).delete()}getComboPresets(e){return this.afs.collection("Treinos_Preset",t=>t.where("idUsuario","==",e).orderBy("divPreset")).snapshotChanges()}};i.\u0275fac=function(t){return new(t||i)(M(N))},i.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var z=(()=>{let i=class i{constructor(e,t){this.afs=e,this.afAuth=t}getIdUsuario(){return new Promise((e,t)=>{this.afAuth.currentUser.then(n=>{this.afs.collection("Usuarios",o=>o.where("uid","==",n.uid)).snapshotChanges().subscribe(o=>e(O.mapResFirebase(o)[0].id),o=>t())}).catch(()=>t())})}};i.\u0275fac=function(t){return new(t||i)(M(N),M(te))},i.\u0275prov=T({token:i,factory:i.\u0275fac,providedIn:"root"});let r=i;return r})();var R=class{constructor(){this.id="",this.idUsuario="",this.nmPreset="",this.divPreset=""}};var $=class{},fe=(()=>{let i=class i{constructor(){this.preset=new $,this.deletarPreset=new P}ngOnInit(){}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-card-preset"]],inputs:{preset:"preset"},outputs:{deletarPreset:"deletarPreset"},decls:8,vars:2,consts:[[1,"cardBox","flex","flex-column","align-items-center"],[1,"nmPreset"],[1,"divPreset"],[2,"margin-top","10px"],["mat-button","",1,"warn","w-full","deletarPreset",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1),m(2),a(),s(3,"div",2),m(4),a(),s(5,"div",3)(6,"button",4),c("click",function(){return n.deletarPreset.emit()}),m(7,"Deletar"),a()()()),t&2&&(p(2),Q(" ",n.preset.nmPreset," "),p(2),Q(" Divis\xE3o: ",n.preset.divPreset," "))},dependencies:[v],styles:[".cardBox[_ngcontent-%COMP%]{padding:20px;border:3px solid var(--background-contrast);border-radius:10px}.divPreset[_ngcontent-%COMP%]{font-size:18px}.deletarPreset[_ngcontent-%COMP%]{font-size:18px;height:28px}"]});let r=i;return r})();function Oe(r,i){if(r&1){let d=E();s(0,"div",1),c("click",function(t){let o=x(d).$implicit,h=_();return g(h.onSelecionarPreset.emit({preset:o,click:t}))}),s(1,"app-card-preset",2),c("deletarPreset",function(){let n=x(d).$implicit,o=_();return g(o.deletarPreset(n.id))}),a()()}if(r&2){let d=i.$implicit;p(),l("preset",d)}}var Pe=(()=>{let i=class i{constructor(e,t,n){this.presetService=e,this.usuarioService=t,this.toastService=n,this.treinosPreset=[],this.onSelecionarPreset=new P}ngOnInit(){}adicionarPreset(){this.usuarioService.getIdUsuario().then(e=>{let t=new R;t.idUsuario=e,this.presetService.addPreset(t).then(()=>{this.toastService.showMensagem("Adicionado com sucesso!")}).catch(()=>this.toastService.showMensagem("Ocorreu um erro!"))})}deletarPreset(e){this.presetService.deletarPreset(e).then(()=>{this.toastService.showMensagem("Deletado com sucesso!")}).catch(()=>{this.toastService.showMensagem("Ocorreu um erro!")})}};i.\u0275fac=function(t){return new(t||i)(u(y),u(z),u(b))},i.\u0275cmp=f({type:i,selectors:[["app-lista-preset"]],inputs:{treinosPreset:"treinosPreset"},outputs:{onSelecionarPreset:"onSelecionarPreset"},decls:5,vars:0,consts:[["mat-button","",1,"w-full",3,"click"],[1,"cardPreset",3,"click"],[3,"preset","deletarPreset"],["class","cardPreset"]],template:function(t,n){t&1&&(J(0,Oe,2,1,"div",3,G),s(2,"div")(3,"button",0),c("click",function(){return n.adicionarPreset()}),m(4,"Adicionar Preset"),a()()),t&2&&H(n.treinosPreset)},dependencies:[v,fe],styles:[".cardPreset[_ngcontent-%COMP%]{cursor:pointer}"]});let r=i;return r})();var _e=(()=>{let i=class i{constructor(e,t){this.presetService=e,this.usuarioService=t,this.treinosPreset=[],this.onSelecionarPreset=new P,this.getTreinosPreset()}ngOnInit(){}getTreinosPreset(){this.usuarioService.getIdUsuario().then(e=>{this.presetService.getTreinosPreset(e).subscribe(t=>{this.treinosPreset=O.mapResFirebase(t)})})}};i.\u0275fac=function(t){return new(t||i)(u(y),u(z))},i.\u0275cmp=f({type:i,selectors:[["app-historico-preset"]],outputs:{onSelecionarPreset:"onSelecionarPreset"},decls:1,vars:1,consts:[[3,"treinosPreset","onSelecionarPreset"]],template:function(t,n){t&1&&(s(0,"app-lista-preset",0),c("onSelecionarPreset",function(h){return n.onSelecionarPreset.emit(h)}),a()),t&2&&l("treinosPreset",n.treinosPreset)},dependencies:[Pe],styles:["app-lista-preset[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:10px}"]});let r=i;return r})();var U=class{constructor(){this.nmExercicio="",this.obsExercicio="",this.qtdSerie=null,this.minRep=null,this.maxRep=null}};function Ie(r,i){if(r&1){let d=E();s(0,"div")(1,"button",9),c("click",function(){x(d);let t=_();return g(t.onDeleteExercicio.emit())}),m(2,"Deletar"),a()()}}var ge=(()=>{let i=class i{get exercicioPreset(){return this._exercicioPreset}set exercicioPreset(e){this._exercicioPreset=e,e&&e.id&&this.formulario.patchValue(e)}constructor(e){this.formBuilder=e,this.cardChange=!1,this.readOnly=!1,this.exercicioPresetChange=new P,this.onDeleteExercicio=new P,this.formulario=e.group({id:[""],idPreset:[""],nmExercicio:[""],obsExercicio:[""],qtdSerie:[],minRep:[],maxRep:[]})}ngOnInit(){}onChangeInputs(){this.cardChange=!0}};i.\u0275fac=function(t){return new(t||i)(u(le))},i.\u0275cmp=f({type:i,selectors:[["app-card-exercicio-preset"]],inputs:{exercicioPreset:"exercicioPreset",readOnly:"readOnly"},outputs:{exercicioPresetChange:"exercicioPresetChange",onDeleteExercicio:"onDeleteExercicio"},decls:24,vars:7,consts:[[1,"cardExercicio","flex","flex-column",3,"formGroup"],[1,"form-group"],["type","text","formControlName","nmExercicio",3,"readonly","change"],["formControlName","obsExercicio",3,"readonly","change"],[1,"form-group","flex","flex-row",2,"column-gap","10px"],["type","number","formControlName","qtdSerie",3,"readonly","change"],["type","number","formControlName","minRep",3,"readonly","change"],["type","number","formControlName","maxRep",3,"readonly","change"],[4,"ngIf"],["mat-button","",1,"w-full","warn",2,"margin-top","10px",3,"click"]],template:function(t,n){t&1&&(s(0,"form",0)(1,"div",1)(2,"label"),m(3,"Nome Exerc\xEDcio"),a(),s(4,"input",2),c("change",function(){return n.onChangeInputs()}),a()(),s(5,"div",1)(6,"label"),m(7,"Obs."),a(),s(8,"textarea",3),c("change",function(){return n.onChangeInputs()}),a()(),s(9,"div",4)(10,"div")(11,"label"),m(12,"Qtd. S\xE9ries"),a(),s(13,"input",5),c("change",function(){return n.onChangeInputs()}),a()(),s(14,"div",4)(15,"div")(16,"label"),m(17,"Min. Rep."),a(),s(18,"input",6),c("change",function(){return n.onChangeInputs()}),a()(),s(19,"div")(20,"label"),m(21,"Max. Rep."),a(),s(22,"input",7),c("change",function(){return n.onChangeInputs()}),a()()()(),S(23,Ie,3,0,"div",8),a()),t&2&&(l("formGroup",n.formulario),p(4),l("readonly",n.readOnly),p(4),l("readonly",n.readOnly),p(5),l("readonly",n.readOnly),p(5),l("readonly",n.readOnly),p(4),l("readonly",n.readOnly),p(),l("ngIf",!n.readOnly))},dependencies:[w,v,oe,V,se,j,re,ae,ce],styles:["[_nghost-%COMP%]     .cardExercicio{border:3px solid var(--background-contrast);border-radius:10px;padding:10px}"]});let r=i;return r})();var Ae=["CardExercicioPreset"];function ke(r,i){if(r&1){let d=E();K(0),s(1,"app-card-exercicio-preset",3,4),c("exercicioPresetChange",function(t){let o=x(d).index,h=_();return g(h.exerciciosPreset[o]=t)})("onDeleteExercicio",function(){let n=x(d).$implicit,o=_();return g(o.removerExPreset(n.id))}),a(),W()}if(r&2){let d=i.$implicit,e=_();p(),l("readOnly",e.readOnly)("exercicioPreset",d)}}function Fe(r,i){if(r&1){let d=E();s(0,"div",5)(1,"button",6),c("click",function(){x(d);let t=_();return g(t.addExercicioPreset())}),m(2,"Adicionar Exerc\xEDcio"),a()()}}var ve=(()=>{let i=class i{get idPreset(){return this._idPreset}set idPreset(e){this._idPreset=e,e&&this.getExerciciosPreset(e)}constructor(e,t){this.presetService=e,this.toastService=t,this.exerciciosPreset=[],this.readOnly=!1,this.salvarPreset=new P}ngOnInit(){}getExerciciosPreset(e){this.presetService.getExerciciosPreset(e).subscribe(t=>{this.exerciciosPreset=O.mapResFirebase(t)})}addExercicioPreset(){if(this.readOnly)return;this.salvarPreset.emit(!0);let e=new U;e.idPreset=this.idPreset,this.presetService.addExercicioPreset(e).then(()=>{this.exerciciosPreset.push(e),this.toastService.showMensagem("Adicionado com Sucesso!")}).catch(()=>this.toastService.showMensagem("Ocorreu um erro!"))}atualizaCadaExercicio(e){if(!this.readOnly)return new Promise(t=>{this.presetService.atualizarExercicioPreset(e).then(()=>{t()})})}atualizarExerciciosPreset(){if(this.readOnly)return Promise.all([!1]);let n=this.CardsExercicioPreset._results.filter(o=>o.cardChange===!0).map(o=>o.formulario.getRawValue()).map(o=>this.atualizaCadaExercicio(o));return Promise.all(n)}removerExPreset(e){this.readOnly||this.presetService.deletarExercicioPreset(e).then(()=>{this.exerciciosPreset=this.exerciciosPreset.filter(t=>t.id!==e),this.toastService.showMensagem("Deletado com Sucesso!")}).catch(()=>this.toastService.showMensagem("Ocorreu um erro!"))}};i.\u0275fac=function(t){return new(t||i)(u(y),u(b))},i.\u0275cmp=f({type:i,selectors:[["app-lista-exercicios-preset"]],viewQuery:function(t,n){if(t&1&&A(Ae,5),t&2){let o;k(o=F())&&(n.CardsExercicioPreset=o)}},inputs:{idPreset:"idPreset",readOnly:"readOnly"},outputs:{salvarPreset:"salvarPreset"},decls:3,vars:2,consts:[[1,"listaCards"],[4,"ngFor","ngForOf"],["class","botaoAddEx",4,"ngIf"],[3,"readOnly","exercicioPreset","exercicioPresetChange","onDeleteExercicio"],["CardExercicioPreset",""],[1,"botaoAddEx"],["mat-button","",1,"w-full",3,"click"]],template:function(t,n){t&1&&(s(0,"div",0),S(1,ke,3,2,"ng-container",1),a(),S(2,Fe,3,0,"div",2)),t&2&&(p(),l("ngForOf",n.exerciciosPreset),p(),l("ngIf",!n.readOnly))},dependencies:[Z,w,v,ge],styles:[".botaoAddEx[_ngcontent-%COMP%]{margin-top:10px}.listaCards[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:5px}"]});let r=i;return r})();var Ve=["ListaExericiosPreset"],Ce=(()=>{let i=class i{constructor(e,t){this.presetService=e,this.toastService=t,this.needAtualizarPreset=!1,this.onSalvarOuCancelar=new P}ngOnInit(){}salvarPreset(e){this.ListaExericiosPreset.atualizarExerciciosPreset().then(()=>{this.needAtualizarPreset?this.presetService.atualizarPreset(this.presetAtual).then(()=>{e||this.onSalvarOuCancelar.emit(),this.toastService.showMensagem("Salvo com sucesso!")}).catch(()=>{this.toastService.showMensagem("Ocorreu um erro!")}):(e||this.onSalvarOuCancelar.emit(),this.toastService.showMensagem("Salvo com sucesso!"))}).catch(()=>{this.toastService.showMensagem("Ocorreu um erro!")})}};i.\u0275fac=function(t){return new(t||i)(u(y),u(b))},i.\u0275cmp=f({type:i,selectors:[["app-editor-preset"]],viewQuery:function(t,n){if(t&1&&A(Ve,5),t&2){let o;k(o=F())&&(n.ListaExericiosPreset=o.first)}},inputs:{presetAtual:"presetAtual"},outputs:{onSalvarOuCancelar:"onSalvarOuCancelar"},decls:14,vars:3,consts:[[1,"botoes-acao"],[1,"descartar"],["mat-button","",1,"warn",3,"click"],[1,"salvar"],["mat-button","",3,"click"],[1,"nmPreset"],["id","nmPreset","mat-input","","type","text","placeholder","Nome Treino",1,"text-center",3,"ngModel","ngModelChange","change"],[1,"text-center"],["mat-input","","id","divPreset","type","text","placeholder","Divis\xE3o Treino",1,"text-center",3,"ngModel","ngModelChange","change"],[1,"listaExPreset"],[3,"idPreset","salvarPreset"],["ListaExericiosPreset",""]],template:function(t,n){t&1&&(s(0,"div",0)(1,"div",1)(2,"button",2),c("click",function(){return n.onSalvarOuCancelar.emit()}),m(3,"Descartar"),a()(),s(4,"div",3)(5,"button",4),c("click",function(){return n.salvarPreset()}),m(6,"Salvar"),a()()(),s(7,"div",5)(8,"input",6),c("ngModelChange",function(h){return n.presetAtual.nmPreset=h})("change",function(){return n.needAtualizarPreset=!0}),a()(),s(9,"div",7)(10,"input",8),c("ngModelChange",function(h){return n.presetAtual.divPreset=h})("change",function(){return n.needAtualizarPreset=!0}),a()(),s(11,"div",9)(12,"app-lista-exercicios-preset",10,11),c("salvarPreset",function(h){return n.salvarPreset(h)}),a()()),t&2&&(p(8),l("ngModel",n.presetAtual.nmPreset),p(2),l("ngModel",n.presetAtual.divPreset),p(2),l("idPreset",n.presetAtual==null?null:n.presetAtual.id))},dependencies:[v,V,j,ne,ve],styles:[".botoes-acao[_ngcontent-%COMP%]{z-index:100;background-color:var(--background);position:absolute;bottom:0;width:calc(100% - 5px);height:40px}.nmPreset[_ngcontent-%COMP%]{text-align:center}.descartar[_ngcontent-%COMP%]{position:absolute;bottom:4px;left:5px}.salvar[_ngcontent-%COMP%]{position:absolute;bottom:4px;right:5px}.listaExPreset[_ngcontent-%COMP%]{position:relative;overflow-y:auto;margin-top:5px;height:calc(100% - 114px)}#nmPreset[_ngcontent-%COMP%]{width:90%}#divPreset[_ngcontent-%COMP%]{max-width:140px;margin-top:5px}"]});let r=i;return r})();function Le(r,i){if(r&1){let d=E();s(0,"div",3)(1,"app-editor-preset",4),c("onSalvarOuCancelar",function(){x(d);let t=_();return g(t.isOpen=!1)}),a()()}if(r&2){let d=_();p(),l("presetAtual",d.presetAtual)}}var ze=r=>({"display-none":r});var Ee=(()=>{let i=class i{constructor(){this.isOpen=!1}ngOnInit(){}abrirPreset(e){e.click&&["mdc-button__label","mdc-button__label","mat-mdc-button-touch-target"].includes(e.click.target.className)||(this.presetAtual=e.preset,this.isOpen=!0)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-treinos-preset"]],decls:3,vars:4,consts:[[3,"ngClass"],[3,"onSelecionarPreset"],["class","editorPreset",4,"ngIf"],[1,"editorPreset"],[3,"presetAtual","onSalvarOuCancelar"]],template:function(t,n){t&1&&(s(0,"div",0)(1,"app-historico-preset",1),c("onSelecionarPreset",function(h){return n.abrirPreset(h)}),a()(),S(2,Le,2,1,"div",2)),t&2&&(l("ngClass",X(2,ze,n.isOpen)),p(2),l("ngIf",n.isOpen))},dependencies:[Y,w,_e,Ce],styles:[".editorPreset[_ngcontent-%COMP%]{height:100%;display:flex;flex-direction:column}.editorPreset[_ngcontent-%COMP%]   app-editor-preset[_ngcontent-%COMP%]{height:100%}"]});let r=i;return r})();var Re=[{path:"",component:Ee}],ye=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=D({type:i}),i.\u0275inj=I({imports:[q.forChild(Re),q]});let r=i;return r})();var Qt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=D({type:i}),i.\u0275inj=I({imports:[ee,ye,ie,de,pe,me]});let r=i;return r})();export{y as a,z as b,ve as c,Qt as d};
