import{a as D}from"./chunk-ATSHN4RT.js";import{a as U}from"./chunk-LMBDK6FW.js";import{Aa as _,Da as j,Ga as G,Ha as V,ga as S,ha as I,j as x,ja as w,l as A,la as y,na as F,pa as R,qa as k,ta as E,va as O,wa as N,xa as W,ya as T,za as L}from"./chunk-ACG6Z66O.js";import{s as u}from"./chunk-WOTB2A3J.js";import{$ as p,Ab as C,Ec as M,Mb as c,Ya as r,_ as h,ea as m,hb as b,ia as g,ja as v,rb as s,sb as n,tb as P}from"./chunk-2OKAN6CQ.js";import"./chunk-CQCHLVVT.js";var z=(()=>{let t=class t{constructor(i,e){this.afAuth=i,this.afs=e}getUsuario(){return this.afAuth.currentUser}atualizaUsuario(i,e){return new Promise((o,l)=>{u(i,{displayName:e.nmUsuario}).then(()=>{this.afs.collection("Usuarios",d=>d.where("uid","==",e.uid)).snapshotChanges().subscribe(d=>{let H=U.mapResFirebase(d)[0].id;this.afs.doc("Usuarios/"+H).update(e).then(()=>{o()}).catch(()=>l())})}).catch(()=>l())})}};t.\u0275fac=function(e){return new(e||t)(m(A),m(S))},t.\u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var f=class{},q=(()=>{let t=class t{constructor(i,e,o){this.contaService=i,this.formBuilder=e,this.toastService=o,this.formulario=e.group({uid:[""],nmUsuario:["",[F.required]]}),this.getUsuario()}ngOnInit(){}getUsuario(){this.contaService.getUsuario().then(i=>{this.usuarioAuth=i;let e=new f;e.nmUsuario=i.displayName,e.uid=i.uid,this.formulario.patchValue(e)})}salvarUsuario(){if(!this.formulario.touched){this.toastService.showMensagem("Salvo com Sucesso!");return}if(this.formulario.invalid){this.toastService.showMensagem("Insira seu Nome");return}let i=this.formulario.getRawValue();this.contaService.atualizaUsuario(this.usuarioAuth,i).then(()=>{this.toastService.showMensagem("Salvo com Sucesso!"),window.location.reload()}).catch(()=>{this.toastService.showMensagem("Ocorreu um erro!")})}};t.\u0275fac=function(e){return new(e||t)(r(z),r(W),r(D))},t.\u0275cmp=g({type:t,selectors:[["app-conta"]],decls:8,vars:1,consts:[[1,"flex","flex-column",3,"formGroup","ngSubmit"],["matInput","","formControlName","nmUsuario",1,"inputNome"],["id","salvar",1,"align-self-end"],["mat-button","","type","submit",1,"botaoSalvar"]],template:function(e,o){e&1&&(s(0,"form",0),C("ngSubmit",function(){return o.salvarUsuario()}),s(1,"mat-form-field")(2,"mat-label"),c(3,"Nome"),n(),P(4,"input",1),n(),s(5,"div",2)(6,"button",3),c(7,"Salvar"),n()()()),e&2&&b("formGroup",o.formulario)},dependencies:[E,y,R,k,O,N,G,j,_,I],styles:["[_nghost-%COMP%]     .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--button-color)!important}[_nghost-%COMP%]     .mdc-floating-label, [_nghost-%COMP%]     .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--font-color)!important;caret-color:var(--font-color)!important}[_nghost-%COMP%]     .mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple:after{border-bottom-color:var(--font-color)!important}[_nghost-%COMP%]     .mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label{color:var(--mdc-filled-text-field-error-hover-label-text-color)!important}[_nghost-%COMP%]     .mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)!important}[_nghost-%COMP%]     .mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label, [_nghost-%COMP%]     .mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)!important}[_nghost-%COMP%]     .botaoSalvar{padding:25px}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none!important}[_nghost-%COMP%]     #salvar{margin-top:10px}"]});let a=t;return a})();var Ke=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=v({type:t}),t.\u0275inj=p({imports:[M,x.forChild([{path:"",component:q}]),T,L,V,w]});let a=t;return a})();export{Ke as ContaModule};
