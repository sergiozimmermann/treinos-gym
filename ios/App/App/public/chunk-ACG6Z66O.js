import{a as hb,b as Iu,c as fb,d as Yo,e as Tu,f as dc,g as mb,h as pb,i as Au,j as bt,k as Di,l as rn,m as uc,n as Xo,o as gb,p as _b,q as qn,r as Te}from"./chunk-WOTB2A3J.js";import{$,$a as lt,$b as W_,A as yt,Aa as $o,Ab as be,B as du,Ba as k_,C as vr,Ca as xe,Cb as Ie,Cc as ab,D as jn,Da as $e,Db as En,E as Za,Ea as Go,Eb as Ft,Ec as lc,F as uu,Fa as Ho,Fb as bu,Fc as cb,G as ke,Ga as Er,Gb as ic,Gc as lb,H as I_,Ha as Ir,Hb as In,Hc as Si,I as jo,Ia as P_,Ib as Ge,Ic as db,J as Bo,Ja as M_,Jb as qt,Jc as ub,K as en,Ka as N_,Kb as $t,L as hu,La as O_,Lb as vu,M as T_,Ma as F_,Mb as rc,Mc as bb,N as Uo,Na as V_,Nb as z_,Nc as vb,O as yr,Oa as L_,Ob as q_,Pa as Ii,Pb as ce,Pc as Cu,Q as wr,Qa as j_,Qb as $_,Qc as yb,R as Ja,Rb as yu,S as xn,Sa as tc,Sb as Ne,Sc as wb,T as Ot,Ta as J,U as fu,Ua as B_,V as ae,Va as Wo,W as A_,Wa as gu,Wb as G_,X as wt,Xa as xt,Xb as Ar,Y as ut,Ya as E,Yb as H_,Z as xi,Za as ec,Zb as oc,_ as S,_a as nn,_b as sc,a as fe,aa as C_,ab as V,ac as K_,b as y_,ba as mu,bb as U_,bc as ac,c as me,ca as Bn,cb as ne,cc,d as su,da as k,db as Ee,dc as wu,e as Ka,ea as p,eb as Ti,ec as xu,f as q,fa as D,fb as Zt,fc as Q_,g as pe,ga as zo,gb as _e,gc as Ko,h as Qa,ha as M,hb as Me,hc as Y_,i as w_,ia as Pe,ic as X_,j as wn,ja as G,jb as At,jc as Eu,k as wi,ka as Q,kb as _u,kc as Z_,l as gr,la as ge,lc as J_,m as pt,mb as Ht,mc as _t,n as N,o as Lo,oc as tb,p as Ya,pc as Ai,q as x_,qa as Ei,qc as eb,r as j,ra as pu,rb as Ct,rc as nb,s as _r,sa as qo,sb as St,sc as Y,t as we,ta as S_,tb as zt,tc as ib,u as au,uc as Qo,v as Xa,va as D_,vc as rb,w as cu,wa as xr,wc as ob,x as E_,xa as Un,xb as Tr,xc as Ci,y as lu,ya as zn,yc as sb,z as br,za as R_,zb as nc}from"./chunk-2OKAN6CQ.js";import{a as I,b as ot,e as ou,f as _}from"./chunk-CQCHLVVT.js";var Du=class{};var Cr=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),o=r.toLowerCase(),s=e.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Ru=class{encodeKey(t){return xb(t)}encodeValue(t){return xb(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function gT(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}var _T=/%(\d[a-f0-9])/gi,bT={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function xb(n){return encodeURIComponent(n).replace(_T,(t,e)=>bT[e]??t)}function hc(n){return`${n}`}var $n=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ru,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=gT(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(hc):[hc(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(o=>{e.push({param:i,value:o,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(hc(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(hc(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var ku=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function vT(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Eb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ib(n){return typeof Blob<"u"&&n instanceof Blob}function Tb(n){return typeof FormData<"u"&&n instanceof FormData}function yT(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Zo=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(vT(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Cr,this.context??=new ku,!this.params)this.params=new $n,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+s}}}serializeBody(){return this.body===null?null:Eb(this.body)||Ib(this.body)||Tb(this.body)||yT(this.body)||typeof this.body=="string"?this.body:this.body instanceof $n?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Tb(this.body)?null:Ib(this.body)?this.body.type||null:Eb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof $n?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,o=t.body!==void 0?t.body:this.body,s=t.withCredentials!==void 0?t.withCredentials:this.withCredentials,a=t.reportProgress!==void 0?t.reportProgress:this.reportProgress,c=t.headers||this.headers,l=t.params||this.params,d=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((u,h)=>u.set(h,t.setHeaders[h]),c)),t.setParams&&(l=Object.keys(t.setParams).reduce((u,h)=>u.set(h,t.setParams[h]),l)),new n(e,i,o,{params:l,headers:c,context:d,reportProgress:a,responseType:r,withCredentials:s})}},Ab=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ab||{}),Pu=class{constructor(t,e=Cb.Ok,i="OK"){this.headers=t.headers||new Cr,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var Mu=class n extends Pu{constructor(t={}){super(t),this.type=Ab.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Cb=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Cb||{});function Su(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var GM=(()=>{let t=class t{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof Zo)s=i;else{let l;o.headers instanceof Cr?l=o.headers:l=new Cr(o.headers);let d;o.params&&(o.params instanceof $n?d=o.params:d=new $n({fromObject:o.params})),s=new Zo(i,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:d,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=N(s).pipe(jn(l=>this.handler.handle(l)));if(i instanceof Zo||o.observe==="events")return a;let c=a.pipe(yt(l=>l instanceof Mu));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(j(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(j(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(j(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(j(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new $n().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,Su(o,r))}post(i,r,o={}){return this.request("POST",i,Su(o,r))}put(i,r,o={}){return this.request("PUT",i,Su(o,r))}};t.\u0275fac=function(r){return new(r||t)(p(Du))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})();var Fu=class extends nb{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Vu=class n extends Fu{static makeCurrent(){eb(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=ET();return e==null?null:IT(e)}resetBaseElement(){Jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return sb(document.cookie,t)}},Jo=null;function ET(){return Jo=Jo||document.querySelector("base"),Jo?Jo.getAttribute("href"):null}function IT(n){return new URL(n,document.baseURI).pathname}var Lu=class{addToWindow(t){Bn.getAngularTestability=(i,r=!0)=>{let o=t.findTestabilityInTree(i,r);if(o==null)throw new ut(5103,!1);return o},Bn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Bn.getAllAngularRootElements=()=>t.getAllRootElements();let e=i=>{let r=Bn.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};Bn.frameworkStabilizers||(Bn.frameworkStabilizers=[]),Bn.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,i){if(e==null)return null;let r=t.getTestability(e);return r??(i?Ai().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},TT=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),ju=new k(""),kb=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new ut(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(p(ju),p(V))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),fc=class{constructor(t){this._doc=t}},Nu="ng-app-id",Pb=(()=>{let t=class t{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Si(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Nu}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(Nu),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Nu,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(p(Y),p($o),p(Go,8),p(xe))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),Ou={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Uu=/%COMP%/g,Mb="%COMP%",AT=`_nghost-${Mb}`,CT=`_ngcontent-${Mb}`,ST=!0,DT=new k("",{providedIn:"root",factory:()=>ST});function RT(n){return CT.replace(Uu,n)}function kT(n){return AT.replace(Uu,n)}function Nb(n,t){return t.map(e=>e.replace(Uu,n))}var Sb=(()=>{let t=class t{constructor(i,r,o,s,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Si(c),this.defaultRenderer=new ts(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zo.ShadowDom&&(r=ot(I({},r),{encapsulation:zo.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof mc?o.applyToHost(i):o instanceof es&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case zo.Emulated:s=new mc(l,d,r,this.appId,u,a,c,h);break;case zo.ShadowDom:return new Bu(l,d,i,r,a,c,this.nonce,h);default:s=new es(l,d,r,u,a,c,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(p(kb),p(Pb),p($o),p(DT),p(Y),p(xe),p(V),p(Go))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),ts=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Ou[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(Db(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(Db(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new ut(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let o=Ou[r];o?t.setAttributeNS(o,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=Ou[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ho.DashCase|Ho.Important)?t.style.setProperty(e,i,r&Ho.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ho.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Ai().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function Db(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Bu=class extends ts{constructor(t,e,i,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Nb(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},es=class extends ts{constructor(t,e,i,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?Nb(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},mc=class extends es{constructor(t,e,i,r,o,s,a,c){let l=r+"-"+i.id;super(t,e,i,o,s,a,c,l),this.contentAttr=RT(l),this.hostAttr=kT(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},PT=(()=>{let t=class t extends fc{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};t.\u0275fac=function(r){return new(r||t)(p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),Rb=["alt","control","meta","shift"],MT={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NT={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},OT=(()=>{let t=class t extends fc{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Rb.forEach(d=>{let u=r.indexOf(d);u>-1&&(r.splice(u,1),a+=d+".")}),a+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let o=MT[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Rb.forEach(a=>{if(a!==o){let c=NT[a];c(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{t.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})();function FT(){Vu.makeCurrent()}function VT(){return new gu}function LT(){return R_(document),document}var jT=[{provide:xe,useValue:cb},{provide:k_,useValue:FT,multi:!0},{provide:Y,useFactory:LT,deps:[]}],aN=X_(Z_,"browser",jT),BT=new k(""),UT=[{provide:ac,useClass:Lu,deps:[]},{provide:K_,useClass:cc,deps:[V,wu,ac]},{provide:cc,useClass:cc,deps:[V,wu,ac]}],zT=[{provide:D_,useValue:"root"},{provide:gu,useFactory:VT,deps:[]},{provide:ju,useClass:PT,multi:!0,deps:[Y,V,xe]},{provide:ju,useClass:OT,multi:!0,deps:[Y]},Sb,Pb,kb,{provide:B_,useExisting:Sb},{provide:ub,useClass:TT,deps:[]},[]],cN=(()=>{let t=class t{constructor(i){}static withServerTransition(i){return{ngModule:t,providers:[{provide:$o,useValue:i.appId}]}}};t.\u0275fac=function(r){return new(r||t)(p(BT,12))},t.\u0275mod=G({type:t}),t.\u0275inj=$({providers:[...zT,...UT],imports:[lc,J_]});let n=t;return n})();var Ob=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var qT=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:function(r){let o=null;return r?o=new(r||t):o=p($T),o},providedIn:"root"});let n=t;return n})(),$T=(()=>{let t=class t extends qT{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Ii.NONE:return r;case Ii.HTML:return Ir(r,"HTML")?Er(r):L_(this._doc,String(r)).toString();case Ii.STYLE:return Ir(r,"Style")?Er(r):r;case Ii.SCRIPT:if(Ir(r,"Script"))return Er(r);throw new ut(5200,!1);case Ii.URL:return Ir(r,"URL")?Er(r):V_(String(r));case Ii.RESOURCE_URL:if(Ir(r,"ResourceURL"))return Er(r);throw new ut(5201,!1);default:throw new ut(5202,!1)}}bypassSecurityTrustHtml(i){return P_(i)}bypassSecurityTrustStyle(i){return M_(i)}bypassSecurityTrustScript(i){return N_(i)}bypassSecurityTrustUrl(i){return O_(i)}bypassSecurityTrustResourceUrl(i){return F_(i)}};t.\u0275fac=function(r){return new(r||t)(p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var W="primary",gs=Symbol("RouteTitle"),Hu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Pr(n){return new Hu(n)}function WT(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function KT(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!on(n[e],t[e]))return!1;return!0}function on(n,t){let e=n?Wu(n):void 0,i=t?Wu(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!$b(n[r],t[r]))return!1;return!0}function Wu(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function $b(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,o)=>i[o]===r)}else return n===t}function Gb(n){return n.length>0?n[n.length-1]:null}function Qn(n){return Ya(n)?n:nc(n)?pt(Promise.resolve(n)):N(n)}var QT={exact:Wb,subset:Kb},Hb={exact:YT,subset:XT,ignored:()=>!0};function Fb(n,t,e){return QT[e.paths](n.root,t.root,e.matrixParams)&&Hb[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function YT(n,t){return on(n,t)}function Wb(n,t,e){if(!ki(n.segments,t.segments)||!_c(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!Wb(n.children[i],t.children[i],e))return!1;return!0}function XT(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>$b(n[e],t[e]))}function Kb(n,t,e){return Qb(n,t,t.segments,e)}function Qb(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!ki(r,e)||t.hasChildren()||!_c(r,e,i))}else if(n.segments.length===e.length){if(!ki(n.segments,e)||!_c(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!Kb(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),o=e.slice(n.segments.length);return!ki(n.segments,r)||!_c(n.segments,r,i)||!n.children[W]?!1:Qb(n.children[W],t,o,i)}}function _c(n,t,e){return t.every((i,r)=>Hb[e](n[r].parameters,i.parameters))}var Gn=class{constructor(t=new rt([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Pr(this.queryParams),this._queryParamMap}toString(){return tA.serialize(this)}},rt=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bc(this)}},Ri=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Pr(this.parameters),this._parameterMap}toString(){return Xb(this)}};function ZT(n,t){return ki(n,t)&&n.every((e,i)=>on(e.parameters,t[i].parameters))}function ki(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function JT(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===W&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==W&&(e=e.concat(t(r,i)))}),e}var _s=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:()=>new cs,providedIn:"root"});let n=t;return n})(),cs=class{parse(t){let e=new Qu(t);return new Gn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${ns(t.root,!0)}`,i=iA(t.queryParams),r=typeof t.fragment=="string"?`#${eA(t.fragment)}`:"";return`${e}${i}${r}`}},tA=new cs;function bc(n){return n.segments.map(t=>Xb(t)).join("/")}function ns(n,t){if(!n.hasChildren())return bc(n);if(t){let e=n.children[W]?ns(n.children[W],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==W&&i.push(`${r}:${ns(o,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=JT(n,(i,r)=>r===W?[ns(n.children[W],!1)]:[`${r}:${ns(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[W]!=null?`${bc(n)}/${e[0]}`:`${bc(n)}/(${e.join("//")})`}}function Yb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pc(n){return Yb(n).replace(/%3B/gi,";")}function eA(n){return encodeURI(n)}function Ku(n){return Yb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vc(n){return decodeURIComponent(n)}function Vb(n){return vc(n.replace(/\+/g,"%20"))}function Xb(n){return`${Ku(n.path)}${nA(n.parameters)}`}function nA(n){return Object.entries(n).map(([t,e])=>`;${Ku(t)}=${Ku(e)}`).join("")}function iA(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${pc(e)}=${pc(r)}`).join("&"):`${pc(e)}=${pc(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var rA=/^[^\/()?;#]+/;function zu(n){let t=n.match(rA);return t?t[0]:""}var oA=/^[^\/()?;=#]+/;function sA(n){let t=n.match(oA);return t?t[0]:""}var aA=/^[^=?&#]+/;function cA(n){let t=n.match(aA);return t?t[0]:""}var lA=/^[^&#]+/;function dA(n){let t=n.match(lA);return t?t[0]:""}var Qu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[W]=new rt(t,e)),i}parseSegment(){let t=zu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new ut(4009,!1);return this.capture(t),new Ri(vc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=sA(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=zu(this.remaining);r&&(i=r,this.capture(i))}t[vc(e)]=vc(i)}parseQueryParam(t){let e=cA(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let s=dA(this.remaining);s&&(i=s,this.capture(i))}let r=Vb(e),o=Vb(i);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=zu(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new ut(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=W);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[W]:new rt([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new ut(4011,!1)}};function Zb(n){return n.segments.length>0?new rt([],{[W]:n}):n}function Jb(n){let t={};for(let[i,r]of Object.entries(n.children)){let o=Jb(r);if(i===W&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[i]=o)}let e=new rt(n.segments,t);return uA(e)}function uA(n){if(n.numberOfChildren===1&&n.children[W]){let t=n.children[W];return new rt(n.segments.concat(t.segments),t.children)}return n}function Mr(n){return n instanceof Gn}function hA(n,t,e=null,i=null){let r=tv(n);return ev(r,t,e,i)}function tv(n){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new rt(o.url,s);return o===n&&(t=a),a}let i=e(n.root),r=Zb(i);return t??r}function ev(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return qu(r,r,r,e,i);let o=fA(t);if(o.toRoot())return qu(r,r,new rt([],{}),e,i);let s=mA(o,r,n),a=s.processChildren?os(s.segmentGroup,s.index,o.commands):iv(s.segmentGroup,s.index,o.commands);return qu(r,s.segmentGroup,a,e,i)}function yc(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ls(n){return typeof n=="object"&&n!=null&&n.outlets}function qu(n,t,e,i,r){let o={};i&&Object.entries(i).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;n===t?s=e:s=nv(n,t,e);let a=Zb(Jb(s));return new Gn(a,o,r)}function nv(n,t,e){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===t?i[r]=e:i[r]=nv(o,t,e)}),new rt(n.segments,i)}var wc=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&yc(i[0]))throw new ut(4003,!1);let r=i.find(ls);if(r&&r!==Gb(i))throw new ut(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new wc(!0,0,n);let t=0,e=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new wc(e,t,i)}var Rr=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function mA(n,t,e){if(n.isAbsolute)return new Rr(t,!0,0);if(!e)return new Rr(t,!1,NaN);if(e.parent===null)return new Rr(e,!0,0);let i=yc(n.commands[0])?0:1,r=e.segments.length-1+i;return pA(e,r,n.numberOfDoubleDots)}function pA(n,t,e){let i=n,r=t,o=e;for(;o>r;){if(o-=r,i=i.parent,!i)throw new ut(4005,!1);r=i.segments.length}return new Rr(i,!1,r-o)}function gA(n){return ls(n[0])?n[0].outlets:{[W]:n}}function iv(n,t,e){if(n??=new rt([],{}),n.segments.length===0&&n.hasChildren())return os(n,t,e);let i=_A(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new rt(n.segments.slice(0,i.pathIndex),{});return o.children[W]=new rt(n.segments.slice(i.pathIndex),n.children),os(o,0,r)}else return i.match&&r.length===0?new rt(n.segments,{}):i.match&&!n.hasChildren()?Yu(n,t,e):i.match?os(n,0,r):Yu(n,t,e)}function os(n,t,e){if(e.length===0)return new rt(n.segments,{});{let i=gA(e),r={};if(Object.keys(i).some(o=>o!==W)&&n.children[W]&&n.numberOfChildren===1&&n.children[W].segments.length===0){let o=os(n.children[W],t,e);return new rt(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=iv(n.children[o],t,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new rt(n.segments,r)}}function _A(n,t,e){let i=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return o;let s=n.segments[r],a=e[i];if(ls(a))break;let c=`${a}`,l=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!jb(c,l,s))return o;i+=2}else{if(!jb(c,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Yu(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(ls(o)){let c=bA(o.outlets);return new rt(i,c)}if(r===0&&yc(e[0])){let c=n.segments[t];i.push(new Ri(c.path,Lb(e[0]))),r++;continue}let s=ls(o)?o.outlets[W]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&yc(a)?(i.push(new Ri(s,Lb(a))),r+=2):(i.push(new Ri(s,{})),r++)}return new rt(i,{})}function bA(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Yu(new rt([],{}),0,i))}),t}function Lb(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function jb(n,t,e){return n==e.path&&on(t,e.parameters)}var ss="imperative",Wt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Wt||{}),Fe=class{constructor(t,e){this.id=t,this.url=e}},Nr=class extends Fe{constructor(t,e,i="imperative",r=null){super(t,e),this.type=Wt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sn=class extends Fe{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Wt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Oe=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Oe||{}),xc=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(xc||{}),Hn=class extends Fe{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Wt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Wn=class extends Fe{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Wt.NavigationSkipped}},ds=class extends Fe{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=Wt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ec=class extends Fe{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xu=class extends Fe{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zu=class extends Fe{constructor(t,e,i,r,o){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Wt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ju=class extends Fe{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},th=class extends Fe{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Wt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eh=class{constructor(t){this.route=t,this.type=Wt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},nh=class{constructor(t){this.route=t,this.type=Wt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ih=class{constructor(t){this.snapshot=t,this.type=Wt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rh=class{constructor(t){this.snapshot=t,this.type=Wt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oh=class{constructor(t){this.snapshot=t,this.type=Wt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sh=class{constructor(t){this.snapshot=t,this.type=Wt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ic=class{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=Wt.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},us=class{},hs=class{constructor(t){this.url=t}};var ah=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bs,this.attachRef=null}},bs=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new ah,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Tc=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ch(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=ch(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=lh(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return lh(t,this._root).map(e=>e.value)}};function ch(n,t){if(n===t.value)return t;for(let e of t.children){let i=ch(n,e);if(i)return i}return null}function lh(n,t){if(n===t.value)return[t];for(let e of t.children){let i=lh(n,e);if(i.length)return i.unshift(t),i}return[]}var Ae=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Dr(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var Ac=class extends Tc{constructor(t,e){super(t),this.snapshot=e,vh(this,t)}toString(){return this.snapshot.toString()}};function rv(n){let t=vA(n),e=new pe([new Ri("",{})]),i=new pe({}),r=new pe({}),o=new pe({}),s=new pe(""),a=new Pi(e,i,o,s,r,W,n,t.root);return a.snapshot=t.root,new Ac(new Ae(a,[]),t)}function vA(n){let t={},e={},i={},r="",o=new fs([],t,i,r,e,W,n,null,{});return new Cc("",new Ae(o,[]))}var Pi=class{constructor(t,e,i,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(j(l=>l[gs]))??N(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(j(t=>Pr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(j(t=>Pr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bh(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:I(I({},t.params),n.params),data:I(I({},t.data),n.data),resolve:I(I(I(I({},n.data),t.data),r?.data),n._resolvedData)}:i={params:I({},n.params),data:I({},n.data),resolve:I(I({},n.data),n._resolvedData??{})},r&&sv(r)&&(i.resolve[gs]=r.title),i}var fs=class{get title(){return this.data?.[gs]}constructor(t,e,i,r,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},Cc=class extends Tc{constructor(t,e){super(e),this.url=t,vh(this,e)}toString(){return ov(this._root)}};function vh(n,t){t.value._routerState=n,t.children.forEach(e=>vh(n,e))}function ov(n){let t=n.children.length>0?` { ${n.children.map(ov).join(", ")} } `:"";return`${n.value}${t}`}function $u(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,on(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),on(t.params,e.params)||n.paramsSubject.next(e.params),KT(t.url,e.url)||n.urlSubject.next(e.url),on(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function dh(n,t){let e=on(n.params,t.params)&&ZT(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||dh(n.parent,t.parent))}function sv(n){return typeof n.title=="string"||n.title===null}var yA=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=W,this.activateEvents=new lt,this.deactivateEvents=new lt,this.attachEvents=new lt,this.detachEvents=new lt,this.parentContexts=D(bs),this.location=D(Ti),this.changeDetector=D(nn),this.environmentInjector=D(xr),this.inputBinder=D(Pc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ut(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ut(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ut(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new ut(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new uh(i,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Q({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ge]});let n=t;return n})(),uh=class{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Pi?this.route:t===bs?this.childContexts:this.parent.get(t,e)}},Pc=new k(""),Bb=(()=>{let t=class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=_r([r.queryParams,r.params,r.data]).pipe(Ot(([s,a,c],l)=>(c=I(I(I({},s),a),c),l===0?N(c):Promise.resolve(c)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=tb(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:c}of a.inputs)i.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(i,o)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})();function wA(n,t,e){let i=ms(n,t._root,e?e._root:void 0);return new Ac(i,t)}function ms(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=xA(n,t,e);return new Ae(i,r)}else{if(n.shouldAttach(t.value)){let o=n.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>ms(n,a)),s}}let i=EA(t.value),r=t.children.map(o=>ms(n,o));return new Ae(i,r)}}function xA(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ms(n,i,r);return ms(n,i)})}function EA(n){return new Pi(new pe(n.url),new pe(n.params),new pe(n.queryParams),new pe(n.fragment),new pe(n.data),n.outlet,n.component,n)}var av="ngNavigationCancelingError";function cv(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=Mr(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=lv(!1,Oe.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function lv(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[av]=!0,e.cancellationCode=t,e}function IA(n){return dv(n)&&Mr(n.url)}function dv(n){return!!n&&n[av]}var TA=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Pe({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ne],decls:1,vars:0,template:function(r,o){r&1&&zt(0,"router-outlet")},dependencies:[yA],encapsulation:2});let n=t;return n})();function AA(n,t){return n.providers&&!n._injector&&(n._injector=yu(n.providers,t,`Route: ${n.path}`)),n._injector??t}function yh(n){let t=n.children&&n.children.map(yh),e=t?ot(I({},n),{children:t}):I({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==W&&(e.component=TA),e}function an(n){return n.outlet||W}function CA(n,t){let e=n.filter(i=>an(i)===t);return e.push(...n.filter(i=>an(i)!==t)),e}function vs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var SA=(n,t,e,i)=>j(r=>(new hh(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),hh=class{constructor(t,e,i,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),$u(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Dr(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,i);else o&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Dr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,o=Dr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Dr(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new sh(o.value.snapshot))}),t.children.length&&this.forwardEvent(new rh(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,o=e?e.value:null;if($u(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),$u(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=vs(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},Sc=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},kr=class{constructor(t,e){this.component=t,this.route=e}};function DA(n,t,e){let i=n._root,r=t?t._root:null;return is(i,r,e,[i.value])}function RA(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function Fr(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!C_(n)?n:t.get(n):i}function is(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Dr(t);return n.children.forEach(s=>{kA(s,o[s.value.outlet],e,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>as(a,e.getContext(s),r)),r}function kA(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=PA(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new Sc(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?is(n,t,a?a.children:null,i,r):is(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new kr(a.outlet.component,s))}else s&&as(t,a,r),r.canActivateChecks.push(new Sc(i)),o.component?is(n,null,a?a.children:null,i,r):is(n,null,e,i,r);return r}function PA(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!ki(n.url,t.url);case"pathParamsOrQueryParamsChange":return!ki(n.url,t.url)||!on(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!dh(n,t)||!on(n.queryParams,t.queryParams);case"paramsChange":default:return!dh(n,t)}}function as(n,t,e){let i=Dr(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?t?as(s,t.children.getContext(o),e):as(s,null,e):as(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new kr(t.outlet.component,r)):e.canDeactivateChecks.push(new kr(null,r)):e.canDeactivateChecks.push(new kr(null,r))}function ys(n){return typeof n=="function"}function MA(n){return typeof n=="boolean"}function NA(n){return n&&ys(n.canLoad)}function OA(n){return n&&ys(n.canActivate)}function FA(n){return n&&ys(n.canActivateChild)}function VA(n){return n&&ys(n.canDeactivate)}function LA(n){return n&&ys(n.canMatch)}function uv(n){return n instanceof x_||n?.name==="EmptyError"}var gc=Symbol("INITIAL_VALUE");function Or(){return Ot(n=>_r(n.map(t=>t.pipe(ke(1),xn(gc)))).pipe(j(t=>{for(let e of t)if(e!==!0){if(e===gc)return gc;if(e===!1||e instanceof Gn)return e}return!0}),yt(t=>t!==gc),ke(1)))}function jA(n,t){return we(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?N(ot(I({},e),{guardsResult:!0})):BA(s,i,r,n).pipe(we(a=>a&&MA(a)?UA(i,o,n,t):N(a)),j(a=>ot(I({},e),{guardsResult:a})))})}function BA(n,t,e,i){return pt(n).pipe(we(r=>HA(r.component,r.route,e,t,i)),en(r=>r!==!0,!0))}function UA(n,t,e,i){return pt(t).pipe(jn(r=>Xa(qA(r.route.parent,i),zA(r.route,i),GA(n,r.path,e),$A(n,r.route,e))),en(r=>r!==!0,!0))}function zA(n,t){return n!==null&&t&&t(new oh(n)),N(!0)}function qA(n,t){return n!==null&&t&&t(new ih(n)),N(!0)}function $A(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return N(!0);let r=i.map(o=>cu(()=>{let s=vs(t)??e,a=Fr(o,s),c=OA(a)?a.canActivate(t,n):Un(s,()=>a(t,n));return Qn(c).pipe(en())}));return N(r).pipe(Or())}function GA(n,t,e){let i=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>RA(s)).filter(s=>s!==null).map(s=>cu(()=>{let a=s.guards.map(c=>{let l=vs(s.node)??e,d=Fr(c,l),u=FA(d)?d.canActivateChild(i,n):Un(l,()=>d(i,n));return Qn(u).pipe(en())});return N(a).pipe(Or())}));return N(o).pipe(Or())}function HA(n,t,e,i,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return N(!0);let s=o.map(a=>{let c=vs(t)??r,l=Fr(a,c),d=VA(l)?l.canDeactivate(n,t,e,i):Un(c,()=>l(n,t,e,i));return Qn(d).pipe(en())});return N(s).pipe(Or())}function WA(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return N(!0);let o=r.map(s=>{let a=Fr(s,n),c=NA(a)?a.canLoad(t,e):Un(n,()=>a(t,e));return Qn(c)});return N(o).pipe(Or(),hv(i))}function hv(n){return y_(wt(t=>{if(Mr(t))throw cv(n,t)}),j(t=>t===!0))}function KA(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return N(!0);let o=r.map(s=>{let a=Fr(s,n),c=LA(a)?a.canMatch(t,e):Un(n,()=>a(t,e));return Qn(c)});return N(o).pipe(Or(),hv(i))}var ps=class{constructor(t){this.segmentGroup=t||null}},Dc=class extends Error{constructor(t){super(),this.urlTree=t}};function Sr(n){return Lo(new ps(n))}function QA(n){return Lo(new ut(4e3,!1))}function YA(n){return Lo(lv(!1,Oe.GuardRejected))}var fh=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return N(i);if(r.numberOfChildren>1||!r.children[W])return QA(t.redirectTo);r=r.children[W]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new Dc(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let o=this.createSegmentGroup(t,e.root,i,r);return new Gn(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);i[r]=e[a]}else i[r]=o}),i}createSegmentGroup(t,e,i,r){let o=this.createSegments(t,e.segments,i,r),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,i,r)}),new rt(o,s)}createSegments(t,e,i,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new ut(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},mh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XA(n,t,e,i,r){let o=wh(n,t,e);return o.matched?(i=AA(t,i),KA(i,t,e,r).pipe(j(s=>s===!0?o:I({},mh)))):N(o)}function wh(n,t,e){if(t.path==="**")return ZA(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?I({},mh):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||WT)(e,n,t);if(!r)return I({},mh);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?I(I({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function ZA(n){return{matched:!0,parameters:n.length>0?Gb(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ub(n,t,e,i){return e.length>0&&eC(n,e,i)?{segmentGroup:new rt(t,tC(i,new rt(e,n.children))),slicedSegments:[]}:e.length===0&&nC(n,e,i)?{segmentGroup:new rt(n.segments,JA(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new rt(n.segments,n.children),slicedSegments:e}}function JA(n,t,e,i){let r={};for(let o of e)if(Mc(n,t,o)&&!i[an(o)]){let s=new rt([],{});r[an(o)]=s}return I(I({},i),r)}function tC(n,t){let e={};e[W]=t;for(let i of n)if(i.path===""&&an(i)!==W){let r=new rt([],{});e[an(i)]=r}return e}function eC(n,t,e){return e.some(i=>Mc(n,t,i)&&an(i)!==W)}function nC(n,t,e){return e.some(i=>Mc(n,t,i))}function Mc(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function iC(n,t,e,i){return an(n)!==i&&(i===W||!Mc(t,e,n))?!1:wh(t,n,e).matched}function rC(n,t,e){return t.length===0&&!n.children[e]}var ph=class{};function oC(n,t,e,i,r,o,s="emptyOnly"){return new gh(n,t,e,i,r,s,o).recognize()}var sC=31,gh=class{constructor(t,e,i,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new ut(4002,`'${t.segmentGroup}'`)}recognize(){let t=Ub(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(j(e=>{let i=new fs([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},W,this.rootComponentType,null,{}),r=new Ae(i,e),o=new Cc("",r),s=hA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,W).pipe(vr(i=>{if(i instanceof Dc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ps?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=bh(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(j(o=>o instanceof Ae?[o]:[]))}processChildren(t,e,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return pt(r).pipe(jn(o=>{let s=i.children[o],a=CA(e,o);return this.processSegmentGroup(t,a,s,o)}),yr((o,s)=>(o.push(...s),o)),uu(null),T_(),we(o=>{if(o===null)return Sr(i);let s=fv(o);return aC(s),N(s)}))}processSegment(t,e,i,r,o,s){return pt(e).pipe(jn(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,o,s).pipe(vr(c=>{if(c instanceof ps)return N(null);throw c}))),en(a=>!!a),vr(a=>{if(uv(a))return rC(i,r,o)?N(new ph):Sr(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,o,s,a){return iC(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,o,s):Sr(r):Sr(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=wh(e,r,o);if(!a)return Sr(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>sC&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(we(h=>this.processSegment(t,i,e,h.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,i,r,o){let s=XA(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),s.pipe(Ot(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Ot(({routes:c})=>{let l=i._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:h}=a,f=new fs(d,h,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,lC(i),an(i),i.component??i._loadedComponent??null,i,dC(i)),{segmentGroup:y,slicedSegments:b}=Ub(e,d,u,c);if(b.length===0&&y.hasChildren())return this.processChildren(l,c,y).pipe(j(O=>O===null?null:new Ae(f,O)));if(c.length===0&&b.length===0)return N(new Ae(f,[]));let w=an(i)===o;return this.processSegment(l,c,y,b,w?W:o,!0).pipe(j(O=>new Ae(f,O instanceof Ae?[O]:[])))}))):Sr(e)))}getChildConfig(t,e,i){return e.children?N({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?N({routes:e._loadedRoutes,injector:e._loadedInjector}):WA(t,e,i,this.urlSerializer).pipe(we(r=>r?this.configLoader.loadChildren(t,e).pipe(wt(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):YA(e))):N({routes:[],injector:t})}};function aC(n){n.sort((t,e)=>t.value.outlet===W?-1:e.value.outlet===W?1:t.value.outlet.localeCompare(e.value.outlet))}function cC(n){let t=n.value.routeConfig;return t&&t.path===""}function fv(n){let t=[],e=new Set;for(let i of n){if(!cC(i)){t.push(i);continue}let r=t.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=fv(i.children);t.push(new Ae(i.value,r))}return t.filter(i=>!e.has(i))}function lC(n){return n.data||{}}function dC(n){return n.resolve||{}}function uC(n,t,e,i,r,o){return we(s=>oC(n,t,e,i,s.extractedUrl,r,o).pipe(j(({state:a,tree:c})=>ot(I({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function hC(n,t){return we(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return N(e);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of mv(c))s.add(l);let a=0;return pt(s).pipe(jn(c=>o.has(c)?fC(c,i,n,t):(c.data=bh(c,c.parent,n).resolve,N(void 0))),wt(()=>a++),hu(1),we(c=>a===s.size?N(e):wn))})}function mv(n){let t=n.children.map(e=>mv(e)).flat();return[n,...t]}function fC(n,t,e,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!sv(r)&&(o[gs]=r.title),mC(o,n,t,i).pipe(j(s=>(n._resolvedData=s,n.data=bh(n,n.parent,e).resolve,null)))}function mC(n,t,e,i){let r=Wu(n);if(r.length===0)return N({});let o={};return pt(r).pipe(we(s=>pC(n[s],t,e,i).pipe(en(),wt(a=>{o[s]=a}))),hu(1),I_(o),vr(s=>uv(s)?wn:Lo(s)))}function pC(n,t,e,i){let r=vs(t)??i,o=Fr(n,r),s=o.resolve?o.resolve(t,e):Un(r,()=>o(t,e));return Qn(s)}function Gu(n){return Ot(t=>{let e=n(t);return e?pt(e).pipe(j(()=>t)):N(t)})}var pv=(()=>{let t=class t{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===W);return r}getResolvedTitleForRoute(i){return i.data[gs]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:()=>D(gC),providedIn:"root"});let n=t;return n})(),gC=(()=>{let t=class t extends pv{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(p(Ob))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),ws=new k("",{providedIn:"root",factory:()=>({})}),Rc=new k(""),xh=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(sc)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return N(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Qn(i.loadComponent()).pipe(j(gv),wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Bo(()=>{this.componentLoaders.delete(i)})),o=new Ka(r,()=>new q).pipe(su());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return N({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=_C(r,this.compiler,i,this.onLoadEndListener).pipe(Bo(()=>{this.childrenLoaders.delete(r)})),a=new Ka(s,()=>new q).pipe(su());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function _C(n,t,e,i){return Qn(n.loadChildren()).pipe(j(gv),we(r=>r instanceof $_||Array.isArray(r)?N(r):pt(t.compileModuleAsync(r))),j(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(Rc,[],{optional:!0,self:!0}).flat()),{routes:s.map(yh),injector:o}}))}function bC(n){return n&&typeof n=="object"&&"default"in n}function gv(n){return bC(n)?n.default:n}var Eh=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:()=>D(vC),providedIn:"root"});let n=t;return n})(),vC=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),_v=new k(""),bv=new k("");function yC(n,t,e){let i=n.get(bv),r=n.get(Y);return n.get(V).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),wC(n))),{onViewTransitionCreated:c}=i;return c&&Un(n,()=>c({transition:a,from:t,to:e})),s})}function wC(n){return new Promise(t=>{U_(t,{injector:n})})}var Ih=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new q,this.transitionAbortSubject=new q,this.configLoader=D(xh),this.environmentInjector=D(xr),this.urlSerializer=D(_s),this.rootContexts=D(bs),this.location=D(Ci),this.inputBindingEnabled=D(Pc,{optional:!0})!==null,this.titleStrategy=D(pv),this.options=D(ws,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(Eh),this.createViewTransition=D(_v,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let i=o=>this.events.next(new eh(o)),r=o=>this.events.next(new nh(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ot(I(I({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new pe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ss,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yt(s=>s.id!==0),j(s=>ot(I({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ot(s=>{this.currentTransition=s;let a=!1,c=!1;return N(s).pipe(wt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ot(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ot(l=>{let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&u!=="reload"){let h="";return this.events.next(new Wn(l.id,this.urlSerializer.serialize(l.rawUrl),h,xc.IgnoredSameUrlNavigation)),l.resolve(null),wn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return N(l).pipe(Ot(h=>{let f=this.transitions?.getValue();return this.events.next(new Nr(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?wn:Promise.resolve(h)}),uC(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),wt(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ot(I({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Ec(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:y,restoredState:b,extras:w}=l,O=new Nr(h,this.urlSerializer.serialize(f),y,b);this.events.next(O);let B=rv(this.rootComponentType).snapshot;return this.currentTransition=s=ot(I({},l),{targetSnapshot:B,urlAfterRedirects:f,extras:ot(I({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(s)}else{let h="";return this.events.next(new Wn(l.id,this.urlSerializer.serialize(l.extractedUrl),h,xc.IgnoredByUrlHandlingStrategy)),l.resolve(null),wn}}),wt(l=>{let d=new Xu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),j(l=>(this.currentTransition=s=ot(I({},l),{guards:DA(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),jA(this.environmentInjector,l=>this.events.next(l)),wt(l=>{if(s.guardsResult=l.guardsResult,Mr(l.guardsResult))throw cv(this.urlSerializer,l.guardsResult);let d=new Zu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),yt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Oe.GuardRejected),!1)),Gu(l=>{if(l.guards.canActivateChecks.length)return N(l).pipe(wt(d=>{let u=new Ju(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}),Ot(d=>{let u=!1;return N(d).pipe(hC(this.paramsInheritanceStrategy,this.environmentInjector),wt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(d,"",Oe.NoDataFromResolver)}}))}),wt(d=>{let u=new th(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}))}),Gu(l=>{let d=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(wt(f=>{u.component=f}),j(()=>{})));for(let f of u.children)h.push(...d(f));return h};return _r(d(l.targetSnapshot.root)).pipe(uu(null),ke(1))}),Gu(()=>this.afterPreactivation()),Ot(()=>{let{currentSnapshot:l,targetSnapshot:d}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return u?pt(u).pipe(j(()=>s)):N(s)}),j(l=>{let d=wA(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=ot(I({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,s}),wt(()=>{this.events.next(new us)}),SA(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ke(1),wt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ae(this.transitionAbortSubject.pipe(wt(l=>{throw l}))),Bo(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Oe.SupersededByNewNavigation),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),vr(l=>{if(c=!0,dv(l))this.events.next(new Hn(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),IA(l)?this.events.next(new hs(l.url)):s.resolve(!1);else{this.events.next(new ds(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return wn}))}))}cancelNavigationTransition(i,r,o){let s=new Hn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function xC(n){return n!==ss}var EC=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:()=>D(IC),providedIn:"root"});let n=t;return n})(),_h=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},IC=(()=>{let t=class t extends _h{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ei(t)))(o||t)}})(),t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),vv=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:()=>D(TC),providedIn:"root"});let n=t;return n})(),TC=(()=>{let t=class t extends vv{constructor(){super(...arguments),this.location=D(Ci),this.urlSerializer=D(_s),this.options=D(ws,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(Eh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Gn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=rv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Nr)this.stateMemento=this.createStateMemento();else if(i instanceof Wn)this.rawUrlTree=r.initialUrl;else if(i instanceof Ec){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof us?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Hn&&(i.code===Oe.GuardRejected||i.code===Oe.NoDataFromResolver)?this.restoreHistory(r):i instanceof ds?this.restoreHistory(r,!0):i instanceof sn&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=I(I({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ei(t)))(o||t)}})(),t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),rs=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(rs||{});function yv(n,t){n.events.pipe(yt(e=>e instanceof sn||e instanceof Hn||e instanceof ds||e instanceof Wn),j(e=>e instanceof sn||e instanceof Wn?rs.COMPLETE:(e instanceof Hn?e.code===Oe.Redirect||e.code===Oe.SupersededByNewNavigation:!1)?rs.REDIRECTING:rs.FAILED),yt(e=>e!==rs.REDIRECTING),ke(1)).subscribe(()=>{t()})}function AC(n){throw n}var CC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Kn=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(oc),this.stateManager=D(vv),this.options=D(ws,{optional:!0})||{},this.pendingTasks=D(W_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(Ih),this.urlSerializer=D(_s),this.location=D(Ci),this.urlHandlingStrategy=D(Eh),this._events=new q,this.errorHandler=this.options.errorHandler||AC,this.navigated=!1,this.routeReuseStrategy=D(EC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(Rc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Pc,{optional:!0}),this.eventsSubscription=new fe,this.isNgZoneEnabled=D(V)instanceof V&&V.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Hn&&r.code!==Oe.Redirect&&r.code!==Oe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sn)this.navigated=!0;else if(r instanceof hs){let a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||xC(o.source)};this.scheduleNavigation(a,ss,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}RC(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ss,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=I({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(yh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,u=null;switch(c){case"merge":u=I(I({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=tv(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return ev(h,i,u,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Mr(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,ss,null,r)}navigate(i,r={skipLocationChange:!1}){return DC(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=I({},CC):r===!1?o=I({},SC):o=r,Mr(i))return Fb(this.currentUrlTree,i,o);let s=this.parseUrl(i);return Fb(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((h,f)=>{c=h,l=f});let u=this.pendingTasks.add();return yv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(h=>Promise.reject(h))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function DC(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new ut(4008,!1)}function RC(n){return!(n instanceof us)&&!(n instanceof hs)}var CN=(()=>{let t=class t{constructor(i,r,o,s,a,c){this.router=i,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new q,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(d=>{d instanceof sn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(i!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:j_(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,i,r):o.removeAttribute(s,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};t.\u0275fac=function(r){return new(r||t)(E(Kn),E(Pi),pu("tabindex"),E(Wo),E(J),E(Qo))},t.\u0275dir=Q({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&be("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&_e("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[M.HasDecoratorInputTransform,"preserveFragment","preserveFragment",_t],skipLocationChange:[M.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",_t],replaceUrl:[M.HasDecoratorInputTransform,"replaceUrl","replaceUrl",_t],routerLink:"routerLink"},standalone:!0,features:[Ee,ge]});let n=t;return n})();var kc=class{};var kC=(()=>{let t=class t{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(yt(i=>i instanceof sn),jn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=yu(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return pt(o).pipe(au())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=N(null);let s=o.pipe(we(a=>a===null?N(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return pt([s,a]).pipe(au())}else return s})}};t.\u0275fac=function(r){return new(r||t)(p(Kn),p(sc),p(xr),p(kc),p(xh))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),wv=new k(""),PC=(()=>{let t=class t{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Nr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof sn?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Wn&&i.code===xc.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Ic&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ic(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};t.\u0275fac=function(r){ec()},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})();function MC(n){return n.routerState.root}function xs(n,t){return{\u0275kind:n,\u0275providers:t}}function NC(){let n=D(zn);return t=>{let e=n.get(Ko);if(t!==e.components[0])return;let i=n.get(Kn),r=n.get(xv);n.get(Th)===1&&i.initialNavigation(),n.get(Ev,null,mu.Optional)?.setUpPreloading(),n.get(wv,null,mu.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var xv=new k("",{factory:()=>new q}),Th=new k("",{providedIn:"root",factory:()=>1});function OC(){return xs(2,[{provide:Th,useValue:0},{provide:xu,multi:!0,deps:[zn],useFactory:t=>{let e=t.get(ib,Promise.resolve());return()=>e.then(()=>new Promise(i=>{let r=t.get(Kn),o=t.get(xv);yv(r,()=>{i(!0)}),t.get(Ih).afterPreactivation=()=>(i(!0),o.closed?N(void 0):o),r.initialNavigation()}))}}])}function FC(){return xs(3,[{provide:xu,multi:!0,useFactory:()=>{let t=D(Kn);return()=>{t.setUpLocationChangeListener()}}},{provide:Th,useValue:2}])}var Ev=new k("");function VC(n){return xs(0,[{provide:Ev,useExisting:kC},{provide:kc,useExisting:n}])}function LC(){return xs(8,[Bb,{provide:Pc,useExisting:Bb}])}function jC(n){let t=[{provide:_v,useValue:yC},{provide:bv,useValue:I({skipNextTransition:!!n?.skipInitialTransition},n)}];return xs(9,t)}var zb=new k("ROUTER_FORROOT_GUARD"),BC=[Ci,{provide:_s,useClass:cs},Kn,bs,{provide:Pi,useFactory:MC,deps:[Kn]},xh,[]],SN=(()=>{let t=class t{constructor(i){}static forRoot(i,r){return{ngModule:t,providers:[BC,[],{provide:Rc,multi:!0,useValue:i},{provide:zb,useFactory:$C,deps:[[Kn,new qo,new S_]]},{provide:ws,useValue:r||{}},r?.useHash?zC():qC(),UC(),r?.preloadingStrategy?VC(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?GC(r):[],r?.bindToComponentInputs?LC().\u0275providers:[],r?.enableViewTransitions?jC().\u0275providers:[],HC()]}}static forChild(i){return{ngModule:t,providers:[{provide:Rc,multi:!0,useValue:i}]}}};t.\u0275fac=function(r){return new(r||t)(p(zb,8))},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})();function UC(){return{provide:wv,useFactory:()=>{let n=D(db),t=D(V),e=D(ws),i=D(Ih),r=D(_s);return e.scrollOffset&&n.setOffset(e.scrollOffset),new PC(r,i,n,t,e)}}}function zC(){return{provide:Qo,useClass:ob}}function qC(){return{provide:Qo,useClass:rb}}function $C(n){return"guarded"}function GC(n){return[n.initialNavigation==="disabled"?FC().\u0275providers:[],n.initialNavigation==="enabledBlocking"?OC().\u0275providers:[]]}var qb=new k("");function HC(){return[{provide:qb,useFactory:NC},{provide:Q_,multi:!0,useExisting:qb}]}var Ch;try{Ch=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ch=!1}var st=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?lb(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ch)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(p(xe))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Vr,Iv=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Sh(){if(Vr)return Vr;if(typeof document!="object"||!document)return Vr=new Set(Iv),Vr;let n=document.createElement("input");return Vr=new Set(Iv.filter(t=>(n.setAttribute("type",t),n.type===t))),Vr}var Es;function WC(){if(Es==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Es=!0}))}finally{Es=Es||!1}return Es}function Yn(n){return WC()?n:!!n.capture}var Mi;function Tv(){if(Mi==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Mi=!1,Mi;if("scrollBehavior"in document.documentElement.style)Mi=!0;else{let n=Element.prototype.scrollTo;n?Mi=!/\{\s*\[native code\]\s*\}/.test(n.toString()):Mi=!1}}return Mi}var Ah;function KC(){if(Ah==null){let n=typeof document<"u"?document.head:null;Ah=!!(n&&(n.createShadowRoot||n.attachShadow))}return Ah}function Av(n){if(KC()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Cv(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){let t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function He(n){return n.composedPath?n.composedPath()[0]:n.target}function Is(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Lr(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function Ni(n){return n!=null&&`${n}`!="false"}function Dh(n,t=0){return QC(n)?Number(n):t}function QC(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}function jr(n){return Array.isArray(n)?n:[n]}function Rt(n){return n==null?"":typeof n=="string"?n:`${n}px`}function Ve(n){return n instanceof J?n.nativeElement:n}function LN(n,t=/\s+/){let e=[];if(n!=null){let i=Array.isArray(n)?n:`${n}`.split(t);for(let r of i){let o=`${r}`.trim();o&&e.push(o)}}return e}var YC=(()=>{let t=class t{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Nc=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({providers:[YC]});let n=t;return n})();var Sv=new Set,Oi,XC=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):JC}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&ZC(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(p(st),p(Go,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function ZC(n,t){if(!Sv.has(n))try{Oi||(Oi=document.createElement("style"),t&&(Oi.nonce=t),Oi.setAttribute("type","text/css"),document.head.appendChild(Oi)),Oi.sheet&&(Oi.sheet.insertRule(`@media ${n} {body{ }}`,0),Sv.add(n))}catch(e){console.error(e)}}function JC(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var Rv=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new q}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return Dv(jr(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=Dv(jr(i)).map(a=>this._registerQuery(a).observable),s=_r(o);return s=Xa(s.pipe(ke(1)),s.pipe(Ja(1),Za(0))),s.pipe(j(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new me(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(xn(r),j(({matches:a})=>({query:i,matches:a})),ae(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};t.\u0275fac=function(r){return new(r||t)(p(XC),p(V))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Dv(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var QN={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var Ov=" ";function fO(n,t,e){let i=Fv(n,t);e=e.trim(),!i.some(r=>r.trim()===e)&&(i.push(e),n.setAttribute(t,i.join(Ov)))}function mO(n,t,e){let i=Fv(n,t);e=e.trim();let r=i.filter(o=>o!==e);r.length?n.setAttribute(t,r.join(Ov)):n.removeAttribute(t)}function Fv(n,t){return n.getAttribute(t)?.match(/\S+/g)??[]}var kh=class{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new q,this._typeaheadSubscription=fe.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new q,this.change=new q,t instanceof bu&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){let r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(wt(e=>this._pressedLetters.push(e)),Za(t),yt(()=>this._pressedLetters.length>0),j(()=>this._pressedLetters.join(""))).subscribe(e=>{let i=this._getItemsArray();for(let r=1;r<i.length+1;r++){let o=(this._activeItemIndex+r)%i.length,s=i[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(e)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||Lr(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),i=typeof t=="number"?t:e.indexOf(t),r=e[i];this._activeItem=r??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let i=1;i<=e.length;i++){let r=(this._activeItemIndex+t*i+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let i=this._getItemsArray();if(i[t]){for(;this._skipPredicateFn(i[t]);)if(t+=e,!i[t])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof bu?this._items.toArray():this._items}},kv=class extends kh{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}};var bS=(()=>{let t=class t{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return yS(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=vS(SS(i));if(r&&(Pv(r)===-1||!this.isVisible(r)))return!1;let o=i.nodeName.toLowerCase(),s=Pv(i);return i.hasAttribute("contenteditable")?s!==-1:o==="iframe"||o==="object"||this._platform.WEBKIT&&this._platform.IOS&&!AS(i)?!1:o==="audio"?i.hasAttribute("controls")?s!==-1:!1:o==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return CS(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};t.\u0275fac=function(r){return new(r||t)(p(st))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function vS(n){try{return n.frameElement}catch{return null}}function yS(n){return!!(n.offsetWidth||n.offsetHeight||typeof n.getClientRects=="function"&&n.getClientRects().length)}function wS(n){let t=n.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function xS(n){return IS(n)&&n.type=="hidden"}function ES(n){return TS(n)&&n.hasAttribute("href")}function IS(n){return n.nodeName.toLowerCase()=="input"}function TS(n){return n.nodeName.toLowerCase()=="a"}function Vv(n){if(!n.hasAttribute("tabindex")||n.tabIndex===void 0)return!1;let t=n.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function Pv(n){if(!Vv(n))return null;let t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function AS(n){let t=n.nodeName.toLowerCase(),e=t==="input"&&n.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function CS(n){return xS(n)?!1:wS(n)||ES(n)||n.hasAttribute("contenteditable")||Vv(n)}function SS(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}var Ph=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,i,r,o=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let i=this._getFirstTabbableElement(e);return i?.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=0;i<e.length;i++){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let i=e.length-1;i>=0;i--){let r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(ke(1)).subscribe(t)}},DS=(()=>{let t=class t{constructor(i,r,o){this._checker=i,this._ngZone=r,this._document=o}create(i,r=!1){return new Ph(i,this._checker,this._ngZone,this._document,r)}};t.\u0275fac=function(r){return new(r||t)(p(bS),p(V),p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),pO=(()=>{let t=class t{get enabled(){return this.focusTrap?.enabled||!1}set enabled(i){this.focusTrap&&(this.focusTrap.enabled=i)}constructor(i,r,o){this._elementRef=i,this._focusTrapFactory=r,this._previouslyFocusedElement=null,D(st).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(i){let r=i.autoCapture;r&&!r.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=Cv(),this.focusTrap?.focusInitialElementWhenReady()}};t.\u0275fac=function(r){return new(r||t)(E(J),E(DS),E(Y))},t.\u0275dir=Q({type:t,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[M.HasDecoratorInputTransform,"cdkTrapFocus","enabled",_t],autoCapture:[M.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",_t]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Ee,ge]});let n=t;return n})();function Mh(n){return n.buttons===0||n.detail===0}function Nh(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var RS=new k("cdk-input-modality-detector-options"),kS={ignoreKeys:[18,17,224,91,16]},Lv=650,Br=Yn({passive:!0,capture:!0}),PS=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new pe(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=He(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<Lv||(this._modality.next(Mh(a)?"keyboard":"mouse"),this._mostRecentTarget=He(a))},this._onTouchstart=a=>{if(Nh(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=He(a)},this._options=I(I({},kS),s),this.modalityDetected=this._modality.pipe(Ja(1)),this.modalityChanged=this.modalityDetected.pipe(jo()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Br),o.addEventListener("mousedown",this._onMousedown,Br),o.addEventListener("touchstart",this._onTouchstart,Br)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Br),document.removeEventListener("mousedown",this._onMousedown,Br),document.removeEventListener("touchstart",this._onTouchstart,Br))}};t.\u0275fac=function(r){return new(r||t)(p(st),p(V),p(Y),p(RS,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),MS=new k("liveAnnouncerElement",{providedIn:"root",factory:NS});function NS(){return null}var OS=new k("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),FS=0,gO=(()=>{let t=class t{constructor(i,r,o,s){this._ngZone=r,this._defaultOptions=s,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,s,a;return r.length===1&&typeof r[0]=="number"?a=r[0]:[s,a]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),a==null&&o&&(a=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(c=>this._currentResolve=c)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof a=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),a)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${FS++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],a=s.getAttribute("aria-owns");a?a.indexOf(i)===-1&&s.setAttribute("aria-owns",a+" "+i):s.setAttribute("aria-owns",i)}}};t.\u0275fac=function(r){return new(r||t)(p(MS,8),p(V),p(Y),p(OS,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Fc=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(Fc||{}),VS=new k("cdk-focus-monitor-default-options"),Oc=Yn({passive:!0,capture:!0}),Oh=(()=>{let t=class t{constructor(i,r,o,s,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new q,this._rootNodeFocusAndBlurListener=c=>{let l=He(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=s,this._detectionMode=a?.detectionMode||Fc.IMMEDIATE}monitor(i,r=!1){let o=Ve(i);if(!this._platform.isBrowser||o.nodeType!==1)return N();let s=Av(o)||this._getDocument(),a=this._elementInfo.get(o);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new q,rootNode:s};return this._elementInfo.set(o,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Ve(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=Ve(i),a=this._getDocument().activeElement;s===a?this._getClosestElementsInfo(s).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===Fc.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===Fc.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?Lv:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=He(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,Oc),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,Oc)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ae(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Oc),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Oc),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let a=0;a<s.length;a++)if(s[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(p(V),p(st),p(PS),p(Y,8),p(VS,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),_O=(()=>{let t=class t{constructor(i,r){this._elementRef=i,this._focusMonitor=r,this._focusOrigin=null,this.cdkFocusChange=new lt}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let i=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(i,i.nodeType===1&&i.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(r=>{this._focusOrigin=r,this.cdkFocusChange.emit(r)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(E(J),E(Oh))},t.\u0275dir=Q({type:t,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0});let n=t;return n})(),Fi=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Fi||{}),Mv="cdk-high-contrast-black-on-white",Nv="cdk-high-contrast-white-on-black",Rh="cdk-high-contrast-active",Fh=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=D(Rv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Fi.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Fi.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Fi.BLACK_ON_WHITE}return Fi.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Rh,Mv,Nv),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Fi.BLACK_ON_WHITE?i.add(Rh,Mv):r===Fi.WHITE_ON_BLACK&&i.add(Rh,Nv)}}};t.\u0275fac=function(r){return new(r||t)(p(st),p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),bO=(()=>{let t=class t{constructor(i){i._applyBodyHighContrastModeCssClasses()}};t.\u0275fac=function(r){return new(r||t)(p(Fh))},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Nc]});let n=t;return n})();var jS=new k("cdk-dir-doc",{providedIn:"root",factory:BS});function BS(){return D(Y)}var US=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function zS(n){let t=n?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?US.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Ts=(()=>{let t=class t{constructor(i){if(this.value="ltr",this.change=new lt,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=zS(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};t.\u0275fac=function(r){return new(r||t)(p(jS,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Xn=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})();var GS=["text"];function HS(n,t){if(n&1&&zt(0,"mat-pseudo-checkbox",6),n&2){let e=Ie();Me("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function WS(n,t){if(n&1&&zt(0,"mat-pseudo-checkbox",7),n&2){let e=Ie();Me("disabled",e.disabled)}}function KS(n,t){if(n&1&&(Ct(0,"span",8),rc(1),St()),n&2){let e=Ie();xt(),q_("(",e.group.label,")")}}var QS=[[["mat-icon"]],"*"],YS=["mat-icon","*"];function XS(){return!0}var ZS=new k("mat-sanity-checks",{providedIn:"root",factory:XS}),Ce=(()=>{let t=class t{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Is()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(p(Fh),p(ZS,8),p(Y))},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Xn,Xn]});let n=t;return n})();var Lc=class{constructor(t,e,i,r,o){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=i,this._parentForm=r,this._stateChanges=o,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,i=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=i?.isErrorState(r,e)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var Bv=new k("MAT_DATE_LOCALE",{providedIn:"root",factory:JS});function JS(){return D(Y_)}var jc=class{constructor(){this._localeChanges=new q,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}},tD=new k("mat-date-formats"),eD=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Vh(n,t){let e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}var nD=(()=>{let t=class t extends jc{constructor(i){super(),this.useUtcForDisplay=!1,this._matDateLocale=D(Bv,{optional:!0}),i!==void 0&&(this._matDateLocale=i),super.setLocale(this._matDateLocale)}getYear(i){return i.getFullYear()}getMonth(i){return i.getMonth()}getDate(i){return i.getDate()}getDayOfWeek(i){return i.getDay()}getMonthNames(i){let r=new Intl.DateTimeFormat(this.locale,{month:i,timeZone:"utc"});return Vh(12,o=>this._format(r,new Date(2017,o,1)))}getDateNames(){let i=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Vh(31,r=>this._format(i,new Date(2017,0,r+1)))}getDayOfWeekNames(i){let r=new Intl.DateTimeFormat(this.locale,{weekday:i,timeZone:"utc"});return Vh(7,o=>this._format(r,new Date(2017,0,o+1)))}getYearName(i){let r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,i)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(i){return this.getDate(this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+1,0))}clone(i){return new Date(i.getTime())}createDate(i,r,o){let s=this._createDateWithOverflow(i,r,o);return s.getMonth()!=r,s}today(){return new Date}parse(i,r){return typeof i=="number"?new Date(i):i?new Date(Date.parse(i)):null}format(i,r){if(!this.isValid(i))throw Error("NativeDateAdapter: Cannot format invalid date.");let o=new Intl.DateTimeFormat(this.locale,ot(I({},r),{timeZone:"utc"}));return this._format(o,i)}addCalendarYears(i,r){return this.addCalendarMonths(i,r*12)}addCalendarMonths(i,r){let o=this._createDateWithOverflow(this.getYear(i),this.getMonth(i)+r,this.getDate(i));return this.getMonth(o)!=((this.getMonth(i)+r)%12+12)%12&&(o=this._createDateWithOverflow(this.getYear(o),this.getMonth(o),0)),o}addCalendarDays(i,r){return this._createDateWithOverflow(this.getYear(i),this.getMonth(i),this.getDate(i)+r)}toIso8601(i){return[i.getUTCFullYear(),this._2digit(i.getUTCMonth()+1),this._2digit(i.getUTCDate())].join("-")}deserialize(i){if(typeof i=="string"){if(!i)return null;if(eD.test(i)){let r=new Date(i);if(this.isValid(r))return r}}return super.deserialize(i)}isDateInstance(i){return i instanceof Date}isValid(i){return!isNaN(i.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(i,r,o){let s=new Date;return s.setFullYear(i,r,o),s.setHours(0,0,0,0),s}_2digit(i){return("00"+i).slice(-2)}_format(i,r){let o=new Date;return o.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),o.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),i.format(o)}};t.\u0275fac=function(r){return new(r||t)(p(Bv,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac});let n=t;return n})(),iD={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};var KO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({providers:[rD()]});let n=t;return n})();function rD(n=iD){return[{provide:jc,useClass:nD},{provide:tD,useValue:n}]}var Qv=(()=>{let t=class t{isErrorState(i,r){return!!(i&&i.invalid&&(i.touched||r&&r.submitted))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Le=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Le||{}),Bh=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Le.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},Uv=Yn({passive:!0,capture:!0}),Uh=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=He(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,i,r){let o=this._events.get(e);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,Uv)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(i),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,Uv)))}},zv={enterDuration:225,exitDuration:150},oD=800,qv=Yn({passive:!0,capture:!0}),$v=["mousedown","touchstart"],Gv=["mouseup","mouseleave","touchend","touchcancel"],As=class As{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Ve(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=I(I({},zv),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let s=i.radius||sD(t,e,r),a=t-r.left,c=e-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,f=u.transitionDuration,y=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,b=new Bh(this,d,i,y);d.style.transform="scale3d(1, 1, 1)",b.state=Le.FADING_IN,i.persistent||(this._mostRecentTransientRipple=b);let w=null;return!y&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let O=()=>this._finishRippleTransition(b),B=()=>this._destroyRipple(b);d.addEventListener("transitionend",O),d.addEventListener("transitioncancel",B),w={onTransitionEnd:O,onTransitionCancel:B}}),this._activeRipples.set(b,w),(y||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(t.state===Le.FADING_OUT||t.state===Le.HIDDEN)return;let e=t.element,i=I(I({},zv),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=Le.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Ve(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,$v.forEach(i=>{As._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Gv.forEach(e=>{this._triggerElement.addEventListener(e,this,qv)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Le.FADING_IN?this._startFadeOutTransition(t):t.state===Le.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=Le.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Le.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=Mh(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+oD;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Nh(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Le.VISIBLE||t.config.terminateOnPointerUp&&t.state===Le.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&($v.forEach(e=>As._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&Gv.forEach(e=>t.removeEventListener(e,this,qv)))}};As._eventManager=new Uh;var zh=As;function sD(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var Yv=new k("mat-ripple-global-options"),Xv=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new zh(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:I(I(I({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,I(I({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,I(I({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(E(J),E(V),E(st),E(Yv,8),E($e,8))},t.\u0275dir=Q({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&At("mat-ripple-unbounded",o.unbounded)},inputs:{color:[M.None,"matRippleColor","color"],unbounded:[M.None,"matRippleUnbounded","unbounded"],centered:[M.None,"matRippleCentered","centered"],radius:[M.None,"matRippleRadius","radius"],animation:[M.None,"matRippleAnimation","animation"],disabled:[M.None,"matRippleDisabled","disabled"],trigger:[M.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),$h=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Ce,Ce]});let n=t;return n})(),aD=(()=>{let t=class t{constructor(i){this._animationMode=i,this.state="unchecked",this.disabled=!1,this.appearance="full"}};t.\u0275fac=function(r){return new(r||t)(E($e,8))},t.\u0275cmp=Pe({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(r,o){r&2&&At("mat-pseudo-checkbox-indeterminate",o.state==="indeterminate")("mat-pseudo-checkbox-checked",o.state==="checked")("mat-pseudo-checkbox-disabled",o.disabled)("mat-pseudo-checkbox-minimal",o.appearance==="minimal")("mat-pseudo-checkbox-full",o.appearance==="full")("_mat-animation-noopable",o._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Ne],decls:0,vars:0,template:function(r,o){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0});let n=t;return n})(),cD=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Ce]});let n=t;return n})(),lD=new k("MAT_OPTION_PARENT_COMPONENT");var dD=new k("MatOptgroup");var uD=0,qh=class{constructor(t,e=!1){this.source=t,this.isUserInput=e}},QO=(()=>{let t=class t{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(i){this._disabled=i}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(i,r,o,s){this._element=i,this._changeDetectorRef=r,this._parent=o,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${uD++}`,this.onSelectionChange=new lt,this._stateChanges=new q}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(i=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),i&&this._emitSelectionChangeEvent())}deselect(i=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),i&&this._emitSelectionChangeEvent())}focus(i,r){let o=this._getHostElement();typeof o.focus=="function"&&o.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(i){(i.keyCode===13||i.keyCode===32)&&!Lr(i)&&(this._selectViaInteraction(),i.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let i=this.viewValue;i!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=i)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(i=!1){this.onSelectionChange.emit(new qh(this,i))}};t.\u0275fac=function(r){return new(r||t)(E(J),E(nn),E(lD,8),E(dD,8))},t.\u0275cmp=Pe({type:t,selectors:[["mat-option"]],viewQuery:function(r,o){if(r&1&&Ge(GS,7),r&2){let s;qt(s=$t())&&(o._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(r,o){r&1&&be("click",function(){return o._selectViaInteraction()})("keydown",function(a){return o._handleKeydown(a)}),r&2&&(Tr("id",o.id),_e("aria-selected",o.selected)("aria-disabled",o.disabled.toString()),At("mdc-list-item--selected",o.selected)("mat-mdc-option-multiple",o.multiple)("mat-mdc-option-active",o.active)("mdc-list-item--disabled",o.disabled))},inputs:{value:"value",id:"id",disabled:[M.HasDecoratorInputTransform,"disabled","disabled",_t]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Ee,Ne],ngContentSelectors:YS,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox","aria-hidden","true",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","aria-hidden","true","appearance","minimal",3,"disabled"],["class","cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(r,o){r&1&&(En(QS),Zt(0,HS,1,2,"mat-pseudo-checkbox",0),Ft(1),Ct(2,"span",1,2),Ft(4,1),St(),Zt(5,WS,1,1,"mat-pseudo-checkbox",3)(6,KS,2,1,"span",4),zt(7,"div",5)),r&2&&(Ht(0,o.multiple?0:-1),xt(5),Ht(5,!o.multiple&&o.selected&&!o.hideSingleSelectionIndicator?5:-1),xt(),Ht(6,o.group&&o.group._inert?6:-1),xt(),Me("matRippleTrigger",o._getHostElement())("matRippleDisabled",o.disabled||o.disableRipple))},dependencies:[aD,Xv],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});let n=t;return n})();function YO(n,t,e){if(e.length){let i=t.toArray(),r=e.toArray(),o=0;for(let s=0;s<n+1;s++)i[s].group&&i[s].group===r[o]&&o++;return o}return 0}function XO(n,t,e,i){return n<e?n:n+t>e+i?Math.max(0,n-i+t):e}var ZO=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[$h,Ce,cD]});let n=t;return n})(),Hv={capture:!0},Wv=["focus","click","mouseenter","touchstart"],Lh="mat-ripple-loader-uninitialized",jh="mat-ripple-loader-class-name",Kv="mat-ripple-loader-centered",Vc="mat-ripple-loader-disabled",Zv=(()=>{let t=class t{constructor(){this._document=D(Y,{optional:!0}),this._animationMode=D($e,{optional:!0}),this._globalRippleOptions=D(Yv,{optional:!0}),this._platform=D(st),this._ngZone=D(V),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let o=i.target.closest(`[${Lh}]`);o&&this._createRipple(o)},this._ngZone.runOutsideAngular(()=>{for(let i of Wv)this._document?.addEventListener(i,this._onInteraction,Hv)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of Wv)this._document?.removeEventListener(r,this._onInteraction,Hv)}configureRipple(i,r){i.setAttribute(Lh,""),(r.className||!i.hasAttribute(jh))&&i.setAttribute(jh,r.className||""),r.centered&&i.setAttribute(Kv,""),r.disabled&&i.setAttribute(Vc,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Vc,""):i.removeAttribute(Vc)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(jh)),i.append(o);let s=new Xv(new J(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(Kv),s.disabled=i.hasAttribute(Vc),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(Lh),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var fD=["mat-button",""],mD=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],pD=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var gD=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var _D=["mat-icon-button",""],bD=["*"];var vD=new k("MAT_BUTTON_CONFIG");var yD=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Jv=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=D(Oh),this._rippleLoader=D(Zv),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=D(vD,{optional:!0}),c=i.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:u}of yD)c.hasAttribute(d)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){ec()},t.\u0275dir=Q({type:t,inputs:{color:"color",disableRipple:[M.HasDecoratorInputTransform,"disableRipple","disableRipple",_t],disabled:[M.HasDecoratorInputTransform,"disabled","disabled",_t],ariaDisabled:[M.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",_t],disabledInteractive:[M.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",_t]},features:[Ee]});let n=t;return n})();var hF=(()=>{let t=class t extends Jv{constructor(i,r,o,s){super(i,r,o,s)}};t.\u0275fac=function(r){return new(r||t)(E(J),E(st),E(V),E($e,8))},t.\u0275cmp=Pe({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(_e("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),_u(o.color?"mat-"+o.color:""),At("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ne,Ne],attrs:fD,ngContentSelectors:pD,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(En(mD),zt(0,"span",0),Ft(1),Ct(2,"span",1),Ft(3,1),St(),Ft(4,2),zt(5,"span",2)(6,"span",3)),r&2&&At("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let n=t;return n})();var fF=(()=>{let t=class t extends Jv{constructor(i,r,o,s){super(i,r,o,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};t.\u0275fac=function(r){return new(r||t)(E(J),E(st),E(V),E($e,8))},t.\u0275cmp=Pe({type:t,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(_e("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),_u(o.color?"mat-"+o.color:""),At("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ne,Ne],attrs:_D,ngContentSelectors:bD,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(En(),zt(0,"span",0),Ft(1),zt(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;border-radius:50%;flex-shrink:0;text-align:center;font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',gD],encapsulation:2,changeDetection:0});let n=t;return n})();var mF=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Ce,$h,Ce]});let n=t;return n})();var cy=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(E(Wo),E(J))},t.\u0275dir=Q({type:t});let n=t;return n})(),ly=(()=>{let t=class t extends cy{};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ei(t)))(o||t)}})(),t.\u0275dir=Q({type:t,features:[ne]});let n=t;return n})(),Kc=new k("");var wD={provide:Kc,useExisting:xi(()=>dy),multi:!0};function xD(){let n=Ai()?Ai().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ED=new k(""),dy=(()=>{let t=class t extends cy{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!xD())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(E(Wo),E(J),E(ED,8))},t.\u0275dir=Q({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&be("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[ce([wD]),ne]});let n=t;return n})();function Zn(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function uy(n){return n!=null&&typeof n.length=="number"}var Qc=new k(""),Yc=new k(""),ID=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Uc=class{static min(t){return TD(t)}static max(t){return AD(t)}static required(t){return CD(t)}static requiredTrue(t){return SD(t)}static email(t){return DD(t)}static minLength(t){return RD(t)}static maxLength(t){return kD(t)}static pattern(t){return PD(t)}static nullValidator(t){return hy(t)}static compose(t){return by(t)}static composeAsync(t){return vy(t)}};function TD(n){return t=>{if(Zn(t.value)||Zn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}function AD(n){return t=>{if(Zn(t.value)||Zn(n))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}function CD(n){return Zn(n.value)?{required:!0}:null}function SD(n){return n.value===!0?null:{required:!0}}function DD(n){return Zn(n.value)||ID.test(n.value)?null:{email:!0}}function RD(n){return t=>Zn(t.value)||!uy(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}function kD(n){return t=>uy(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}function PD(n){if(!n)return hy;let t,e;return typeof n=="string"?(e="",n.charAt(0)!=="^"&&(e+="^"),e+=n,n.charAt(n.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(Zn(i.value))return null;let r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function hy(n){return null}function fy(n){return n!=null}function my(n){return nc(n)?pt(n):n}function py(n){let t={};return n.forEach(e=>{t=e!=null?I(I({},t),e):t}),Object.keys(t).length===0?null:t}function gy(n,t){return t.map(e=>e(n))}function MD(n){return!n.validate}function _y(n){return n.map(t=>MD(t)?t:e=>t.validate(e))}function by(n){if(!n)return null;let t=n.filter(fy);return t.length==0?null:function(e){return py(gy(e,t))}}function Kh(n){return n!=null?by(_y(n)):null}function vy(n){if(!n)return null;let t=n.filter(fy);return t.length==0?null:function(e){let i=gy(e,t).map(my);return E_(i).pipe(j(py))}}function Qh(n){return n!=null?vy(_y(n)):null}function ty(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function yy(n){return n._rawValidators}function wy(n){return n._rawAsyncValidators}function Gh(n){return n?Array.isArray(n)?n:[n]:[]}function zc(n,t){return Array.isArray(n)?n.includes(t):n===t}function ey(n,t){let e=Gh(t);return Gh(n).forEach(r=>{zc(e,r)||e.push(r)}),e}function ny(n,t){return Gh(t).filter(e=>!zc(n,e))}var qc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Kh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Qh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},An=class extends qc{get formDirective(){return null}get path(){return null}},Cn=class extends qc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},$c=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ND={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},kF=ot(I({},ND),{"[class.ng-submitted]":"isSubmitted"}),PF=(()=>{let t=class t extends $c{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(E(Cn,2))},t.\u0275dir=Q({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&At("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ne]});let n=t;return n})(),MF=(()=>{let t=class t extends $c{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(E(An,10))},t.\u0275dir=Q({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&At("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[ne]});let n=t;return n})();var Cs="VALID",Bc="INVALID",Ur="PENDING",Ss="DISABLED";function Yh(n){return(Xc(n)?n.validators:n)||null}function OD(n){return Array.isArray(n)?Kh(n):n||null}function Xh(n,t){return(Xc(t)?t.asyncValidators:n)||null}function FD(n){return Array.isArray(n)?Qh(n):n||null}function Xc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function xy(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new ut(1e3,"");if(!i[e])throw new ut(1001,"")}function Ey(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new ut(1002,"")})}var zr=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Cs}get invalid(){return this.status===Bc}get pending(){return this.status==Ur}get disabled(){return this.status===Ss}get enabled(){return this.status!==Ss}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ey(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ey(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(ny(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(ny(t,this._rawAsyncValidators))}hasValidator(t){return zc(this._rawValidators,t)}hasAsyncValidator(t){return zc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ur,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ss,this.errors=null,this._forEachChild(i=>{i.disable(ot(I({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ot(I({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Cs,this._forEachChild(i=>{i.enable(ot(I({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(ot(I({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cs||this.status===Ur)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ss:Cs}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ur,this._hasOwnPendingAsyncValidator=!0;let e=my(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new lt,this.statusChanges=new lt}_calculateStatus(){return this._allControlsDisabled()?Ss:this.errors?Bc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ur)?Ur:this._anyControlsHaveStatus(Bc)?Bc:Cs}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Xc(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=OD(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=FD(this._rawAsyncValidators)}},qr=class extends zr{constructor(t,e,i){super(Yh(e),Xh(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Ey(this,!0,t),Object.keys(t).forEach(i=>{xy(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,o)=>{i=e(i,r,o)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Hh=class extends qr{};var ks=new k("CallSetDisabledState",{providedIn:"root",factory:()=>Zc}),Zc="always";function Iy(n,t){return[...t.path,n]}function Gc(n,t,e=Zc){Zh(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),LD(n,t),BD(n,t),jD(n,t),VD(n,t)}function iy(n,t,e=!0){let i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),Wc(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Hc(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function VD(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function Zh(n,t){let e=yy(n);t.validator!==null?n.setValidators(ty(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=wy(n);t.asyncValidator!==null?n.setAsyncValidators(ty(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Hc(t._rawValidators,r),Hc(t._rawAsyncValidators,r)}function Wc(n,t){let e=!1;if(n!==null){if(t.validator!==null){let r=yy(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,n.setValidators(o))}}if(t.asyncValidator!==null){let r=wy(n);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,n.setAsyncValidators(o))}}}let i=()=>{};return Hc(t._rawValidators,i),Hc(t._rawAsyncValidators,i),e}function LD(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Ty(n,t)})}function jD(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Ty(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function Ty(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function BD(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Ay(n,t){n==null,Zh(n,t)}function UD(n,t){return Wc(n,t)}function Cy(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function zD(n){return Object.getPrototypeOf(n.constructor)===ly}function Sy(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Dy(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(o=>{o.constructor===dy?e=o:zD(o)?i=o:r=o}),r||i||e||null}function qD(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}var $D={provide:An,useExisting:xi(()=>Jh)},Ds=Promise.resolve(),Jh=(()=>{let t=class t extends An{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new lt,this.form=new qr({},Kh(i),Qh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Ds.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Gc(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Ds.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Ds.then(()=>{let r=this._findContainer(i.path),o=new qr({});Ay(o,i),r.registerControl(i.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Ds.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Ds.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,Sy(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};t.\u0275fac=function(r){return new(r||t)(E(Qc,10),E(Yc,10),E(ks,8))},t.\u0275dir=Q({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&be("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[M.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ce([$D]),ne]});let n=t;return n})();function ry(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function oy(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Rs=class extends zr{constructor(t=null,e,i){super(Yh(e),Xh(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xc(e)&&(e.nonNullable||e.initialValueIsDefault)&&(oy(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ry(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ry(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){oy(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var GD=n=>n instanceof Rs;var HD={provide:Cn,useExisting:xi(()=>WD)},sy=Promise.resolve(),WD=(()=>{let t=class t extends Cn{constructor(i,r,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Rs,this._registered=!1,this.name="",this.update=new lt,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Dy(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),Cy(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){sy.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,o=r!==0&&_t(r);sy.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?Iy(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(E(An,9),E(Qc,10),E(Yc,10),E(Kc,10),E(nn,8),E(ks,8))},t.\u0275dir=Q({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[M.None,"disabled","isDisabled"],model:[M.None,"ngModel","model"],options:[M.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ce([HD]),ne,ge]});let n=t;return n})(),OF=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Q({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=t;return n})(),KD={provide:Kc,useExisting:xi(()=>QD),multi:!0},QD=(()=>{let t=class t extends ly{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};t.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ei(t)))(o||t)}})(),t.\u0275dir=Q({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,o){r&1&&be("input",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},features:[ce([KD]),ne]});let n=t;return n})();var Ry=new k("");var YD={provide:An,useExisting:xi(()=>tf)},tf=(()=>{let t=class t extends An{constructor(i,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new lt,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Wc(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return Gc(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){iy(i.control||null,i,!1),qD(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,Sy(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,o=this.form.get(i.path);r!==o&&(iy(r||null,i),GD(o)&&(Gc(o,i,this.callSetDisabledState),i.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);Ay(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&UD(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Zh(this.form,this),this._oldForm&&Wc(this._oldForm,this)}_checkFormPresent(){this.form}};t.\u0275fac=function(r){return new(r||t)(E(Qc,10),E(Yc,10),E(ks,8))},t.\u0275dir=Q({type:t,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&be("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[M.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ce([YD]),ne,ge]});let n=t;return n})();var XD={provide:Cn,useExisting:xi(()=>ZD)},ZD=(()=>{let t=class t extends Cn{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new lt,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Dy(this,s)}ngOnChanges(i){this._added||this._setUpControl(),Cy(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return Iy(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};t._ngModelWarningSentOnce=!1,t.\u0275fac=function(r){return new(r||t)(E(An,13),E(Qc,10),E(Yc,10),E(Kc,10),E(Ry,8))},t.\u0275dir=Q({type:t,selectors:[["","formControlName",""]],inputs:{name:[M.None,"formControlName","name"],isDisabled:[M.None,"disabled","isDisabled"],model:[M.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ce([XD]),ne,ge]});let n=t;return n})();var ky=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})(),Wh=class extends zr{constructor(t,e,i){super(Yh(e),Xh(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Ey(this,!1,t),t.forEach((i,r)=>{xy(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,i)=>i._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function ay(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var FF=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,r=null){let o=this._reduceControls(i),s={};return ay(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new qr(o,s)}record(i,r=null){let o=this._reduceControls(i);return new Hh(o,r)}control(i,r,o){let s={};return this.useNonNullable?(ay(r)?s=r:(s.validators=r,s.asyncValidators=o),new Rs(i,ot(I({},s),{nonNullable:!0}))):new Rs(i,r,o)}array(i,r,o){let s=i.map(a=>this._createControl(a));return new Wh(s,r,o)}_reduceControls(i){let r={};return Object.keys(i).forEach(o=>{r[o]=this._createControl(i[o])}),r}_createControl(i){if(i instanceof Rs)return i;if(i instanceof zr)return i;if(Array.isArray(i)){let r=i[0],o=i.length>1?i[1]:null,s=i.length>2?i[2]:null;return this.control(r,o,s)}else return this.control(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var VF=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:ks,useValue:i.callSetDisabledState??Zc}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[ky]});let n=t;return n})(),LF=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:Ry,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:ks,useValue:i.callSetDisabledState??Zc}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[ky]});let n=t;return n})();var Py=Yn({passive:!0}),My=(()=>{let t=class t{constructor(i,r){this._platform=i,this._ngZone=r,this._monitoredElements=new Map}monitor(i){if(!this._platform.isBrowser)return wn;let r=Ve(i),o=this._monitoredElements.get(r);if(o)return o.subject;let s=new q,a="cdk-text-field-autofilled",c=l=>{l.animationName==="cdk-text-field-autofill-start"&&!r.classList.contains(a)?(r.classList.add(a),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&r.classList.contains(a)&&(r.classList.remove(a),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",c,Py),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",c,Py)}}),s}stopMonitoring(i){let r=Ve(i),o=this._monitoredElements.get(r);o&&(o.unlisten(),o.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((i,r)=>this.stopMonitoring(r))}};t.\u0275fac=function(r){return new(r||t)(p(st),p(V))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ny=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})();var ef=class{constructor(t){this._box=t,this._destroyed=new q,this._resizeSubject=new q,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new me(e=>{let i=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),i.unsubscribe(),this._elementObservables.delete(t)}}).pipe(yt(e=>e.some(i=>i.target===t)),wr({bufferSize:1,refCount:!0}),ae(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},Oy=(()=>{let t=class t{constructor(){this._observers=new Map,this._ngZone=D(V),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,i]of this._observers)i.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(i,r){let o=r?.box||"content-box";return this._observers.has(o)||this._observers.set(o,new ef(o)),this._observers.get(o).observe(i)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var eR=["notch"],nR=["matFormFieldNotchedOutline",""],iR=["*"],rR=["textField"],oR=["iconPrefixContainer"],sR=["textPrefixContainer"];function aR(n,t){n&1&&zt(0,"span",16)}function cR(n,t){if(n&1&&(Ct(0,"label",14),Ft(1,1),Zt(2,aR,1,0,"span",15),St()),n&2){let e=Ie(2);Me("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),_e("for",e._control.id),xt(2),Ht(2,!e.hideRequiredMarker&&e._control.required?2:-1)}}function lR(n,t){if(n&1&&Zt(0,cR,3,5,"label",14),n&2){let e=Ie();Ht(0,e._hasFloatingLabel()?0:-1)}}function dR(n,t){n&1&&zt(0,"div",17)}function uR(n,t){}function hR(n,t){if(n&1&&Zt(0,uR,0,0,"ng-template",9),n&2){Ie(2);let e=vu(1);Me("ngTemplateOutlet",e)}}function fR(n,t){if(n&1&&(Ct(0,"div",5),Zt(1,hR,1,1,null,9),St()),n&2){let e=Ie();Me("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),xt(),Ht(1,e._forceDisplayInfixLabel()?-1:1)}}function mR(n,t){n&1&&(Ct(0,"div",18,19),Ft(2,2),St())}function pR(n,t){n&1&&(Ct(0,"div",20,21),Ft(2,3),St())}function gR(n,t){}function _R(n,t){if(n&1&&Zt(0,gR,0,0,"ng-template",9),n&2){Ie();let e=vu(1);Me("ngTemplateOutlet",e)}}function bR(n,t){n&1&&(Ct(0,"div",22),Ft(1,4),St())}function vR(n,t){n&1&&(Ct(0,"div",23),Ft(1,5),St())}function yR(n,t){n&1&&zt(0,"div",12)}function wR(n,t){if(n&1&&(Ct(0,"div",24),Ft(1,6),St()),n&2){let e=Ie();Me("@transitionMessages",e._subscriptAnimationState)}}function xR(n,t){if(n&1&&(Ct(0,"mat-hint",26),rc(1),St()),n&2){let e=Ie(2);Me("id",e._hintLabelId),xt(),z_(e.hintLabel)}}function ER(n,t){if(n&1&&(Ct(0,"div",25),Zt(1,xR,2,2,"mat-hint",26),Ft(2,7),zt(3,"div",27),Ft(4,8),St()),n&2){let e=Ie();Me("@transitionMessages",e._subscriptAnimationState),xt(),Ht(1,e.hintLabel?1:-1)}}var IR=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],TR=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"],Fy=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Q({type:t,selectors:[["mat-label"]],standalone:!0});let n=t;return n})();var AR=new k("MatError");var CR=0,Vy=(()=>{let t=class t{constructor(){this.align="start",this.id=`mat-mdc-hint-${CR++}`}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Q({type:t,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(r,o){r&2&&(Tr("id",o.id),_e("align",null),At("mat-mdc-form-field-hint-end",o.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0});let n=t;return n})(),SR=new k("MatPrefix");var DR=new k("MatSuffix");var Gy=new k("FloatingLabelParent"),Ly=(()=>{let t=class t{get floating(){return this._floating}set floating(i){this._floating=i,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(i){this._monitorResize=i,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(i){this._elementRef=i,this._floating=!1,this._monitorResize=!1,this._resizeObserver=D(Oy),this._ngZone=D(V),this._parent=D(Gy),this._resizeSubscription=new fe}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return RR(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}};t.\u0275fac=function(r){return new(r||t)(E(J))},t.\u0275dir=Q({type:t,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(r,o){r&2&&At("mdc-floating-label--float-above",o.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0});let n=t;return n})();function RR(n){let t=n;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let i=e.scrollWidth;return e.remove(),i}var jy="mdc-line-ripple--active",Jc="mdc-line-ripple--deactivating",By=(()=>{let t=class t{constructor(i,r){this._elementRef=i,this._handleTransitionEnd=o=>{let s=this._elementRef.nativeElement.classList,a=s.contains(Jc);o.propertyName==="opacity"&&a&&s.remove(jy,Jc)},r.runOutsideAngular(()=>{i.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let i=this._elementRef.nativeElement.classList;i.remove(Jc),i.add(jy)}deactivate(){this._elementRef.nativeElement.classList.add(Jc)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}};t.\u0275fac=function(r){return new(r||t)(E(J),E(V))},t.\u0275dir=Q({type:t,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0});let n=t;return n})(),Uy=(()=>{let t=class t{constructor(i,r){this._elementRef=i,this._ngZone=r,this.open=!1}ngAfterViewInit(){let i=this._elementRef.nativeElement.querySelector(".mdc-floating-label");i?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(i.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>i.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(i){!this.open||!i?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${i}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}};t.\u0275fac=function(r){return new(r||t)(E(J),E(V))},t.\u0275cmp=Pe({type:t,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(r,o){if(r&1&&Ge(eR,5),r&2){let s;qt(s=$t())&&(o._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(r,o){r&2&&At("mdc-notched-outline--notched",o.open)},inputs:{open:[M.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Ne],attrs:nR,ngContentSelectors:iR,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(r,o){r&1&&(En(),zt(0,"div",0),Ct(1,"div",1,2),Ft(3),St(),zt(4,"div",3))},encapsulation:2,changeDetection:0});let n=t;return n})(),kR={transitionMessages:bb("transitionMessages",[yb("enter",Cu({opacity:1,transform:"translateY(0%)"})),wb("void => enter",[Cu({opacity:0,transform:"translateY(-5px)"}),vb("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},nf=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Q({type:t});let n=t;return n})();var rf=new k("MatFormField"),PR=new k("MAT_FORM_FIELD_DEFAULT_OPTIONS"),zy=0,qy="fill",MR="auto",$y="fixed",NR="translateY(-50%)",pV=(()=>{let t=class t{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(i){this._hideRequiredMarker=Ni(i)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||MR}set floatLabel(i){i!==this._floatLabel&&(this._floatLabel=i,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(i){let r=this._appearance,o=i||this._defaults?.appearance||qy;this._appearance=o,this._appearance==="outline"&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||$y}set subscriptSizing(i){this._subscriptSizing=i||this._defaults?.subscriptSizing||$y}get hintLabel(){return this._hintLabel}set hintLabel(i){this._hintLabel=i,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(i){this._explicitFormFieldControl=i}constructor(i,r,o,s,a,c,l,d){this._elementRef=i,this._changeDetectorRef=r,this._ngZone=o,this._dir=s,this._platform=a,this._defaults=c,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance=qy,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${zy++}`,this._hintLabelId=`mat-mdc-hint-${zy++}`,this._subscriptAnimationState="",this._destroyed=new q,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,c&&(c.appearance&&(this.appearance=c.appearance),this._hideRequiredMarker=!!c?.hideRequiredMarker,c.color&&(this.color=c.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let i=this._control;i.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${i.controlType}`),i.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),i.ngControl&&i.ngControl.valueChanges&&i.ngControl.valueChanges.pipe(ae(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(i=>!i._isText),this._hasTextPrefix=!!this._prefixChildren.find(i=>i._isText),this._hasIconSuffix=!!this._suffixChildren.find(i=>!i._isText),this._hasTextSuffix=!!this._suffixChildren.find(i=>i._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),br(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ae(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(ae(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(i){let r=this._control?this._control.ngControl:null;return r&&r[i]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let i=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&i.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let r=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,o=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;r?i.push(r.id):this._hintLabel&&i.push(this._hintLabelId),o&&i.push(o.id)}else this._errorChildren&&i.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(i)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let i=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){i.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let r=this._iconPrefixContainer?.nativeElement,o=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,a=o?.getBoundingClientRect().width??0,c=this._dir.value==="rtl"?"-1":"1",l=`${s+a}px`,u=`calc(${c} * (${l} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;i.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${NR} translateX(${u})
    )`}_isAttachedToDom(){let i=this._elementRef.nativeElement;if(i.getRootNode){let r=i.getRootNode();return r&&r!==i}return document.documentElement.contains(i)}};t.\u0275fac=function(r){return new(r||t)(E(J),E(nn),E(V),E(Ts),E(st),E(PR,8),E($e,8),E(Y))},t.\u0275cmp=Pe({type:t,selectors:[["mat-form-field"]],contentQueries:function(r,o,s){if(r&1&&(In(s,Fy,5),In(s,Fy,7),In(s,nf,5),In(s,SR,5),In(s,DR,5),In(s,AR,5),In(s,Vy,5)),r&2){let a;qt(a=$t())&&(o._labelChildNonStatic=a.first),qt(a=$t())&&(o._labelChildStatic=a.first),qt(a=$t())&&(o._formFieldControl=a.first),qt(a=$t())&&(o._prefixChildren=a),qt(a=$t())&&(o._suffixChildren=a),qt(a=$t())&&(o._errorChildren=a),qt(a=$t())&&(o._hintChildren=a)}},viewQuery:function(r,o){if(r&1&&(Ge(rR,5),Ge(oR,5),Ge(sR,5),Ge(Ly,5),Ge(Uy,5),Ge(By,5)),r&2){let s;qt(s=$t())&&(o._textField=s.first),qt(s=$t())&&(o._iconPrefixContainer=s.first),qt(s=$t())&&(o._textPrefixContainer=s.first),qt(s=$t())&&(o._floatingLabel=s.first),qt(s=$t())&&(o._notchedOutline=s.first),qt(s=$t())&&(o._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(r,o){r&2&&At("mat-mdc-form-field-label-always-float",o._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",o._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",o._hasIconSuffix)("mat-form-field-invalid",o._control.errorState)("mat-form-field-disabled",o._control.disabled)("mat-form-field-autofilled",o._control.autofilled)("mat-form-field-no-animations",o._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",o.appearance=="fill")("mat-form-field-appearance-outline",o.appearance=="outline")("mat-form-field-hide-placeholder",o._hasFloatingLabel()&&!o._shouldLabelFloat())("mat-focused",o._control.focused)("mat-primary",o.color!=="accent"&&o.color!=="warn")("mat-accent",o.color==="accent")("mat-warn",o.color==="warn")("ng-untouched",o._shouldForward("untouched"))("ng-touched",o._shouldForward("touched"))("ng-pristine",o._shouldForward("pristine"))("ng-dirty",o._shouldForward("dirty"))("ng-valid",o._shouldForward("valid"))("ng-invalid",o._shouldForward("invalid"))("ng-pending",o._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[ce([{provide:rf,useExisting:t},{provide:Gy,useExisting:t}]),Ne],ngContentSelectors:TR,decls:18,vars:21,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],["class","mat-mdc-form-field-icon-prefix"],["class","mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],["class","mat-mdc-form-field-text-suffix"],["class","mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(r,o){if(r&1&&(En(IR),Zt(0,lR,1,1,"ng-template",null,0,G_),Ct(2,"div",1,2),be("click",function(a){return o._control.onContainerClick(a)}),Zt(4,dR,1,0,"div",3),Ct(5,"div",4),Zt(6,fR,2,2,"div",5)(7,mR,3,0,"div",6)(8,pR,3,0,"div",7),Ct(9,"div",8),Zt(10,_R,1,1,null,9),Ft(11),St(),Zt(12,bR,2,0,"div",10)(13,vR,2,0,"div",11),St(),Zt(14,yR,1,0,"div",12),St(),Ct(15,"div",13),Zt(16,wR,2,1)(17,ER,5,2),St()),r&2){let s;xt(2),At("mdc-text-field--filled",!o._hasOutline())("mdc-text-field--outlined",o._hasOutline())("mdc-text-field--no-label",!o._hasFloatingLabel())("mdc-text-field--disabled",o._control.disabled)("mdc-text-field--invalid",o._control.errorState),xt(2),Ht(4,!o._hasOutline()&&!o._control.disabled?4:-1),xt(2),Ht(6,o._hasOutline()?6:-1),xt(),Ht(7,o._hasIconPrefix?7:-1),xt(),Ht(8,o._hasTextPrefix?8:-1),xt(2),Ht(10,!o._hasOutline()||o._forceDisplayInfixLabel()?10:-1),xt(2),Ht(12,o._hasTextSuffix?12:-1),xt(),Ht(13,o._hasIconSuffix?13:-1),xt(),Ht(14,o._hasOutline()?-1:14),xt(),At("mat-mdc-form-field-subscript-dynamic-size",o.subscriptSizing==="dynamic"),xt(),Ht(16,(s=o._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[Ly,Uy,ab,By,Vy],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[kR.transitionMessages]},changeDetection:0});let n=t;return n})(),of=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Ce,lc,Nc,Ce]});let n=t;return n})();var OR=new k("MAT_INPUT_VALUE_ACCESSOR"),FR=["button","checkbox","file","hidden","image","radio","range","reset","submit"],VR=0,kV=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){this._disabled=Ni(i),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(i){this._id=i||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Uc.required)??!1}set required(i){this._required=Ni(i)}get type(){return this._type}set type(i){this._type=i||"text",this._validateType(),!this._isTextarea&&Sh().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(i){this._errorStateTracker.matcher=i}get value(){return this._inputValueAccessor.value}set value(i){i!==this.value&&(this._inputValueAccessor.value=i,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(i){this._readonly=Ni(i)}get errorState(){return this._errorStateTracker.errorState}set errorState(i){this._errorStateTracker.errorState=i}constructor(i,r,o,s,a,c,l,d,u,h){this._elementRef=i,this._platform=r,this.ngControl=o,this._autofillMonitor=d,this._formField=h,this._uid=`mat-input-${VR++}`,this.focused=!1,this.stateChanges=new q,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(b=>Sh().has(b)),this._iOSKeyupListener=b=>{let w=b.target;!w.value&&w.selectionStart===0&&w.selectionEnd===0&&(w.setSelectionRange(1,1),w.setSelectionRange(0,0))};let f=this._elementRef.nativeElement,y=f.nodeName.toLowerCase();this._inputValueAccessor=l||f,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&u.runOutsideAngular(()=>{i.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new Lc(c,o,a,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=y==="select",this._isTextarea=y==="textarea",this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=f.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(i=>{this.autofilled=i.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(i){this._elementRef.nativeElement.focus(i)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(i){i!==this.focused&&(this.focused=i,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let i=this._elementRef.nativeElement.value;this._previousNativeValue!==i&&(this._previousNativeValue=i,this.stateChanges.next())}_dirtyCheckPlaceholder(){let i=this._getPlaceholder();if(i!==this._previousPlaceholder){let r=this._elementRef.nativeElement;this._previousPlaceholder=i,i?r.setAttribute("placeholder",i):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){FR.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let i=this._elementRef.nativeElement.validity;return i&&i.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let i=this._elementRef.nativeElement,r=i.options[0];return this.focused||i.multiple||!this.empty||!!(i.selectedIndex>-1&&r&&r.label)}else return this.focused||!this.empty}setDescribedByIds(i){i.length?this._elementRef.nativeElement.setAttribute("aria-describedby",i.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let i=this._elementRef.nativeElement;return this._isNativeSelect&&(i.multiple||i.size>1)}};t.\u0275fac=function(r){return new(r||t)(E(J),E(st),E(Cn,10),E(Jh,8),E(tf,8),E(Qv),E(OR,10),E(My),E(V),E(rf,8))},t.\u0275dir=Q({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(r,o){r&1&&be("focus",function(){return o._focusChanged(!0)})("blur",function(){return o._focusChanged(!1)})("input",function(){return o._onInput()}),r&2&&(Tr("id",o.id)("disabled",o.disabled)("required",o.required),_e("name",o.name||null)("readonly",o.readonly&&!o._isNativeSelect||null)("aria-invalid",o.empty&&o.required?null:o.errorState)("aria-required",o.required)("id",o.id),At("mat-input-server",o._isServer)("mat-mdc-form-field-textarea-control",o._isInFormField&&o._isTextarea)("mat-mdc-form-field-input-control",o._isInFormField)("mdc-text-field__input",o._isInFormField)("mat-mdc-native-select-inline",o._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[M.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[ce([{provide:nf,useExisting:t}]),ge]});let n=t;return n})(),PV=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Ce,of,of,Ny,Ce]});let n=t;return n})();var LR="firebase",jR="10.8.0";qn(LR,jR,"app");var Ps=new Ar("ANGULARFIRE2_VERSION");var BR=(n,t)=>{let e=t?[t]:_b(),i=[];return e.forEach(r=>{r.container.getProvider(n).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},Vi=class{constructor(){return BR(UR)}},UR="app-check";function sf(){}var tl=class{zone;delegate;constructor(t,e=w_){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,i){let r=this.zone,o=function(s){r.runGuarded(()=>{t.apply(this,[s])})};return this.delegate.schedule(o,e,i)}},af=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",sf,{},sf,sf)),e.pipe(wt({next:i,complete:i,error:i})).subscribe(t).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},el=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new tl(Zone.current)),this.insideAngular=e.run(()=>new tl(Zone.current,Qa)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(p(V))};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function zR(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function ve(n){return qR(zR())(n)}function qR(n){return function(e){return e=e.lift(new af(n.ngZone)),e.pipe(gr(n.outsideAngular),wi(n.insideAngular))}}var $R="firebase",GR="10.8.0";Te.registerVersion($R,GR,"app-compat");var HR=["ngOnDestroy"],Ky=(n,t,e,i={})=>new Proxy(n,{get:(r,o)=>e.runOutsideAngular(()=>{if(n[o])return i?.spy?.get&&i.spy.get(o,n[o]),n[o];if(HR.indexOf(o)>-1)return()=>{};let s=t.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>e.run(()=>l)):e.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(d=>{let u=d?.(...l);return i?.spy?.apply&&i.spy.apply(o,l,u),u})})})});var nl=class{constructor(t){return t}},$r=new k("angularfire2.app.options"),Gr=new k("angularfire2.app.name");function Ms(n,t,e){let i=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||i;let s=Te.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Te.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;WR("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new nl(s)}var WR=(n,...t)=>{Eu()&&typeof console<"u"&&console[n](...t)},KR={provide:nl,useFactory:Ms,deps:[$r,V,[new qo,Gr]]},YV=(()=>{class n{static initializeApp(e,i){return{ngModule:n,providers:[{provide:$r,useValue:e},{provide:Gr,useValue:i}]}}constructor(e){Te.registerVersion("angularfire",Ps.full,"core"),Te.registerVersion("angularfire",Ps.full,"app-compat"),Te.registerVersion("angular",H_.full,e.toString())}static \u0275fac=function(i){return new(i||n)(p(xe))};static \u0275mod=G({type:n});static \u0275inj=$({providers:[KR]})}return n})();function il(n,t,e,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return QR(r,s)||(Wy("error",`${t} was already initialized on the ${e} Firebase App with different settings.${YR?" You may need to reload as Firebase is not HMR aware.":""}`),Wy("warn",{is:r,was:s})),o;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function QR(n,t){try{return n.toString()===t.toString()}catch{return n===t}}var YR=typeof module<"u"&&!!module.hot,Wy=(n,...t)=>{Eu()&&typeof console<"u"&&console[n](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var Qy=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,i=!0,r){this._multiple=t,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new q,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(i=>this._markSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(i=>this._unmarkSelected(i));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,i=new Set(t);t.forEach(o=>this._markSelected(o)),e.filter(o=>!i.has(this._getConcreteValue(o,i))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let i of e)if(this.compareWith(t,i))return i;return t}else return t}};var XR=20,Xy=(()=>{let t=class t{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new q,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=XR){return this._platform.isBrowser?new me(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(du(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):N()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(yt(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Ve(r),s=i.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return lu(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(p(V),p(st),p(Y,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var ZR=20,cf=(()=>{let t=class t{constructor(i,r,o){this._platform=i,this._change=new q,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),a=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,c=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:a,left:c}}change(i=ZR){return i>0?this._change.pipe(du(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};t.\u0275fac=function(r){return new(r||t)(p(st),p(V),p(Y,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Yy=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})(),lf=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({imports:[Xn,Yy,Xn,Yy]});let n=t;return n})();var Ns=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},df=class extends Ns{constructor(t,e,i,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Os=class extends Ns{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},uf=class extends Ns{constructor(t){super(),this.element=t instanceof J?t.nativeElement:t}},rl=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof df)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Os)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof uf)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var ol=class extends rl{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){let i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||zn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);r!==-1&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var pL=(()=>{let t=class t extends rl{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new lt,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(c,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};t.\u0275fac=function(r){return new(r||t)(E(tc),E(Ti),E(Y))},t.\u0275dir=Q({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[M.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ne]});let n=t;return n})();var Zy=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({});let n=t;return n})();var Jy=Tv(),hf=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Rt(-this._previousScrollPosition.left),t.style.top=Rt(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,i=t.style,r=e.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Jy&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Jy&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}};var ff=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(yt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},sl=class{enable(){}disable(){}attach(){}};function mf(n,t){return t.some(e=>{let i=n.bottom<e.top,r=n.top>e.bottom,o=n.right<e.left,s=n.left>e.right;return i||r||o||s})}function t0(n,t){return t.some(e=>{let i=n.top<e.top,r=n.bottom>e.bottom,o=n.left<e.left,s=n.right>e.right;return i||r||o||s})}var pf=class{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();mf(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},ek=(()=>{let t=class t{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new sl,this.close=a=>new ff(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new hf(this._viewportRuler,this._document),this.reposition=a=>new pf(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}};t.\u0275fac=function(r){return new(r||t)(p(Xy),p(cf),p(V),p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),al=class{constructor(t){if(this.scrollStrategy=new sl,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let i of e)t[i]!==void 0&&(this[i]=t[i])}}};var gf=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var o0=(()=>{let t=class t{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};t.\u0275fac=function(r){return new(r||t)(p(Y))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),nk=(()=>{let t=class t extends o0{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){let c=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>c.next(o)):c.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};t.\u0275fac=function(r){return new(r||t)(p(Y),p(V,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),ik=(()=>{let t=class t extends o0{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=He(s)},this._clickListener=s=>{let a=He(s),c=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let d=l.length-1;d>-1;d--){let u=l[d];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(a)||u.overlayElement.contains(c))break;let h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};t.\u0275fac=function(r){return new(r||t)(p(Y),p(st),p(V,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),s0=(()=>{let t=class t{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Is()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(i),Is()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};t.\u0275fac=function(r){return new(r||t)(p(Y),p(st))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),_f=class{constructor(t,e,i,r,o,s,a,c,l,d=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new q,this._attachments=new q,this._detachments=new q,this._locationChanges=fe.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new q,this._outsidePointerEvents=new q,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(ke(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=I(I({},this._config),t),this._updateElementSize()}setDirection(t){this._config=ot(I({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=Rt(this._config.width),t.height=Rt(this._config.height),t.minWidth=Rt(this._config.minWidth),t.minHeight=Rt(this._config.minHeight),t.maxWidth=Rt(this._config.maxWidth),t.maxHeight=Rt(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){let r=jr(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(ae(br(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},e0="cdk-overlay-connected-position-bounding-box",rk=/([A-Za-z%]+)$/,bf=class{get positions(){return this._preferredPositions}constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new q,this._resizeSubscription=fe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(e0),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),l=this._getOverlayPoint(c,e,a),d=this._getOverlayFit(l,e,i,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,i)){o.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:e})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Li(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(e0),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r;if(i.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=i.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return i.originY=="center"?o=t.top+t.height/2:o=i.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r;i.overlayX=="center"?r=-e.width/2:i.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return i.overlayY=="center"?o=-e.height/2:o=i.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){let o=i0(e),{x:s,y:a}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let d=0-s,u=s+o.width-i.width,h=0-a,f=a+o.height-i.height,y=this._subtractOverflows(o.width,d,u),b=this._subtractOverflows(o.height,h,f),w=y*b;return{visibleArea:w,isCompletelyWithinViewport:o.width*o.height===w,fitsInViewportVertically:b===o.height,fitsInViewportHorizontally:y==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){let r=i.bottom-e.y,o=i.right-e.x,s=n0(this._overlayRef.getConfig().minHeight),a=n0(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=r,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=i0(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-i.top-t.y,0),l=Math.max(o.left-i.left-t.x,0),d=0,u=0;return r.width<=o.width?d=l||-s:d=t.x<this._viewportMargin?o.left-i.left-t.x:0,r.height<=o.height?u=c||-a:u=t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){let i=this._getScrollVisibility(),r=new gf(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=t.overlayY;t.overlayX==="center"?i="center":this._isRtl()?i=t.overlayX==="start"?"right":"left":i=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){let i=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=t.y,o=i.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=i.height-t.y+this._viewportMargin*2,o=i.height-a+this._viewportMargin;else{let f=Math.min(i.bottom-t.y+i.top,t.y),y=this._lastBoundingBoxSize.height;o=f*2,s=t.y-f,o>y&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-y/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,l=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,d,u,h;if(l)h=i.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if(c)u=t.x,d=i.right-t.x;else{let f=Math.min(i.right-t.x+i.left,t.x),y=this._lastBoundingBoxSize.width;d=f*2,u=t.x-f,d>y&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-y/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(t,e){let i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=Rt(i.height),r.top=Rt(i.top),r.bottom=Rt(i.bottom),r.width=Rt(i.width),r.left=Rt(i.left),r.right=Rt(i.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Rt(o)),s&&(r.maxWidth=Rt(s))}this._lastBoundingBoxSize=i,Li(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Li(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Li(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();Li(i,this._getExactOverlayY(e,t,d)),Li(i,this._getExactOverlayX(e,t,d))}else i.position="static";let a="",c=this._getOffset(e,"x"),l=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),i.transform=a.trim(),s.maxHeight&&(r?i.maxHeight=Rt(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=Rt(s.maxWidth):o&&(i.maxWidth="")),Li(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=Rt(o.y);return r}_getExactOverlayX(t,e,i){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=Rt(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:t0(t,i),isOriginOutsideView:mf(t,i),isOverlayClipped:t0(e,i),isOverlayOutsideView:mf(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&jr(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof J)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}};function Li(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function n0(n){if(typeof n!="number"&&n!=null){let[t,e]=n.split(rk);return!e||e==="px"?parseFloat(t):null}return n||null}function i0(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}var r0="cdk-global-overlay-wrapper",vf=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(r0),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=i,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",f="",y="",b="";c?b="flex-start":d==="center"?(b="center",h?y=u:f=u):h?d==="left"||d==="end"?(b="flex-end",f=u):(d==="right"||d==="start")&&(b="flex-start",y=u):d==="left"||d==="start"?(b="flex-start",f=u):(d==="right"||d==="end")&&(b="flex-end",y=u),t.position=this._cssPosition,t.marginLeft=c?"0":f,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":y,e.justifyContent=b,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(r0),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},ok=(()=>{let t=class t{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new vf}flexibleConnectedTo(i){return new bf(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};t.\u0275fac=function(r){return new(r||t)(p(cf),p(Y),p(st),p(s0))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),sk=0,cl=(()=>{let t=class t{constructor(i,r,o,s,a,c,l,d,u,h,f,y){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=c,this._ngZone=l,this._document=d,this._directionality=u,this._location=h,this._outsideClickDispatcher=f,this._animationsModuleType=y}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),a=new al(i);return a.direction=a.direction||this._directionality.value,new _f(s,r,o,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${sk++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Ko)),new ol(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};t.\u0275fac=function(r){return new(r||t)(p(ek),p(s0),p(tc),p(ok),p(nk),p(zn),p(V),p(Y),p(Ts),p(Ci),p(ik),p($e,8))},t.\u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),ak=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],a0=new k("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let n=D(cl);return()=>n.scrollStrategies.reposition()}}),ck=(()=>{let t=class t{constructor(i){this.elementRef=i}};t.\u0275fac=function(r){return new(r||t)(E(J))},t.\u0275dir=Q({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0});let n=t;return n})(),NL=(()=>{let t=class t{get offsetX(){return this._offsetX}set offsetX(i){this._offsetX=i,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(i){this._offsetY=i,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(i){this._disposeOnNavigation=i}constructor(i,r,o,s,a){this._overlay=i,this._dir=a,this._backdropSubscription=fe.EMPTY,this._attachSubscription=fe.EMPTY,this._detachSubscription=fe.EMPTY,this._positionSubscription=fe.EMPTY,this._disposeOnNavigation=!1,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new lt,this.positionChange=new lt,this.attach=new lt,this.detach=new lt,this.overlayKeydown=new lt,this.overlayOutsideClick=new lt,this._templatePortal=new Os(r,o),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(i){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),i.origin&&this.open&&this._position.apply()),i.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ak);let i=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=i.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=i.detachments().subscribe(()=>this.detach.emit()),i.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),r.keyCode===27&&!this.disableClose&&!Lr(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){let i=this._position=this.positionStrategy||this._createPositionStrategy(),r=new al({direction:this._dir,positionStrategy:i,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(r.width=this.width),(this.height||this.height===0)&&(r.height=this.height),(this.minWidth||this.minWidth===0)&&(r.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(i){let r=this.positions.map(o=>({originX:o.originX,originY:o.originY,overlayX:o.overlayX,overlayY:o.overlayY,offsetX:o.offsetX||this.offsetX,offsetY:o.offsetY||this.offsetY,panelClass:o.panelClass||void 0}));return i.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let i=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(i),i}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof ck?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(i=>{this.backdropClick.emit(i)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(A_(()=>this.positionChange.observers.length>0)).subscribe(i=>{this.positionChange.emit(i),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}};t.\u0275fac=function(r){return new(r||t)(E(cl),E(ic),E(Ti),E(a0),E(Ts,8))},t.\u0275dir=Q({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[M.None,"cdkConnectedOverlayOrigin","origin"],positions:[M.None,"cdkConnectedOverlayPositions","positions"],positionStrategy:[M.None,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[M.None,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[M.None,"cdkConnectedOverlayOffsetY","offsetY"],width:[M.None,"cdkConnectedOverlayWidth","width"],height:[M.None,"cdkConnectedOverlayHeight","height"],minWidth:[M.None,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[M.None,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[M.None,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[M.None,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[M.None,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[M.None,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[M.None,"cdkConnectedOverlayOpen","open"],disableClose:[M.None,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[M.None,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[M.HasDecoratorInputTransform,"cdkConnectedOverlayHasBackdrop","hasBackdrop",_t],lockPosition:[M.HasDecoratorInputTransform,"cdkConnectedOverlayLockPosition","lockPosition",_t],flexibleDimensions:[M.HasDecoratorInputTransform,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",_t],growAfterOpen:[M.HasDecoratorInputTransform,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",_t],push:[M.HasDecoratorInputTransform,"cdkConnectedOverlayPush","push",_t],disposeOnNavigation:[M.HasDecoratorInputTransform,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",_t]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Ee,ge]});let n=t;return n})();function lk(n){return()=>n.scrollStrategies.reposition()}var dk={provide:a0,deps:[cl],useFactory:lk},OL=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=G({type:t}),t.\u0275inj=$({providers:[cl,dk],imports:[Xn,Zy,lf,lf]});let n=t;return n})();var fk=new Map,mk={activated:!1,tokenObservers:[]},pk={initialized:!1,enabled:!1};function We(n){return fk.get(n)||Object.assign({},mk)}function h0(){return pk}var gk="https://content-firebaseappcheck.googleapis.com/v1";var _k="exchangeDebugToken",c0={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},HL=24*60*60*1e3;var wf=class{constructor(t,e,i,r,o){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return _(this,null,function*(){this.stop();try{this.pending=new Iu,this.pending.promise.catch(e=>{}),yield bk(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new Iu,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function bk(n){return new Promise(t=>{setTimeout(t,n)})}var vk={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jn=new pb("appCheck","AppCheck",vk);function f0(n){if(!We(n).activated)throw Jn.create("use-before-activation",{appName:n.name})}function m0(i,r){return _(this,arguments,function*({url:n,body:t},e){let o={"Content-Type":"application/json"},s=e.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(t),headers:o},c;try{c=yield fetch(n,a)}catch(f){throw Jn.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Jn.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw Jn.create("fetch-parse-error",{originalErrorMessage:f?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Jn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function p0(n,t){let{projectId:e,appId:i,apiKey:r}=n.options;return{url:`${gk}/projects/${e}/apps/${i}:${_k}?key=${r}`,body:{debug_token:t}}}var yk="firebase-app-check-database",wk=1,xf="firebase-app-check-store";var ll=null;function xk(){return ll||(ll=new Promise((n,t)=>{try{let e=indexedDB.open(yk,wk);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Jn.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(xf,{keyPath:"compositeKey"})}}}catch(e){t(Jn.create("storage-open",{originalErrorMessage:e?.message}))}}),ll)}function Ek(n,t){return Ik(Tk(n),t)}function Ik(n,t){return _(this,null,function*(){let i=(yield xk()).transaction(xf,"readwrite"),o=i.objectStore(xf).put({compositeKey:n,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},i.onerror=c=>{var l;a(Jn.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Tk(n){return`${n.options.appId}-${n.name}`}var Ef=new uc("@firebase/app-check");function yf(n,t){return dc()?Ek(n,t).catch(e=>{Ef.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function g0(){return h0().enabled}function _0(){return _(this,null,function*(){let n=h0();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Ak={error:"UNKNOWN_ERROR"};function Ck(n){return hb.encodeString(JSON.stringify(n),!1)}function If(n,t=!1){return _(this,null,function*(){let e=n.app;f0(e);let i=We(e),r=i.token,o;if(r&&!Fs(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(Fs(c)?r=c:yield yf(e,void 0))}if(!t&&r&&Fs(r))return{token:r.token};let s=!1;if(g0()){i.exchangeTokenPromise||(i.exchangeTokenPromise=m0(p0(e,yield _0()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let c=yield i.exchangeTokenPromise;return yield yf(e,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield We(e).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Ef.warn(c.message):Ef.error(c),o=c}let a;return r?o?Fs(r)?a={token:r.token,internalError:o}:a=d0(o):(a={token:r.token},i.token=r,yield yf(e,r)):a=d0(o),s&&kk(e,a),a})}function Sk(n){return _(this,null,function*(){let t=n.app;f0(t);let{provider:e}=We(t);if(g0()){let i=yield _0(),{token:r}=yield m0(p0(t,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield e.getToken();return{token:i}}})}function Dk(n,t,e,i){let{app:r}=n,o=We(r),s={next:e,error:i,type:t};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Fs(o.token)){let a=o.token;Promise.resolve().then(()=>{e({token:a.token}),l0(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>l0(n))}function b0(n,t){let e=We(n),i=e.tokenObservers.filter(r=>r.next!==t);i.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function l0(n){let{app:t}=n,e=We(t),i=e.tokenRefresher;i||(i=Rk(n),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Rk(n){let{app:t}=n;return new wf(()=>_(this,null,function*(){let e=We(t),i;if(e.token?i=yield If(n,!0):i=yield If(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let e=We(t);if(e.token){let i=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},c0.RETRIAL_MIN_WAIT,c0.RETRIAL_MAX_WAIT)}function kk(n,t){let e=We(n).tokenObservers;for(let i of e)try{i.type==="EXTERNAL"&&t.error!=null?i.error(t.error):i.next(t)}catch{}}function Fs(n){return n.expireTimeMillis-Date.now()>0}function d0(n){return{token:Ck(Ak),error:n}}var Tf=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=We(this.app);for(let e of t)b0(this.app,e.next);return Promise.resolve()}};function Pk(n,t){return new Tf(n,t)}function Mk(n){return{getToken:t=>If(n,t),getLimitedUseToken:()=>Sk(n),addTokenListener:t=>Dk(n,"INTERNAL",t),removeTokenListener:t=>b0(n.app,t)}}var Nk="@firebase/app-check",Ok="0.8.2";var Fk="app-check",u0="app-check-internal";function Vk(){Xo(new Di(Fk,n=>{let t=n.getProvider("app").getImmediate(),e=n.getProvider("heartbeat");return Pk(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(u0).initialize()})),Xo(new Di(u0,n=>{let t=n.getProvider("app-check").getImmediate();return Mk(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),qn(Nk,Ok)}Vk();var Lk=["localhost","0.0.0.0","127.0.0.1"],r2=typeof window<"u"&&Lk.includes(window.location.hostname);var Af=new k("angularfire2.auth.use-emulator"),Cf=new k("angularfire2.auth.settings"),Sf=new k("angularfire2.auth.tenant-id"),Df=new k("angularfire2.auth.langugage-code"),Rf=new k("angularfire2.auth.use-device-language"),kf=new k("angularfire.auth.persistence"),Pf=(n,t,e,i,r,o,s,a)=>il(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=t.runOutsideAngular(()=>n.auth());if(e&&c.useEmulator(...e),i&&(c.tenantId=i),c.languageCode=r,o&&c.useDeviceLanguage(),s)for(let[l,d]of Object.entries(s))c.settings[l]=d;return a&&c.setPersistence(a),c},[e,i,r,o,s,a]),y0=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(e,i,r,o,s,a,c,l,d,u,h,f){let y=new q,b=N(void 0).pipe(wi(s.outsideAngular),Ot(()=>o.runOutsideAngular(()=>import("./chunk-OFXTXZIW.js"))),j(()=>Ms(e,o,i)),j(w=>Pf(w,o,a,l,d,u,c,h)),wr({bufferSize:1,refCount:!1}));if(Si(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=N(null);else{b.pipe(en()).subscribe();let w=b.pipe(Ot(P=>P.getRedirectResult().then(K=>K,()=>null)),ve,wr({bufferSize:1,refCount:!1})),O=b.pipe(Ot(P=>new me(K=>({unsubscribe:o.runOutsideAngular(()=>P.onAuthStateChanged(X=>K.next(X),X=>K.error(X),()=>K.complete()))})))),B=b.pipe(Ot(P=>new me(K=>({unsubscribe:o.runOutsideAngular(()=>P.onIdTokenChanged(X=>K.next(X),X=>K.error(X),()=>K.complete()))}))));this.authState=w.pipe(fu(O),gr(s.outsideAngular),wi(s.insideAngular)),this.user=w.pipe(fu(B),gr(s.outsideAngular),wi(s.insideAngular)),this.idToken=this.user.pipe(Ot(P=>P?pt(P.getIdToken()):N(null))),this.idTokenResult=this.user.pipe(Ot(P=>P?pt(P.getIdTokenResult()):N(null))),this.credential=br(w,y,this.authState.pipe(yt(P=>!P))).pipe(j(P=>P?.user?P:null),gr(s.outsideAngular),wi(s.insideAngular))}return Ky(this,b,o,{spy:{apply:(w,O,B)=>{(w.startsWith("signIn")||w.startsWith("createUser"))&&B.then(P=>y.next(P))}}})}static \u0275fac=function(i){return new(i||n)(p($r),p(Gr,8),p(xe),p(V),p(el),p(Af,8),p(Cf,8),p(Sf,8),p(Df,8),p(Rf,8),p(kf,8),p(Vi,8))};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Bk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qe={},A,tm=tm||{},U=Bk||self;function El(n){var t=typeof n;return t=t!="object"?t:n?Array.isArray(n)?"array":t:"null",t=="array"||t=="object"&&typeof n.length=="number"}function Ys(n){var t=typeof n;return t=="object"&&n!=null||t=="function"}function Uk(n){return Object.prototype.hasOwnProperty.call(n,Mf)&&n[Mf]||(n[Mf]=++zk)}var Mf="closure_uid_"+(1e9*Math.random()>>>0),zk=0;function qk(n,t,e){return n.call.apply(n.bind,arguments)}function $k(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function ie(n,t,e){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ie=qk:ie=$k,ie.apply(null,arguments)}function dl(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Qt(n,t){function e(){}e.prototype=t.prototype,n.$=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.ac=function(i,r,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return t.prototype[r].apply(i,s)}}function ti(){this.s=this.s,this.o=this.o}var Gk=0;ti.prototype.s=!1;ti.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Gk!=0)&&Uk(this)};ti.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var M0=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if(typeof n=="string")return typeof t!="string"||t.length!=1?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1};function em(n){let t=n.length;if(0<t){let e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function w0(n,t){for(let e=1;e<arguments.length;e++){let i=arguments[e];if(El(i)){let r=n.length||0,o=i.length||0;n.length=r+o;for(let s=0;s<o;s++)n[r+s]=i[s]}else n.push(i)}}function re(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}re.prototype.h=function(){this.defaultPrevented=!0};var Hk=function(){if(!U.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let e=()=>{};U.addEventListener("test",e,t),U.removeEventListener("test",e,t)}catch{}return n}();function zs(n){return/^[\s\xa0]*$/.test(n)}function Il(){var n=U.navigator;return n&&(n=n.userAgent)?n:""}function cn(n){return Il().indexOf(n)!=-1}function nm(n){return nm[" "](n),n}nm[" "]=function(){};function Wk(n,t){var e=OP;return Object.prototype.hasOwnProperty.call(e,n)?e[n]:e[n]=t(n)}var Kk=cn("Opera"),Qr=cn("Trident")||cn("MSIE"),N0=cn("Edge"),Lf=N0||Qr,O0=cn("Gecko")&&!(Il().toLowerCase().indexOf("webkit")!=-1&&!cn("Edge"))&&!(cn("Trident")||cn("MSIE"))&&!cn("Edge"),Qk=Il().toLowerCase().indexOf("webkit")!=-1&&!cn("Edge");function F0(){var n=U.document;return n?n.documentMode:void 0}var jf;t:{if(ul="",hl=function(){var n=Il();if(O0)return/rv:([^\);]+)(\)|;)/.exec(n);if(N0)return/Edge\/([\d\.]+)/.exec(n);if(Qr)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Qk)return/WebKit\/(\S+)/.exec(n);if(Kk)return/(?:Version)[ \/]?(\S+)/.exec(n)}(),hl&&(ul=hl?hl[1]:""),Qr&&(fl=F0(),fl!=null&&fl>parseFloat(ul))){jf=String(fl);break t}jf=ul}var ul,hl,fl,Bf;U.document&&Qr?(Nf=F0(),Bf=Nf||parseInt(jf,10)||void 0):Bf=void 0;var Nf,Yk=Bf;function qs(n,t){if(re.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(O0){t:{try{nm(t.nodeName);var r=!0;break t}catch{}r=!1}r||(t=null)}}else e=="mouseover"?t=n.fromElement:e=="mouseout"&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:Xk[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qs.$.h.call(this)}}Qt(qs,re);var Xk={2:"touch",3:"pen",4:"mouse"};qs.prototype.h=function(){qs.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Xs="closure_listenable_"+(1e6*Math.random()|0),Zk=0;function Jk(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.la=r,this.key=++Zk,this.fa=this.ia=!1}function Tl(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function im(n,t,e){for(let i in n)t.call(e,n[i],i,n)}function tP(n,t){for(let e in n)t.call(void 0,n[e],e,n)}function V0(n){let t={};for(let e in n)t[e]=n[e];return t}var x0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L0(n,t){let e,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(e in i)n[e]=i[e];for(let o=0;o<x0.length;o++)e=x0[o],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Al(n){this.src=n,this.g={},this.h=0}Al.prototype.add=function(n,t,e,i,r){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var s=zf(n,t,i,r);return-1<s?(t=n[s],e||(t.ia=!1)):(t=new Jk(t,this.src,o,!!i,r),t.ia=e,n.push(t)),t};function Uf(n,t){var e=t.type;if(e in n.g){var i=n.g[e],r=M0(i,t),o;(o=0<=r)&&Array.prototype.splice.call(i,r,1),o&&(Tl(t),n.g[e].length==0&&(delete n.g[e],n.h--))}}function zf(n,t,e,i){for(var r=0;r<n.length;++r){var o=n[r];if(!o.fa&&o.listener==t&&o.capture==!!e&&o.la==i)return r}return-1}var rm="closure_lm_"+(1e6*Math.random()|0),Of={};function j0(n,t,e,i,r){if(i&&i.once)return U0(n,t,e,i,r);if(Array.isArray(t)){for(var o=0;o<t.length;o++)j0(n,t[o],e,i,r);return null}return e=am(e),n&&n[Xs]?n.O(t,e,Ys(i)?!!i.capture:!!i,r):B0(n,t,e,!1,i,r)}function B0(n,t,e,i,r,o){if(!t)throw Error("Invalid event type");var s=Ys(r)?!!r.capture:!!r,a=sm(n);if(a||(n[rm]=a=new Al(n)),e=a.add(t,e,i,s,o),e.proxy)return e;if(i=eP(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)Hk||(r=s),r===void 0&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(q0(t.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return e}function eP(){function n(e){return t.call(n.src,n.listener,e)}let t=nP;return n}function U0(n,t,e,i,r){if(Array.isArray(t)){for(var o=0;o<t.length;o++)U0(n,t[o],e,i,r);return null}return e=am(e),n&&n[Xs]?n.P(t,e,Ys(i)?!!i.capture:!!i,r):B0(n,t,e,!0,i,r)}function z0(n,t,e,i,r){if(Array.isArray(t))for(var o=0;o<t.length;o++)z0(n,t[o],e,i,r);else i=Ys(i)?!!i.capture:!!i,e=am(e),n&&n[Xs]?(n=n.i,t=String(t).toString(),t in n.g&&(o=n.g[t],e=zf(o,e,i,r),-1<e&&(Tl(o[e]),Array.prototype.splice.call(o,e,1),o.length==0&&(delete n.g[t],n.h--)))):n&&(n=sm(n))&&(t=n.g[t.toString()],n=-1,t&&(n=zf(t,e,i,r)),(e=-1<n?t[n]:null)&&om(e))}function om(n){if(typeof n!="number"&&n&&!n.fa){var t=n.src;if(t&&t[Xs])Uf(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(q0(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=sm(t))?(Uf(e,n),e.h==0&&(e.src=null,t[rm]=null)):Tl(n)}}}function q0(n){return n in Of?Of[n]:Of[n]="on"+n}function nP(n,t){if(n.fa)n=!0;else{t=new qs(t,this);var e=n.listener,i=n.la||n.src;n.ia&&om(n),n=e.call(i,t)}return n}function sm(n){return n=n[rm],n instanceof Al?n:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function am(n){return typeof n=="function"?n:(n[Ff]||(n[Ff]=function(t){return n.handleEvent(t)}),n[Ff])}function Kt(){ti.call(this),this.i=new Al(this),this.S=this,this.J=null}Qt(Kt,ti);Kt.prototype[Xs]=!0;Kt.prototype.removeEventListener=function(n,t,e,i){z0(this,n,t,e,i)};function te(n,t){var e,i=n.J;if(i)for(e=[];i;i=i.J)e.push(i);if(n=n.S,i=t.type||t,typeof t=="string")t=new re(t,n);else if(t instanceof re)t.target=t.target||n;else{var r=t;t=new re(i,n),L0(t,r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.g=e[o];r=ml(s,i,!0,t)&&r}if(s=t.g=n,r=ml(s,i,!0,t)&&r,r=ml(s,i,!1,t)&&r,e)for(o=0;o<e.length;o++)s=t.g=e[o],r=ml(s,i,!1,t)&&r}Kt.prototype.N=function(){if(Kt.$.N.call(this),this.i){var n=this.i,t;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)Tl(e[i]);delete n.g[t],n.h--}}this.J=null};Kt.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)};Kt.prototype.P=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};function ml(n,t,e,i){if(t=n.i.g[String(t)],!t)return!0;t=t.concat();for(var r=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==e){var a=s.listener,c=s.la||s.src;s.ia&&Uf(n.i,s),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var cm=U.JSON.stringify,qf=class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}};function iP(){var n=lm;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var $f=class{constructor(){this.h=this.g=null}add(t,e){let i=$0.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}},$0=new qf(()=>new Gf,n=>n.reset()),Gf=class{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}};function rP(n){var t=1;n=n.split(":");let e=[];for(;0<t&&n.length;)e.push(n.shift()),t--;return n.length&&e.push(n.join(":")),e}function oP(n){U.setTimeout(()=>{throw n},0)}var $s,Gs=!1,lm=new $f,G0=()=>{let n=U.Promise.resolve(void 0);$s=()=>{n.then(sP)}},sP=()=>{for(var n;n=iP();){try{n.h.call(n.g)}catch(e){oP(e)}var t=$0;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Gs=!1};function Cl(n,t){Kt.call(this),this.h=n||1,this.g=t||U,this.j=ie(this.qb,this),this.l=Date.now()}Qt(Cl,Kt);A=Cl.prototype;A.ga=!1;A.T=null;A.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),te(this,"tick"),this.ga&&(dm(this),this.start()))}};A.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function dm(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}A.N=function(){Cl.$.N.call(this),dm(this),delete this.g};function um(n,t,e){if(typeof n=="function")e&&(n=ie(n,e));else if(n&&typeof n.handleEvent=="function")n=ie(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:U.setTimeout(n,t||0)}function H0(n){n.g=um(()=>{n.g=null,n.i&&(n.i=!1,H0(n))},n.j);let t=n.h;n.h=null,n.m.apply(null,t)}var Hf=class extends ti{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:H0(this)}N(){super.N(),this.g&&(U.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Hs(n){ti.call(this),this.h=n,this.g={}}Qt(Hs,ti);var E0=[];function W0(n,t,e,i){Array.isArray(e)||(e&&(E0[0]=e.toString()),e=E0);for(var r=0;r<e.length;r++){var o=j0(t,e[r],i||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function K0(n){im(n.g,function(t,e){this.g.hasOwnProperty(e)&&om(t)},n),n.g={}}Hs.prototype.N=function(){Hs.$.N.call(this),K0(this)};Hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Sl(){this.g=!0}Sl.prototype.Ea=function(){this.g=!1};function aP(n,t,e,i,r,o){n.info(function(){if(n.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var d=l[0];l=l[1];var u=d.split("_");s=2<=u.length&&u[1]=="type"?s+(d+"="+l+"&"):s+(d+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+`
`+e+`
`+s})}function cP(n,t,e,i,r,o,s){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+`
`+e+`
`+o+" "+s})}function Wr(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+dP(n,e)+(i?" "+i:"")})}function lP(n,t){n.info(function(){return"TIMEOUT: "+t})}Sl.prototype.info=function(){};function dP(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e){for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var o=r[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<r.length;s++)r[s]=""}}}}return cm(e)}catch{return t}}var zi={},I0=null;function Dl(){return I0=I0||new Kt}zi.Ta="serverreachability";function Q0(n){re.call(this,zi.Ta,n)}Qt(Q0,re);function Ws(n){let t=Dl();te(t,new Q0(t))}zi.STAT_EVENT="statevent";function Y0(n,t){re.call(this,zi.STAT_EVENT,n),this.stat=t}Qt(Y0,re);function le(n){let t=Dl();te(t,new Y0(t,n))}zi.Ua="timingevent";function X0(n,t){re.call(this,zi.Ua,n),this.size=t}Qt(X0,re);function Zs(n,t){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return U.setTimeout(function(){n()},t)}var Rl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Z0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function hm(){}hm.prototype.h=null;function T0(n){return n.h||(n.h=n.i())}function J0(){}var Js={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fm(){re.call(this,"d")}Qt(fm,re);function mm(){re.call(this,"c")}Qt(mm,re);var Wf;function kl(){}Qt(kl,hm);kl.prototype.g=function(){return new XMLHttpRequest};kl.prototype.i=function(){return{}};Wf=new kl;function ta(n,t,e,i){this.l=n,this.j=t,this.m=e,this.W=i||1,this.U=new Hs(this),this.P=uP,n=Lf?125:void 0,this.V=new Cl(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tw}function tw(){this.i=null,this.g="",this.h=!1}var uP=45e3,ew={},Kf={};A=ta.prototype;A.setTimeout=function(n){this.P=n};function Qf(n,t,e){n.L=1,n.A=Ml(Dn(t)),n.u=e,n.S=!0,nw(n,null)}function nw(n,t){n.G=Date.now(),ea(n),n.B=Dn(n.A);var e=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),dw(e.i,"t",i),n.o=0,e=n.l.J,n.h=new tw,n.g=kw(n.l,e?t:null,!n.u),0<n.O&&(n.M=new Hf(ie(n.Pa,n,n.g),n.O)),W0(n.U,n.g,"readystatechange",n.nb),t=n.I?V0(n.I):{},n.u?(n.v||(n.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,t)):(n.v="GET",n.g.ha(n.B,n.v,null,t)),Ws(),aP(n.j,n.v,n.B,n.m,n.W,n.u)}A.nb=function(n){n=n.target;let t=this.M;t&&ln(n)==3?t.l():this.Pa(n)};A.Pa=function(n){try{if(n==this.g)t:{let d=ln(this.g);var t=this.g.Ia();let u=this.g.da();if(!(3>d)&&(d!=3||Lf||this.g&&(this.h.h||this.g.ja()||D0(this.g)))){this.J||d!=4||t==7||(t==8||0>=u?Ws(3):Ws(2)),Pl(this);var e=this.g.da();this.ca=e;e:if(iw(this)){var i=D0(this.g);n="";var r=i.length,o=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ji(this),Us(this);var s="";break e}this.h.i=new U.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:o&&t==r-1});i.length=0,this.h.g+=n,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=e==200,cP(this.j,this.v,this.B,this.m,this.W,d,e),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zs(a)){var l=a;break e}}l=null}if(e=l)Wr(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Yf(this,e);else{this.i=!1,this.s=3,le(12),ji(this),Us(this);break t}}this.S?(rw(this,d,s),Lf&&this.i&&d==3&&(W0(this.U,this.V,"tick",this.mb),this.V.start())):(Wr(this.j,this.m,s,null),Yf(this,s)),d==4&&ji(this),this.i&&!this.J&&(d==4?Cw(this.l,this):(this.i=!1,ea(this)))}else PP(this.g),e==400&&0<s.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),ji(this),Us(this)}}}catch{}finally{}};function iw(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function rw(n,t,e){let i=!0,r;for(;!n.J&&n.o<e.length;)if(r=hP(n,e),r==Kf){t==4&&(n.s=4,le(14),i=!1),Wr(n.j,n.m,null,"[Incomplete Response]");break}else if(r==ew){n.s=4,le(15),Wr(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}else Wr(n.j,n.m,r,null),Yf(n,r);iw(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),t!=4||e.length!=0||n.h.h||(n.s=1,le(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.ba&&(n.ba=!0,t=n.l,t.g==n&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+e.length),ym(t),t.M=!0,le(11))):(Wr(n.j,n.m,e,"[Invalid Chunked Response]"),ji(n),Us(n))}A.mb=function(){if(this.g){var n=ln(this.g),t=this.g.ja();this.o<t.length&&(Pl(this),rw(this,n,t),this.i&&n!=4&&ea(this))}};function hP(n,t){var e=n.o,i=t.indexOf(`
`,e);return i==-1?Kf:(e=Number(t.substring(e,i)),isNaN(e)?ew:(i+=1,i+e>t.length?Kf:(t=t.slice(i,i+e),n.o=i+e,t)))}A.cancel=function(){this.J=!0,ji(this)};function ea(n){n.Y=Date.now()+n.P,ow(n,n.P)}function ow(n,t){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Zs(ie(n.lb,n),t)}function Pl(n){n.C&&(U.clearTimeout(n.C),n.C=null)}A.lb=function(){this.C=null;let n=Date.now();0<=n-this.Y?(lP(this.j,this.B),this.L!=2&&(Ws(),le(17)),ji(this),this.s=2,Us(this)):ow(this,this.Y-n)};function Us(n){n.l.H==0||n.J||Cw(n.l,n)}function ji(n){Pl(n);var t=n.M;t&&typeof t.sa=="function"&&t.sa(),n.M=null,dm(n.V),K0(n.U),n.g&&(t=n.g,n.g=null,t.abort(),t.sa())}function Yf(n,t){try{var e=n.l;if(e.H!=0&&(e.g==n||Xf(e.i,n))){if(!n.K&&Xf(e.i,n)&&e.H==3){try{var i=e.Ja.g.parse(t)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){t:if(!e.u){if(e.g)if(e.g.G+3e3<n.G)vl(e),Fl(e);else break t;vm(e),le(18)}}else e.Fa=r[1],0<e.Fa-e.V&&37500>r[2]&&e.G&&e.A==0&&!e.v&&(e.v=Zs(ie(e.ib,e),6e3));if(1>=fw(e.i)&&e.oa){try{e.oa()}catch{}e.oa=void 0}}else Bi(e,11)}else if((n.K||e.g==n)&&vl(e),!zs(t))for(r=e.Ja.g.parse(t),t=0;t<r.length;t++){let l=r[t];if(e.V=l[0],l=l[1],e.H==2)if(l[0]=="c"){e.K=l[1],e.pa=l[2];let d=l[3];d!=null&&(e.ra=d,e.l.info("VER="+e.ra));let u=l[4];u!=null&&(e.Ga=u,e.l.info("SVER="+e.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,e.L=i,e.l.info("backChannelRequestTimeoutMs_="+i)),i=e;let f=n.g;if(f){let y=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var o=i.i;o.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(pm(o,o.h),o.h=null))}if(i.F){let b=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;b&&(i.Da=b,ft(i.I,i.F,b))}}e.H=3,e.h&&e.h.Ba(),e.ca&&(e.S=Date.now()-n.G,e.l.info("Handshake RTT: "+e.S+"ms")),i=e;var s=n;if(i.wa=Rw(i,i.J?i.pa:null,i.Y),s.K){mw(i.i,s);var a=s,c=i.L;c&&a.setTimeout(c),a.C&&(Pl(a),ea(a)),i.g=s}else Tw(i);0<e.j.length&&Vl(e)}else l[0]!="stop"&&l[0]!="close"||Bi(e,7);else e.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?Bi(e,7):bm(e):l[0]!="noop"&&e.h&&e.h.Aa(l),e.A=0)}}Ws(4)}catch{}}function fP(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(El(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}t=[],e=0;for(i in n)t[e++]=n[i];return t}function mP(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(El(n)||typeof n=="string"){var t=[];n=n.length;for(var e=0;e<n;e++)t.push(e);return t}t=[],e=0;for(let i in n)t[e++]=i;return t}}}function sw(n,t){if(n.forEach&&typeof n.forEach=="function")n.forEach(t,void 0);else if(El(n)||typeof n=="string")Array.prototype.forEach.call(n,t,void 0);else for(var e=mP(n),i=fP(n),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],e&&e[o],n)}var aw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pP(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var o=n[e].substring(0,i);r=n[e].substring(i+1)}else o=n[e];t(o,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function Ui(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Ui){this.h=n.h,_l(this,n.j),this.s=n.s,this.g=n.g,bl(this,n.m),this.l=n.l;var t=n.i,e=new Ks;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),A0(this,e),this.o=n.o}else n&&(t=String(n).match(aw))?(this.h=!1,_l(this,t[1]||"",!0),this.s=js(t[2]||""),this.g=js(t[3]||"",!0),bl(this,t[4]),this.l=js(t[5]||"",!0),A0(this,t[6]||"",!0),this.o=js(t[7]||"")):(this.h=!1,this.i=new Ks(null,this.h))}Ui.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Bs(t,C0,!0),":");var e=this.g;return(e||t=="file")&&(n.push("//"),(t=this.s)&&n.push(Bs(t,C0,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e=this.m,e!=null&&n.push(":",String(e))),(e=this.l)&&(this.g&&e.charAt(0)!="/"&&n.push("/"),n.push(Bs(e,e.charAt(0)=="/"?bP:_P,!0))),(e=this.i.toString())&&n.push("?",e),(e=this.o)&&n.push("#",Bs(e,yP)),n.join("")};function Dn(n){return new Ui(n)}function _l(n,t,e){n.j=e?js(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function bl(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function A0(n,t,e){t instanceof Ks?(n.i=t,wP(n.i,n.h)):(e||(t=Bs(t,vP)),n.i=new Ks(t,n.h))}function ft(n,t,e){n.i.set(t,e)}function Ml(n){return ft(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function js(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bs(n,t,e){return typeof n=="string"?(n=encodeURI(n).replace(t,gP),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function gP(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var C0=/[#\/\?@]/g,_P=/[#\?:]/g,bP=/[#\?]/g,vP=/[#\?@]/g,yP=/#/g;function Ks(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function ei(n){n.g||(n.g=new Map,n.h=0,n.i&&pP(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}A=Ks.prototype;A.add=function(n,t){ei(this),this.i=null,n=Yr(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this};function cw(n,t){ei(n),t=Yr(n,t),n.g.has(t)&&(n.i=null,n.h-=n.g.get(t).length,n.g.delete(t))}function lw(n,t){return ei(n),t=Yr(n,t),n.g.has(t)}A.forEach=function(n,t){ei(this),this.g.forEach(function(e,i){e.forEach(function(r){n.call(t,r,i,this)},this)},this)};A.ta=function(){ei(this);let n=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){let r=n[i];for(let o=0;o<r.length;o++)e.push(t[i])}return e};A.Z=function(n){ei(this);let t=[];if(typeof n=="string")lw(this,n)&&(t=t.concat(this.g.get(Yr(this,n))));else{n=Array.from(this.g.values());for(let e=0;e<n.length;e++)t=t.concat(n[e])}return t};A.set=function(n,t){return ei(this),this.i=null,n=Yr(this,n),lw(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this};A.get=function(n,t){return n?(n=this.Z(n),0<n.length?String(n[0]):t):t};function dw(n,t,e){cw(n,t),0<e.length&&(n.i=null,n.g.set(Yr(n,t),em(e)),n.h+=e.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];let o=encodeURIComponent(String(i)),s=this.Z(i);for(i=0;i<s.length;i++){var r=o;s[i]!==""&&(r+="="+encodeURIComponent(String(s[i]))),n.push(r)}}return this.i=n.join("&")};function Yr(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function wP(n,t){t&&!n.j&&(ei(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(cw(this,i),dw(this,r,e))},n)),n.j=t}var xP=class{constructor(n,t){this.g=n,this.map=t}};function uw(n){this.l=n||EP,U.PerformanceNavigationTiming?(n=U.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(U.g&&U.g.Ka&&U.g.Ka()&&U.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var EP=10;function hw(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function fw(n){return n.h?1:n.g?n.g.size:0}function Xf(n,t){return n.h?n.h==t:n.g?n.g.has(t):!1}function pm(n,t){n.g?n.g.add(t):n.h=t}function mw(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}uw.prototype.cancel=function(){if(this.i=pw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function pw(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let t=n.i;for(let e of n.g.values())t=t.concat(e.F);return t}return em(n.i)}var IP=class{stringify(n){return U.JSON.stringify(n,void 0)}parse(n){return U.JSON.parse(n,void 0)}};function TP(){this.g=new IP}function AP(n,t,e){let i=e||"";try{sw(n,function(r,o){let s=r;Ys(r)&&(s=cm(r)),t.push(i+o+"="+encodeURIComponent(s))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function CP(n,t){let e=new Sl;if(U.Image){let i=new Image;i.onload=dl(pl,e,i,"TestLoadImage: loaded",!0,t),i.onerror=dl(pl,e,i,"TestLoadImage: error",!1,t),i.onabort=dl(pl,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=dl(pl,e,i,"TestLoadImage: timeout",!1,t),U.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}function pl(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch{}}function na(n){this.l=n.ec||null,this.j=n.ob||!1}Qt(na,hm);na.prototype.g=function(){return new Nl(this.l,this.j)};na.prototype.i=function(n){return function(){return n}}({});function Nl(n,t){Kt.call(this),this.F=n,this.u=t,this.m=void 0,this.readyState=gm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qt(Nl,Kt);var gm=0;A=Nl.prototype;A.open=function(n,t){if(this.readyState!=gm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Qs(this)};A.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.F||U).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))};A.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ia(this)),this.readyState=gm};A.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Qs(this)),this.g&&(this.readyState=3,Qs(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof U.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function gw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}A.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?ia(this):Qs(this),this.readyState==3&&gw(this)}};A.Za=function(n){this.g&&(this.response=this.responseText=n,ia(this))};A.Ya=function(n){this.g&&(this.response=n,ia(this))};A.ka=function(){this.g&&ia(this)};function ia(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Qs(n)}A.setRequestHeader=function(n,t){this.v.append(n,t)};A.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};A.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],t=this.h.entries();for(var e=t.next();!e.done;)e=e.value,n.push(e[0]+": "+e[1]),e=t.next();return n.join(`\r
`)};function Qs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var SP=U.JSON.parse;function Et(n){Kt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=_w,this.L=this.M=!1}Qt(Et,Kt);var _w="",DP=/^https?$/i,RP=["POST","PUT"];A=Et.prototype;A.Oa=function(n){this.M=n};A.ha=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);t=t?t.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wf.g(),this.C=this.u?T0(this.u):T0(Wf),this.g.onreadystatechange=ie(this.La,this);try{this.G=!0,this.g.open(t,String(n),!0),this.G=!1}catch(o){S0(this,o);return}if(n=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)e.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let o of i.keys())e.set(o,i.get(o));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(e.keys()).find(o=>o.toLowerCase()=="content-type"),r=U.FormData&&n instanceof U.FormData,!(0<=M0(RP,t))||i||r||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of e)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yw(this),0<this.B&&((this.L=kP(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ie(this.ua,this)):this.A=um(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){S0(this,o)}};function kP(n){return Qr&&typeof n.timeout=="number"&&n.ontimeout!==void 0}A.ua=function(){typeof tm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,te(this,"timeout"),this.abort(8))};function S0(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,bw(n),Ol(n)}function bw(n){n.F||(n.F=!0,te(n,"complete"),te(n,"error"))}A.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,te(this,"complete"),te(this,"abort"),Ol(this))};A.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ol(this,!0)),Et.$.N.call(this)};A.La=function(){this.s||(this.G||this.v||this.l?vw(this):this.kb())};A.kb=function(){vw(this)};function vw(n){if(n.h&&typeof tm<"u"&&(!n.C[1]||ln(n)!=4||n.da()!=2)){if(n.v&&ln(n)==4)um(n.La,0,n);else if(te(n,"readystatechange"),ln(n)==4){n.h=!1;try{let s=n.da();t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break t;default:t=!1}var e;if(!(e=t)){var i;if(i=s===0){var r=String(n.I).match(aw)[1]||null;!r&&U.self&&U.self.location&&(r=U.self.location.protocol.slice(0,-1)),i=!DP.test(r?r.toLowerCase():"")}e=i}if(e)te(n,"complete"),te(n,"success");else{n.m=6;try{var o=2<ln(n)?n.g.statusText:""}catch{o=""}n.j=o+" ["+n.da()+"]",bw(n)}}finally{Ol(n)}}}}function Ol(n,t){if(n.g){yw(n);let e=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,t||te(n,"ready");try{e.onreadystatechange=i}catch{}}}function yw(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(U.clearTimeout(n.A),n.A=null)}A.isActive=function(){return!!this.g};function ln(n){return n.g?n.g.readyState:0}A.da=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}};A.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};A.Wa=function(n){if(this.g){var t=this.g.responseText;return n&&t.indexOf(n)==0&&(t=t.substring(n.length)),SP(t)}};function D0(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case _w:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function PP(n){let t={};n=(n.g&&2<=ln(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(zs(n[i]))continue;var e=rP(n[i]);let r=e[0];if(e=e[1],typeof e!="string")continue;e=e.trim();let o=t[r]||[];t[r]=o,o.push(e)}tP(t,function(i){return i.join(", ")})}A.Ia=function(){return this.m};A.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ww(n){let t="";return im(n,function(e,i){t+=i,t+=":",t+=e,t+=`\r
`}),t}function _m(n,t,e){t:{for(i in e){var i=!1;break t}i=!0}i||(e=ww(e),typeof n=="string"?e!=null&&encodeURIComponent(String(e)):ft(n,t,e))}function Vs(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function xw(n){this.Ga=0,this.j=[],this.l=new Sl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vs("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vs("baseRetryDelayMs",5e3,n),this.hb=Vs("retryDelaySeedMs",1e4,n),this.eb=Vs("forwardChannelMaxRetries",2,n),this.xa=Vs("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new uw(n&&n.concurrentRequestLimit),this.Ja=new TP,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}A=xw.prototype;A.ra=8;A.H=1;function bm(n){if(Ew(n),n.H==3){var t=n.W++,e=Dn(n.I);if(ft(e,"SID",n.K),ft(e,"RID",t),ft(e,"TYPE","terminate"),ra(n,e),t=new ta(n,n.l,t),t.L=2,t.A=Ml(Dn(e)),e=!1,U.navigator&&U.navigator.sendBeacon)try{e=U.navigator.sendBeacon(t.A.toString(),"")}catch{}!e&&U.Image&&(new Image().src=t.A,e=!0),e||(t.g=kw(t.l,null),t.g.ha(t.A)),t.G=Date.now(),ea(t)}Dw(n)}function Fl(n){n.g&&(ym(n),n.g.cancel(),n.g=null)}function Ew(n){Fl(n),n.u&&(U.clearTimeout(n.u),n.u=null),vl(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&U.clearTimeout(n.m),n.m=null)}function Vl(n){if(!hw(n.i)&&!n.m){n.m=!0;var t=n.Na;$s||G0(),Gs||($s(),Gs=!0),lm.add(t,n),n.C=0}}function MP(n,t){return fw(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=t.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Zs(ie(n.Na,n,t),Sw(n,n.C)),n.C++,!0)}A.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;let r=new ta(this,this.l,n),o=this.s;if(this.U&&(o?(o=V0(o),L0(o,this.U)):o=this.U),this.o!==null||this.O||(r.I=o,o=null),this.P)t:{for(var t=0,e=0;e<this.j.length;e++){e:{var i=this.j[e];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break e}i=void 0}if(i===void 0)break;if(t+=i,4096<t){t=e;break t}if(t===4096||e===this.j.length-1){t=e+1;break t}}t=1e3}else t=1e3;t=Iw(this,r,t),e=Dn(this.I),ft(e,"RID",n),ft(e,"CVER",22),this.F&&ft(e,"X-HTTP-Session-Id",this.F),ra(this,e),o&&(this.O?t="headers="+encodeURIComponent(String(ww(o)))+"&"+t:this.o&&_m(e,this.o,o)),pm(this.i,r),this.bb&&ft(e,"TYPE","init"),this.P?(ft(e,"$req",t),ft(e,"SID","null"),r.aa=!0,Qf(r,e,null)):Qf(r,e,t),this.H=2}}else this.H==3&&(n?R0(this,n):this.j.length==0||hw(this.i)||R0(this))};function R0(n,t){var e;t?e=t.m:e=n.W++;let i=Dn(n.I);ft(i,"SID",n.K),ft(i,"RID",e),ft(i,"AID",n.V),ra(n,i),n.o&&n.s&&_m(i,n.o,n.s),e=new ta(n,n.l,e,n.C+1),n.o===null&&(e.I=n.s),t&&(n.j=t.F.concat(n.j)),t=Iw(n,e,1e3),e.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),pm(n.i,e),Qf(e,i,t)}function ra(n,t){n.na&&im(n.na,function(e,i){ft(t,i,e)}),n.h&&sw({},function(e,i){ft(t,i,e)})}function Iw(n,t,e){e=Math.min(n.j.length,e);var i=n.h?ie(n.h.Va,n.h,n):null;t:{var r=n.j;let o=-1;for(;;){let s=["count="+e];o==-1?0<e?(o=r[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<e;c++){let l=r[c].g,d=r[c].map;if(l-=o,0>l)o=Math.max(0,r[c].g-100),a=!1;else try{AP(d,s,"req"+l+"_")}catch{i&&i(d)}}if(a){i=s.join("&");break t}}}return n=n.j.splice(0,e),t.F=n,i}function Tw(n){if(!n.g&&!n.u){n.ba=1;var t=n.Ma;$s||G0(),Gs||($s(),Gs=!0),lm.add(t,n),n.A=0}}function vm(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Zs(ie(n.Ma,n),Sw(n,n.A)),n.A++,!0)}A.Ma=function(){if(this.u=null,Aw(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Zs(ie(this.jb,this),n)}};A.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,le(10),Fl(this),Aw(this))};function ym(n){n.B!=null&&(U.clearTimeout(n.B),n.B=null)}function Aw(n){n.g=new ta(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var t=Dn(n.wa);ft(t,"RID","rpc"),ft(t,"SID",n.K),ft(t,"AID",n.V),ft(t,"CI",n.G?"0":"1"),!n.G&&n.qa&&ft(t,"TO",n.qa),ft(t,"TYPE","xmlhttp"),ra(n,t),n.o&&n.s&&_m(t,n.o,n.s),n.L&&n.g.setTimeout(n.L);var e=n.g;n=n.pa,e.L=1,e.A=Ml(Dn(t)),e.u=null,e.S=!0,nw(e,n)}A.ib=function(){this.v!=null&&(this.v=null,Fl(this),vm(this),le(19))};function vl(n){n.v!=null&&(U.clearTimeout(n.v),n.v=null)}function Cw(n,t){var e=null;if(n.g==t){vl(n),ym(n),n.g=null;var i=2}else if(Xf(n.i,t))e=t.F,mw(n.i,t),i=1;else return;if(n.H!=0){if(t.i)if(i==1){e=t.u?t.u.length:0,t=Date.now()-t.G;var r=n.C;i=Dl(),te(i,new X0(i,e)),Vl(n)}else Tw(n);else if(r=t.s,r==3||r==0&&0<t.ca||!(i==1&&MP(n,t)||i==2&&vm(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:Bi(n,5);break;case 4:Bi(n,10);break;case 3:Bi(n,6);break;default:Bi(n,2)}}}function Sw(n,t){let e=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(e*=2),e*t}function Bi(n,t){if(n.l.info("Error code "+t),t==2){var e=null;n.h&&(e=null);var i=ie(n.pb,n);e||(e=new Ui("//www.google.com/images/cleardot.gif"),U.location&&U.location.protocol=="http"||_l(e,"https"),Ml(e)),CP(e.toString(),i)}else le(2);n.H=0,n.h&&n.h.za(t),Dw(n),Ew(n)}A.pb=function(n){n?(this.l.info("Successfully pinged google.com"),le(2)):(this.l.info("Failed to ping google.com"),le(1))};function Dw(n){if(n.H=0,n.ma=[],n.h){let t=pw(n.i);(t.length!=0||n.j.length!=0)&&(w0(n.ma,t),w0(n.ma,n.j),n.i.i.length=0,em(n.j),n.j.length=0),n.h.ya()}}function Rw(n,t,e){var i=e instanceof Ui?Dn(e):new Ui(e);if(i.g!="")t&&(i.g=t+"."+i.g),bl(i,i.m);else{var r=U.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var o=new Ui(null);i&&_l(o,i),t&&(o.g=t),r&&bl(o,r),e&&(o.l=e),i=o}return e=n.F,t=n.Da,e&&t&&ft(i,e,t),ft(i,"VER",n.ra),ra(n,i),i}function kw(n,t,e){if(t&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n.Ha&&!n.va?new Et(new na({ob:e})):new Et(n.va),t.Oa(n.J),t}A.isActive=function(){return!!this.h&&this.h.isActive(this)};function Pw(){}A=Pw.prototype;A.Ba=function(){};A.Aa=function(){};A.za=function(){};A.ya=function(){};A.isActive=function(){return!0};A.Va=function(){};function yl(){if(Qr&&!(10<=Number(Yk)))throw Error("Environmental error: no available transport.")}yl.prototype.g=function(n,t){return new Se(n,t)};function Se(n,t){Kt.call(this),this.g=new xw(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(n?n["X-WebChannel-Client-Profile"]=t.Ca:n={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=n,(n=t&&t.cc)&&!zs(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!zs(t)&&(this.g.F=t,n=this.h,n!==null&&t in n&&(n=this.h,t in n&&delete n[t])),this.j=new Xr(this)}Qt(Se,Kt);Se.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,t=this.l,e=this.h||void 0;le(0),n.Y=t,n.na=e||{},n.G=n.aa,n.I=Rw(n,null,n.Y),Vl(n)};Se.prototype.close=function(){bm(this.g)};Se.prototype.u=function(n){var t=this.g;if(typeof n=="string"){var e={};e.__data__=n,n=e}else this.v&&(e={},e.__data__=cm(n),n=e);t.j.push(new xP(t.fb++,n)),t.H==3&&Vl(t)};Se.prototype.N=function(){this.g.h=null,delete this.j,bm(this.g),delete this.g,Se.$.N.call(this)};function Mw(n){fm.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var t=n.__sm__;if(t){t:{for(let e in t){n=e;break t}n=void 0}(this.i=n)&&(n=this.i,t=t!==null&&n in t?t[n]:void 0),this.data=t}else this.data=n}Qt(Mw,fm);function Nw(){mm.call(this),this.status=1}Qt(Nw,mm);function Xr(n){this.g=n}Qt(Xr,Pw);Xr.prototype.Ba=function(){te(this.g,"a")};Xr.prototype.Aa=function(n){te(this.g,new Mw(n))};Xr.prototype.za=function(n){te(this.g,new Nw)};Xr.prototype.ya=function(){te(this.g,"b")};function NP(){this.blockSize=-1}function Ke(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Qt(Ke,NP);Ke.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Vf(n,t,e){e||(e=0);var i=Array(16);if(typeof t=="string")for(var r=0;16>r;++r)i[r]=t.charCodeAt(e++)|t.charCodeAt(e++)<<8|t.charCodeAt(e++)<<16|t.charCodeAt(e++)<<24;else for(r=0;16>r;++r)i[r]=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;t=n.g[0],e=n.g[1],r=n.g[2];var o=n.g[3],s=t+(o^e&(r^o))+i[0]+3614090360&4294967295;t=e+(s<<7&4294967295|s>>>25),s=o+(r^t&(e^r))+i[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(e^o&(t^e))+i[2]+606105819&4294967295,r=o+(s<<17&4294967295|s>>>15),s=e+(t^r&(o^t))+i[3]+3250441966&4294967295,e=r+(s<<22&4294967295|s>>>10),s=t+(o^e&(r^o))+i[4]+4118548399&4294967295,t=e+(s<<7&4294967295|s>>>25),s=o+(r^t&(e^r))+i[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(e^o&(t^e))+i[6]+2821735955&4294967295,r=o+(s<<17&4294967295|s>>>15),s=e+(t^r&(o^t))+i[7]+4249261313&4294967295,e=r+(s<<22&4294967295|s>>>10),s=t+(o^e&(r^o))+i[8]+1770035416&4294967295,t=e+(s<<7&4294967295|s>>>25),s=o+(r^t&(e^r))+i[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(e^o&(t^e))+i[10]+4294925233&4294967295,r=o+(s<<17&4294967295|s>>>15),s=e+(t^r&(o^t))+i[11]+2304563134&4294967295,e=r+(s<<22&4294967295|s>>>10),s=t+(o^e&(r^o))+i[12]+1804603682&4294967295,t=e+(s<<7&4294967295|s>>>25),s=o+(r^t&(e^r))+i[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=r+(e^o&(t^e))+i[14]+2792965006&4294967295,r=o+(s<<17&4294967295|s>>>15),s=e+(t^r&(o^t))+i[15]+1236535329&4294967295,e=r+(s<<22&4294967295|s>>>10),s=t+(r^o&(e^r))+i[1]+4129170786&4294967295,t=e+(s<<5&4294967295|s>>>27),s=o+(e^r&(t^e))+i[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^e&(o^t))+i[11]+643717713&4294967295,r=o+(s<<14&4294967295|s>>>18),s=e+(o^t&(r^o))+i[0]+3921069994&4294967295,e=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(e^r))+i[5]+3593408605&4294967295,t=e+(s<<5&4294967295|s>>>27),s=o+(e^r&(t^e))+i[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^e&(o^t))+i[15]+3634488961&4294967295,r=o+(s<<14&4294967295|s>>>18),s=e+(o^t&(r^o))+i[4]+3889429448&4294967295,e=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(e^r))+i[9]+568446438&4294967295,t=e+(s<<5&4294967295|s>>>27),s=o+(e^r&(t^e))+i[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^e&(o^t))+i[3]+4107603335&4294967295,r=o+(s<<14&4294967295|s>>>18),s=e+(o^t&(r^o))+i[8]+1163531501&4294967295,e=r+(s<<20&4294967295|s>>>12),s=t+(r^o&(e^r))+i[13]+2850285829&4294967295,t=e+(s<<5&4294967295|s>>>27),s=o+(e^r&(t^e))+i[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=r+(t^e&(o^t))+i[7]+1735328473&4294967295,r=o+(s<<14&4294967295|s>>>18),s=e+(o^t&(r^o))+i[12]+2368359562&4294967295,e=r+(s<<20&4294967295|s>>>12),s=t+(e^r^o)+i[5]+4294588738&4294967295,t=e+(s<<4&4294967295|s>>>28),s=o+(t^e^r)+i[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^e)+i[11]+1839030562&4294967295,r=o+(s<<16&4294967295|s>>>16),s=e+(r^o^t)+i[14]+4259657740&4294967295,e=r+(s<<23&4294967295|s>>>9),s=t+(e^r^o)+i[1]+2763975236&4294967295,t=e+(s<<4&4294967295|s>>>28),s=o+(t^e^r)+i[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^e)+i[7]+4139469664&4294967295,r=o+(s<<16&4294967295|s>>>16),s=e+(r^o^t)+i[10]+3200236656&4294967295,e=r+(s<<23&4294967295|s>>>9),s=t+(e^r^o)+i[13]+681279174&4294967295,t=e+(s<<4&4294967295|s>>>28),s=o+(t^e^r)+i[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^e)+i[3]+3572445317&4294967295,r=o+(s<<16&4294967295|s>>>16),s=e+(r^o^t)+i[6]+76029189&4294967295,e=r+(s<<23&4294967295|s>>>9),s=t+(e^r^o)+i[9]+3654602809&4294967295,t=e+(s<<4&4294967295|s>>>28),s=o+(t^e^r)+i[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=r+(o^t^e)+i[15]+530742520&4294967295,r=o+(s<<16&4294967295|s>>>16),s=e+(r^o^t)+i[2]+3299628645&4294967295,e=r+(s<<23&4294967295|s>>>9),s=t+(r^(e|~o))+i[0]+4096336452&4294967295,t=e+(s<<6&4294967295|s>>>26),s=o+(e^(t|~r))+i[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~e))+i[14]+2878612391&4294967295,r=o+(s<<15&4294967295|s>>>17),s=e+(o^(r|~t))+i[5]+4237533241&4294967295,e=r+(s<<21&4294967295|s>>>11),s=t+(r^(e|~o))+i[12]+1700485571&4294967295,t=e+(s<<6&4294967295|s>>>26),s=o+(e^(t|~r))+i[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~e))+i[10]+4293915773&4294967295,r=o+(s<<15&4294967295|s>>>17),s=e+(o^(r|~t))+i[1]+2240044497&4294967295,e=r+(s<<21&4294967295|s>>>11),s=t+(r^(e|~o))+i[8]+1873313359&4294967295,t=e+(s<<6&4294967295|s>>>26),s=o+(e^(t|~r))+i[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~e))+i[6]+2734768916&4294967295,r=o+(s<<15&4294967295|s>>>17),s=e+(o^(r|~t))+i[13]+1309151649&4294967295,e=r+(s<<21&4294967295|s>>>11),s=t+(r^(e|~o))+i[4]+4149444226&4294967295,t=e+(s<<6&4294967295|s>>>26),s=o+(e^(t|~r))+i[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=r+(t^(o|~e))+i[2]+718787259&4294967295,r=o+(s<<15&4294967295|s>>>17),s=e+(o^(r|~t))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+t&4294967295,n.g[1]=n.g[1]+(r+(s<<21&4294967295|s>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+o&4294967295}Ke.prototype.j=function(n,t){t===void 0&&(t=n.length);for(var e=t-this.blockSize,i=this.m,r=this.h,o=0;o<t;){if(r==0)for(;o<=e;)Vf(this,n,o),o+=this.blockSize;if(typeof n=="string"){for(;o<t;)if(i[r++]=n.charCodeAt(o++),r==this.blockSize){Vf(this,i),r=0;break}}else for(;o<t;)if(i[r++]=n[o++],r==this.blockSize){Vf(this,i),r=0;break}}this.h=r,this.i+=t};Ke.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var t=1;t<n.length-8;++t)n[t]=0;var e=8*this.i;for(t=n.length-8;t<n.length;++t)n[t]=e&255,e/=256;for(this.j(n),n=Array(16),t=e=0;4>t;++t)for(var i=0;32>i;i+=8)n[e++]=this.g[t]>>>i&255;return n};function at(n,t){this.h=t;for(var e=[],i=!0,r=n.length-1;0<=r;r--){var o=n[r]|0;i&&o==t||(e[r]=o,i=!1)}this.g=e}var OP={};function wm(n){return-128<=n&&128>n?Wk(n,function(t){return new at([t|0],0>t?-1:0)}):new at([n|0],0>n?-1:0)}function dn(n){if(isNaN(n)||!isFinite(n))return Kr;if(0>n)return Jt(dn(-n));for(var t=[],e=1,i=0;n>=e;i++)t[i]=n/e|0,e*=Zf;return new at(t,0)}function Ow(n,t){if(n.length==0)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(n.charAt(0)=="-")return Jt(Ow(n.substring(1),t));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var e=dn(Math.pow(t,8)),i=Kr,r=0;r<n.length;r+=8){var o=Math.min(8,n.length-r),s=parseInt(n.substring(r,r+o),t);8>o?(o=dn(Math.pow(t,o)),i=i.R(o).add(dn(s))):(i=i.R(e),i=i.add(dn(s)))}return i}var Zf=4294967296,Kr=wm(0),Jf=wm(1),k0=wm(16777216);A=at.prototype;A.ea=function(){if(je(this))return-Jt(this).ea();for(var n=0,t=1,e=0;e<this.g.length;e++){var i=this.D(e);n+=(0<=i?i:Zf+i)*t,t*=Zf}return n};A.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(Sn(this))return"0";if(je(this))return"-"+Jt(this).toString(n);for(var t=dn(Math.pow(n,6)),e=this,i="";;){var r=xl(e,t).g;e=wl(e,r.R(t));var o=((0<e.g.length?e.g[0]:e.h)>>>0).toString(n);if(e=r,Sn(e))return o+i;for(;6>o.length;)o="0"+o;i=o+i}};A.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function Sn(n){if(n.h!=0)return!1;for(var t=0;t<n.g.length;t++)if(n.g[t]!=0)return!1;return!0}function je(n){return n.h==-1}A.X=function(n){return n=wl(this,n),je(n)?-1:Sn(n)?0:1};function Jt(n){for(var t=n.g.length,e=[],i=0;i<t;i++)e[i]=~n.g[i];return new at(e,~n.h).add(Jf)}A.abs=function(){return je(this)?Jt(this):this};A.add=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0,r=0;r<=t;r++){var o=i+(this.D(r)&65535)+(n.D(r)&65535),s=(o>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=s>>>16,o&=65535,s&=65535,e[r]=s<<16|o}return new at(e,e[e.length-1]&-2147483648?-1:0)};function wl(n,t){return n.add(Jt(t))}A.R=function(n){if(Sn(this)||Sn(n))return Kr;if(je(this))return je(n)?Jt(this).R(Jt(n)):Jt(Jt(this).R(n));if(je(n))return Jt(this.R(Jt(n)));if(0>this.X(k0)&&0>n.X(k0))return dn(this.ea()*n.ea());for(var t=this.g.length+n.g.length,e=[],i=0;i<2*t;i++)e[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var o=this.D(i)>>>16,s=this.D(i)&65535,a=n.D(r)>>>16,c=n.D(r)&65535;e[2*i+2*r]+=s*c,gl(e,2*i+2*r),e[2*i+2*r+1]+=o*c,gl(e,2*i+2*r+1),e[2*i+2*r+1]+=s*a,gl(e,2*i+2*r+1),e[2*i+2*r+2]+=o*a,gl(e,2*i+2*r+2)}for(i=0;i<t;i++)e[i]=e[2*i+1]<<16|e[2*i];for(i=t;i<2*t;i++)e[i]=0;return new at(e,0)};function gl(n,t){for(;(n[t]&65535)!=n[t];)n[t+1]+=n[t]>>>16,n[t]&=65535,t++}function Ls(n,t){this.g=n,this.h=t}function xl(n,t){if(Sn(t))throw Error("division by zero");if(Sn(n))return new Ls(Kr,Kr);if(je(n))return t=xl(Jt(n),t),new Ls(Jt(t.g),Jt(t.h));if(je(t))return t=xl(n,Jt(t)),new Ls(Jt(t.g),t.h);if(30<n.g.length){if(je(n)||je(t))throw Error("slowDivide_ only works with positive integers.");for(var e=Jf,i=t;0>=i.X(n);)e=P0(e),i=P0(i);var r=Hr(e,1),o=Hr(i,1);for(i=Hr(i,2),e=Hr(e,2);!Sn(i);){var s=o.add(i);0>=s.X(n)&&(r=r.add(e),o=s),i=Hr(i,1),e=Hr(e,1)}return t=wl(n,r.R(t)),new Ls(r,t)}for(r=Kr;0<=n.X(t);){for(e=Math.max(1,Math.floor(n.ea()/t.ea())),i=Math.ceil(Math.log(e)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),o=dn(e),s=o.R(t);je(s)||0<s.X(n);)e-=i,o=dn(e),s=o.R(t);Sn(o)&&(o=Jf),r=r.add(o),n=wl(n,s)}return new Ls(r,n)}A.gb=function(n){return xl(this,n).h};A.and=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)&n.D(i);return new at(e,this.h&n.h)};A.or=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)|n.D(i);return new at(e,this.h|n.h)};A.xor=function(n){for(var t=Math.max(this.g.length,n.g.length),e=[],i=0;i<t;i++)e[i]=this.D(i)^n.D(i);return new at(e,this.h^n.h)};function P0(n){for(var t=n.g.length+1,e=[],i=0;i<t;i++)e[i]=n.D(i)<<1|n.D(i-1)>>>31;return new at(e,n.h)}function Hr(n,t){var e=t>>5;t%=32;for(var i=n.g.length-e,r=[],o=0;o<i;o++)r[o]=0<t?n.D(o+e)>>>t|n.D(o+e+1)<<32-t:n.D(o+e);return new at(r,n.h)}yl.prototype.createWebChannel=yl.prototype.g;Se.prototype.send=Se.prototype.u;Se.prototype.open=Se.prototype.m;Se.prototype.close=Se.prototype.close;Rl.NO_ERROR=0;Rl.TIMEOUT=8;Rl.HTTP_ERROR=6;Z0.COMPLETE="complete";J0.EventType=Js;Js.OPEN="a";Js.CLOSE="b";Js.ERROR="c";Js.MESSAGE="d";Kt.prototype.listen=Kt.prototype.O;Et.prototype.listenOnce=Et.prototype.P;Et.prototype.getLastError=Et.prototype.Sa;Et.prototype.getLastErrorCode=Et.prototype.Ia;Et.prototype.getStatus=Et.prototype.da;Et.prototype.getResponseJson=Et.prototype.Wa;Et.prototype.getResponseText=Et.prototype.ja;Et.prototype.send=Et.prototype.ha;Et.prototype.setWithCredentials=Et.prototype.Oa;Ke.prototype.digest=Ke.prototype.l;Ke.prototype.reset=Ke.prototype.reset;Ke.prototype.update=Ke.prototype.j;at.prototype.add=at.prototype.add;at.prototype.multiply=at.prototype.R;at.prototype.modulo=at.prototype.gb;at.prototype.compare=at.prototype.X;at.prototype.toNumber=at.prototype.ea;at.prototype.toString=at.prototype.toString;at.prototype.getBits=at.prototype.D;at.fromNumber=dn;at.fromString=Ow;var Fw=Qe.createWebChannelTransport=function(){return new yl},Vw=Qe.getStatEventTarget=function(){return Dl()},Ll=Qe.ErrorCode=Rl,Lw=Qe.EventType=Z0,jw=Qe.Event=zi,xm=Qe.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},y2=Qe.FetchXmlHttpFactory=na,oa=Qe.WebChannel=J0,Bw=Qe.XhrIo=Et,Uw=Qe.Md5=Ke,qi=Qe.Integer=at;var zw="@firebase/firestore";var jt=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");var So="10.8.0";var ci=new uc("@firebase/firestore");function no(){return ci.logLevel}function Ux(n){ci.setLogLevel(n)}function x(n,...t){if(ci.logLevel<=rn.DEBUG){let e=t.map(Ig);ci.debug(`Firestore (${So}): ${n}`,...e)}}function kt(n,...t){if(ci.logLevel<=rn.ERROR){let e=t.map(Ig);ci.error(`Firestore (${So}): ${n}`,...e)}}function Ue(n,...t){if(ci.logLevel<=rn.WARN){let e=t.map(Ig);ci.warn(`Firestore (${So}): ${n}`,...e)}}function Ig(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function R(n="Unexpected state"){let t=`FIRESTORE (${So}) INTERNAL ASSERTION FAILED: `+n;throw kt(t),new Error(t)}function F(n,t){n||R()}function zx(n,t){n||R()}function C(n,t){return n}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},v=class extends mb{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Bt=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var Ql=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},Cm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(jt.UNAUTHENTICATED))}shutdown(){}},Sm=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Dm=class{constructor(t){this.t=t,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),o=new Bt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Bt,t.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let c=o;t.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Bt)}},0),s()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(F(typeof i.accessToken=="string"),new Ql(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return F(t===null||typeof t=="string"),new jt(t)}},Rm=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},km=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new Rm(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pm=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mm=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,x("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?e(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>i(o))};let r=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(F(typeof e.token=="string"),this.R=e.token,new Pm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FP(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Yl=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=FP(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<e&&(i+=t.charAt(r[o]%t.length))}return i}};function z(n,t){return n<t?-1:n>t?1:0}function ho(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function qx(n){return n+"\0"}var vt=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new v(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new v(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?z(this.nanoseconds,t.nanoseconds):z(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var L=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new vt(0,0))}static max(){return new n(new vt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Xl=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&R(),i===void 0?i=t.length-e:i>t.length-e&&R(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let o=t.get(r),s=e.get(r);if(o<s)return-1;if(o>s)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},et=class n extends Xl{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},VP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pt=class n extends Xl{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return VP.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,o=()=>{if(i.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},s=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new v(g.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new v(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else a==="`"?(s=!s,r++):a!=="."||s?(i+=a,r++):(o(),r++)}if(o(),s)throw new v(g.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var T=class n{constructor(t){this.path=t}static fromPath(t){return new n(et.fromString(t))}static fromName(t){return new n(et.fromString(t).popFirst(5))}static empty(){return new n(et.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&et.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return et.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new et(t.slice()))}};var fo=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};function Nm(n){return n.fields.find(t=>t.kind===2)}function Gi(n){return n.fields.filter(t=>t.kind!==2)}fo.UNKNOWN_ID=-1;var co=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var _a=class n{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new n(0,ze.min())}};function $x(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=L.fromTimestamp(i===1e9?new vt(e+1,0):new vt(e,i));return new ze(r,T.empty(),t)}function Gx(n){return new ze(n.readTime,n.key,-1)}var ze=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(L.min(),T.empty(),-1)}static max(){return new n(L.max(),T.empty(),-1)}};function Tg(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=T.comparator(n.documentKey,t.documentKey),e!==0?e:z(n.largestBatchId,t.largestBatchId))}var Hx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zl=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function bi(n){return _(this,null,function*(){if(n.code!==g.FAILED_PRECONDITION||n.message!==Hx)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var m=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&R(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(e,o).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,o=0,s=!1;t.forEach(a=>{++r,a.next(()=>{++o,s&&o===r&&e()},c=>i(c))}),s=!0,o===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,o)=>{i.push(e.call(this,r,o))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let o=t.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;e(t[l]).next(d=>{s[l]=d,++a,a===o&&i(s)},d=>r(d))}})}static doWhile(t,e){return new n((i,r)=>{let o=()=>{t()===!0?e().next(()=>{o()},r):i()};o()})}};var Jl=class n{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new Bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new Xi(t,e.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=Ag(i.target.error);this.V.reject(new Xi(t,r))}}static open(t,e,i,r){try{return new n(e,t.transaction(r,i))}catch(o){throw new Xi(e,o)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(x("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){let e=this.transaction.objectStore(t);return new Fm(e)}},Pn=class n{constructor(t,e,i){this.name=t,this.version=e,this.p=i,n.S(Yo())===12.2&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return x("SimpleDb","Removing database:",t),Hi(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!dc())return!1;if(n.C())return!0;let t=Yo(),e=n.S(t),i=0<e&&e<10,r=n.v(t),o=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||o)}static C(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)===null||t===void 0?void 0:t.F)==="YES"}static M(t,e){return t.store(e)}static S(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(t){let e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(t){return _(this,null,function*(){return this.db||(x("SimpleDb","Opening database:",this.name),this.db=yield new Promise((e,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;e(s)},r.onblocked=()=>{i(new Xi(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new v(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new v(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Xi(t,s))},r.onupgradeneeded=o=>{x("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,r.transaction,o.oldVersion,this.version).next(()=>{x("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db})}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){return _(this,null,function*(){let o=e==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(t);let a=Jl.open(this.db,t,o?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),m.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(x("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Om=class{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Hi(this.k.delete())}},Xi=class extends v{constructor(t,e){super(g.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function vi(n){return n.name==="IndexedDbTransactionError"}var Fm=class{constructor(t){this.store=t}put(t,e){let i;return e!==void 0?(x("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Hi(i)}add(t){return x("SimpleDb","ADD",this.store.name,t,t),Hi(this.store.add(t))}get(t){return Hi(this.store.get(t)).next(e=>(e===void 0&&(e=null),x("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return x("SimpleDb","DELETE",this.store.name,t),Hi(this.store.delete(t))}count(){return x("SimpleDb","COUNT",this.store.name),Hi(this.store.count())}W(t,e){let i=this.options(t,e),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new m((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(i),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(t,e){let i=this.store.getAll(t,e===null?void 0:e);return new m((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}H(t,e){x("SimpleDb","DELETE ALL",this.store.name);let i=this.options(t,e);i.J=!1;let r=this.cursor(i);return this.G(r,(o,s,a)=>a.delete())}Y(t,e){let i;e?i=t:(i={},e=t);let r=this.cursor(i);return this.G(r,e)}Z(t){let e=this.cursor({});return new m((i,r)=>{e.onerror=o=>{let s=Ag(o.target.error);r(s)},e.onsuccess=o=>{let s=o.target.result;s?t(s.primaryKey,s.value).next(a=>{a?s.continue():i()}):i()}})}G(t,e){let i=[];return new m((r,o)=>{t.onerror=s=>{o(s.target.error)},t.onsuccess=s=>{let a=s.target.result;if(!a)return void r();let c=new Om(a),l=e(a.primaryKey,a.value,c);if(l instanceof m){let d=l.catch(u=>(c.done(),m.reject(u)));i.push(d)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(i))}options(t,e){let i;return t!==void 0&&(typeof t=="string"?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let i=this.store.index(t.index);return t.J?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}};function Hi(n){return new m((t,e)=>{n.onsuccess=i=>{let r=i.target.result;t(r)},n.onerror=i=>{let r=Ag(i.target.error);e(r)}})}var qw=!1;function Ag(n){let t=Pn.S(Yo());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){let i=new v("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qw||(qw=!0,setTimeout(()=>{throw i},0)),i}}return n}var Vm=class{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(t){x("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>_(this,null,function*(){this.task=null;try{x("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(e){vi(e)?x("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):yield bi(e)}yield this.ee(6e4)}))}},Lm=class{constructor(t,e){this.localStore=t,this.persistence=e}te(t=50){return _(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.ne(e,t))})}ne(t,e){let i=new Set,r=e,o=!0;return m.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(s=>{if(s!==null&&!i.has(s))return x("IndexBackfiller",`Processing collection: ${s}`),this.re(t,s,r).next(a=>{r-=a,i.add(s)});o=!1})).next(()=>e-r)}re(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(t,s).next(()=>this.ie(r,o)).next(a=>(x("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>s.size)}))}ie(t,e){let i=t;return e.changes.forEach((r,o)=>{let s=Gx(o);Tg(s,i)>0&&(i=s)}),new ze(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}};var De=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.oe&&this.oe(e),e}}return n._e=-1,n})();function Ba(n){return n==null}function ba(n){return n===0&&1/n==-1/0}function Wx(n){return typeof n=="number"&&Number.isInteger(n)&&!ba(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function de(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=$w(t)),t=LP(n.get(e),t);return $w(t)}function LP(n,t){let e=t,i=n.length;for(let r=0;r<i;r++){let o=n.charAt(r);switch(o){case"\0":e+="";break;case"":e+="";break;default:e+=o}}return e}function $w(n){return n+""}function un(n){let t=n.length;if(F(t>=2),t===2)return F(n.charAt(0)===""&&n.charAt(1)===""),et.emptyPath();let e=t-2,i=[],r="";for(let o=0;o<t;){let s=n.indexOf("",o);switch((s<0||s>e)&&R(),n.charAt(s+1)){case"":let a=n.substring(o,s),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=n.substring(o,s),r+="\0";break;case"":r+=n.substring(o,s+1);break;default:R()}o=s+2}return new et(i)}var Gw=["userId","batchId"];function ql(n,t){return[n,de(t)]}function Kx(n,t,e){return[n,de(t),e]}var jP={},BP=["prefixPath","collectionGroup","readTime","documentId"],UP=["prefixPath","collectionGroup","documentId"],zP=["collectionGroup","readTime","prefixPath","documentId"],qP=["canonicalId","targetId"],$P=["targetId","path"],GP=["path","targetId"],HP=["collectionId","parent"],WP=["indexId","uid"],KP=["uid","sequenceNumber"],QP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],YP=["indexId","uid","orderedDocumentKey"],XP=["userId","collectionPath","documentId"],ZP=["userId","collectionPath","largestBatchId"],JP=["userId","collectionGroup","largestBatchId"],Qx=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t1=[...Qx,"documentOverlays"],Yx=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xx=Yx,e1=[...Xx,"indexConfiguration","indexState","indexEntries"];var va=class extends Zl{constructor(t,e){super(),this.ae=t,this.currentSequenceNumber=e}};function Xt(n,t){let e=C(n);return Pn.M(e.ae,t)}function Hw(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function lr(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Zx(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var mt=class n{constructor(t,e){this.comparator=t,this.root=e||fn.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,fn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ao(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ao(this.root,t,this.comparator,!1)}getReverseIterator(){return new ao(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ao(this.root,t,this.comparator,!0)}},ao=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,e&&r&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},fn=class n{constructor(t,e,i,r,o){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,o){return new n(t??this.key,e??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,o=i(t,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(t,e,i),null):o===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw R();let t=this.left.check();if(t!==this.right.check())throw R();return t+(this.isRed()?0:1)}};fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw R()}get value(){throw R()}get color(){throw R()}get left(){throw R()}get right(){throw R()}copy(t,e,i,r,o){return this}insert(t,e,i){return new fn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var dt=class n{constructor(t){this.comparator=t,this.data=new mt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new td(this.data.getIterator())}getIteratorFrom(t){return new td(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},td=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Zr(n){return n.hasNext()?n.getNext():void 0}var Re=class n{constructor(t){this.fields=t,t.sort(Pt.comparator)}static empty(){return new n([])}unionWith(t){let e=new dt(Pt.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return ho(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var ed=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Jx(){return typeof atob<"u"}var Yt=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ed("Invalid base64 string: "+o):o}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return z(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Yt.EMPTY_BYTE_STRING=new Yt("");var n1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(n){if(F(!!n),typeof n=="string"){let t=0,e=n1.exec(n);if(F(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:It(n.seconds),nanos:It(n.nanos)}}function It(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function di(n){return typeof n=="string"?Yt.fromBase64String(n):Yt.fromUint8Array(n)}function Gd(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Cg(n){let t=n.mapValue.fields.__previous_value__;return Gd(t)?Cg(t):t}function ya(n){let t=li(n.mapValue.fields.__local_write_time__.timestampValue);return new vt(t.seconds,t.nanos)}var jm=class{constructor(t,e,i,r,o,s,a,c,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ui=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var si={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},$l={nullValue:"NULL_VALUE"};function Zi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Gd(n)?4:tE(n)?9007199254740991:10:R()}function gn(n,t){if(n===t)return!0;let e=Zi(n);if(e!==Zi(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return ya(n).isEqual(ya(t));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=li(r.timestampValue),a=li(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,o){return di(r.bytesValue).isEqual(di(o.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,o){return It(r.geoPointValue.latitude)===It(o.geoPointValue.latitude)&&It(r.geoPointValue.longitude)===It(o.geoPointValue.longitude)}(n,t);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return It(r.integerValue)===It(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=It(r.doubleValue),a=It(o.doubleValue);return s===a?ba(s)===ba(a):isNaN(s)&&isNaN(a)}return!1}(n,t);case 9:return ho(n.arrayValue.values||[],t.arrayValue.values||[],gn);case 10:return function(r,o){let s=r.mapValue.fields||{},a=o.mapValue.fields||{};if(Hw(s)!==Hw(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!gn(s[c],a[c])))return!1;return!0}(n,t);default:return R()}}function wa(n,t){return(n.values||[]).find(e=>gn(e,t))!==void 0}function hi(n,t){if(n===t)return 0;let e=Zi(n),i=Zi(t);if(e!==i)return z(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return z(n.booleanValue,t.booleanValue);case 2:return function(o,s){let a=It(o.integerValue||o.doubleValue),c=It(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,t);case 3:return Ww(n.timestampValue,t.timestampValue);case 4:return Ww(ya(n),ya(t));case 5:return z(n.stringValue,t.stringValue);case 6:return function(o,s){let a=di(o),c=di(s);return a.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=z(a[l],c[l]);if(d!==0)return d}return z(a.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(o,s){let a=z(It(o.latitude),It(s.latitude));return a!==0?a:z(It(o.longitude),It(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=hi(a[l],c[l]);if(d)return d}return z(a.length,c.length)}(n.arrayValue,t.arrayValue);case 10:return function(o,s){if(o===si.mapValue&&s===si.mapValue)return 0;if(o===si.mapValue)return 1;if(s===si.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let u=0;u<c.length&&u<d.length;++u){let h=z(c[u],d[u]);if(h!==0)return h;let f=hi(a[c[u]],l[d[u]]);if(f!==0)return f}return z(c.length,d.length)}(n.mapValue,t.mapValue);default:throw R()}}function Ww(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return z(n,t);let e=li(n),i=li(t),r=z(e.seconds,i.seconds);return r!==0?r:z(e.nanos,i.nanos)}function mo(n){return Bm(n)}function Bm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=li(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return di(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return T.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let o of e.values||[])r?r=!1:i+=",",i+=Bm(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${Bm(e.fields[s])}`;return r+"}"}(n.mapValue):R()}function Ji(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Um(n){return!!n&&"integerValue"in n}function xa(n){return!!n&&"arrayValue"in n}function Kw(n){return!!n&&"nullValue"in n}function Qw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gl(n){return!!n&&"mapValue"in n}function ha(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return lr(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ha(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ha(n.arrayValue.values[e]);return t}return Object.assign({},n)}function tE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function i1(n){return"nullValue"in n?$l:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ji(ui.empty(),T.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:R()}function r1(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ji(ui.empty(),T.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?si:R()}function Yw(n,t){let e=hi(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function Xw(n,t){let e=hi(n.value,t.value);return e!==0?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}var se=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Gl(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ha(e)}setAll(t){let e=Pt.emptyPath(),i={},r=[];t.forEach((s,a)=>{if(!e.isImmediateParentOf(a)){let c=this.getFieldsMap(e);this.applyChanges(c,i,r),i={},r=[],e=a.popLast()}s?i[a.lastSegment()]=ha(s):r.push(a.lastSegment())});let o=this.getFieldsMap(e);this.applyChanges(o,i,r)}delete(t){let e=this.field(t.popLast());Gl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return gn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Gl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){lr(e,(r,o)=>t[r]=o);for(let r of i)delete t[r]}clone(){return new n(ha(this.value))}};function eE(n){let t=[];return lr(n.fields,(e,i)=>{let r=new Pt([e]);if(Gl(i)){let o=eE(i.mapValue).fields;if(o.length===0)t.push(r);else for(let s of o)t.push(r.child(s))}else t.push(r)}),new Re(t)}var Ut=class n{constructor(t,e,i,r,o,s,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(t){return new n(t,0,L.min(),L.min(),L.min(),se.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,L.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,L.min(),L.min(),se.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,L.min(),L.min(),se.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(L.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=se.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=se.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=L.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var _n=class{constructor(t,e){this.position=t,this.inclusive=e}};function Zw(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let o=t[r],s=n.position[r];if(o.field.isKeyField()?i=T.comparator(T.fromName(s.referenceValue),e.key):i=hi(s,e.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Jw(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!gn(n.position[e],t.position[e]))return!1;return!0}var tr=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function o1(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var nd=class{},Z=class n extends nd{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new $m(t,e,i):e==="array-contains"?new Wm(t,i):e==="in"?new id(t,i):e==="not-in"?new Km(t,i):e==="array-contains-any"?new Qm(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Gm(t,i):new Hm(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(hi(e,this.value)):e!==null&&Zi(this.value)===Zi(e)&&this.matchesComparison(hi(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return R()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ct=class n extends nd{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new n(t,e)}matches(t){return po(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function po(n){return n.op==="and"}function zm(n){return n.op==="or"}function Sg(n){return nE(n)&&po(n)}function nE(n){for(let t of n.filters)if(t instanceof ct)return!1;return!0}function qm(n){if(n instanceof Z)return n.field.canonicalString()+n.op.toString()+mo(n.value);if(Sg(n))return n.filters.map(t=>qm(t)).join(",");{let t=n.filters.map(e=>qm(e)).join(",");return`${n.op}(${t})`}}function iE(n,t){return n instanceof Z?function(i,r){return r instanceof Z&&i.op===r.op&&i.field.isEqual(r.field)&&gn(i.value,r.value)}(n,t):n instanceof ct?function(i,r){return r instanceof ct&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,a)=>o&&iE(s,r.filters[a]),!0):!1}(n,t):void R()}function rE(n,t){let e=n.filters.concat(t);return ct.create(e,n.op)}function oE(n){return n instanceof Z?function(e){return`${e.field.canonicalString()} ${e.op} ${mo(e.value)}`}(n):n instanceof ct?function(e){return e.op.toString()+" {"+e.getFilters().map(oE).join(" ,")+"}"}(n):"Filter"}var $m=class extends Z{constructor(t,e,i){super(t,e,i),this.key=T.fromName(i.referenceValue)}matches(t){let e=T.comparator(t.key,this.key);return this.matchesComparison(e)}},Gm=class extends Z{constructor(t,e){super(t,"in",e),this.keys=sE("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Hm=class extends Z{constructor(t,e){super(t,"not-in",e),this.keys=sE("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function sE(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>T.fromName(i.referenceValue))}var Wm=class extends Z{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return xa(e)&&wa(e.arrayValue,this.value)}},id=class extends Z{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&wa(this.value.arrayValue,e)}},Km=class extends Z{constructor(t,e){super(t,"not-in",e)}matches(t){if(wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!wa(this.value.arrayValue,e)}},Qm=class extends Z{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!xa(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>wa(this.value.arrayValue,i))}};var Ym=class{constructor(t,e=null,i=[],r=[],o=null,s=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function Xm(n,t=null,e=[],i=[],r=null,o=null,s=null){return new Ym(n,t,e,i,r,o,s)}function er(n){let t=C(n);if(t.ce===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>qm(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ba(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>mo(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>mo(i)).join(",")),t.ce=e}return t.ce}function Ua(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!o1(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!iE(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!Jw(n.startAt,t.startAt)&&Jw(n.endAt,t.endAt)}function rd(n){return T.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function od(n,t){return n.filters.filter(e=>e instanceof Z&&e.field.isEqual(t))}function tx(n,t,e){let i=$l,r=!0;for(let o of od(n,t)){let s=$l,a=!0;switch(o.op){case"<":case"<=":s=i1(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=$l}Yw({value:i,inclusive:r},{value:s,inclusive:a})<0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];Yw({value:i,inclusive:r},{value:s,inclusive:e.inclusive})<0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}function ex(n,t,e){let i=si,r=!0;for(let o of od(n,t)){let s=si,a=!0;switch(o.op){case">=":case">":s=r1(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=si}Xw({value:i,inclusive:r},{value:s,inclusive:a})>0&&(i=s,r=a)}if(e!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(t)){let s=e.position[o];Xw({value:i,inclusive:r},{value:s,inclusive:e.inclusive})>0&&(i=s,r=e.inclusive);break}}return{value:i,inclusive:r}}var Ye=class{constructor(t,e=null,i=[],r=[],o=null,s="F",a=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function aE(n,t,e,i,r,o,s,a){return new Ye(n,t,e,i,r,o,s,a)}function Do(n){return new Ye(n)}function nx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Dg(n){return n.collectionGroup!==null}function lo(n){let t=C(n);if(t.le===null){t.le=[];let e=new Set;for(let o of t.explicitOrderBy)t.le.push(o),e.add(o.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new dt(Pt.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(o=>{e.has(o.canonicalString())||o.isKeyField()||t.le.push(new tr(o,i))}),e.has(Pt.keyField().canonicalString())||t.le.push(new tr(Pt.keyField(),i))}return t.le}function ue(n){let t=C(n);return t.he||(t.he=s1(t,lo(n))),t.he}function s1(n,t){if(n.limitType==="F")return Xm(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new tr(r.field,o)});let e=n.endAt?new _n(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new _n(n.startAt.position,n.startAt.inclusive):null;return Xm(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function Zm(n,t){let e=n.filters.concat([t]);return new Ye(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function sd(n,t,e){return new Ye(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function za(n,t){return Ua(ue(n),ue(t))&&n.limitType===t.limitType}function cE(n){return`${er(ue(n))}|lt:${n.limitType}`}function io(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>oE(r)).join(", ")}]`),Ba(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>mo(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>mo(r)).join(",")),`Target(${i})`}(ue(n))}; limitType=${n.limitType})`}function qa(n,t){return t.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):T.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,t)&&function(i,r){for(let o of lo(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(s,a,c){let l=Zw(s,a,c);return s.inclusive?l<=0:l<0}(i.startAt,lo(i),r)||i.endAt&&!function(s,a,c){let l=Zw(s,a,c);return s.inclusive?l>=0:l>0}(i.endAt,lo(i),r))}(n,t)}function lE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dE(n){return(t,e)=>{let i=!1;for(let r of lo(n)){let o=a1(r,t,e);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function a1(n,t,e){let i=n.field.isKeyField()?T.comparator(t.key,e.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?hi(c,l):R()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return R()}}var bn=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,t))return o}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return void(r[o]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){lr(this.inner,(e,i)=>{for(let[r,o]of i)t(r,o)})}isEmpty(){return Zx(this.inner)}size(){return this.innerSize}};var c1=new mt(T.comparator);function ye(){return c1}var uE=new mt(T.comparator);function da(...n){let t=uE;for(let e of n)t=t.insert(e.key,e);return t}function hE(n){let t=uE;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function hn(){return fa()}function fE(){return fa()}function fa(){return new bn(n=>n.toString(),(n,t)=>n.isEqual(t))}var l1=new mt(T.comparator),d1=new dt(T.comparator);function H(...n){let t=d1;for(let e of n)t=t.add(e);return t}var u1=new dt(z);function Rg(){return u1}function mE(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ba(t)?"-0":t}}function pE(n){return{integerValue:""+n}}function gE(n,t){return Wx(t)?pE(t):mE(n,t)}var go=class{constructor(){this._=void 0}};function h1(n,t,e){return n instanceof fi?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Gd(o)&&(o=Cg(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(e,t):n instanceof Mn?bE(n,t):n instanceof Nn?vE(n,t):function(r,o){let s=_E(r,o),a=ix(s)+ix(r.Ie);return Um(s)&&Um(r.Ie)?pE(a):mE(r.serializer,a)}(n,t)}function f1(n,t,e){return n instanceof Mn?bE(n,t):n instanceof Nn?vE(n,t):e}function _E(n,t){return n instanceof mi?function(i){return Um(i)||function(o){return!!o&&"doubleValue"in o}(i)}(t)?t:{integerValue:0}:null}var fi=class extends go{},Mn=class extends go{constructor(t){super(),this.elements=t}};function bE(n,t){let e=yE(t);for(let i of n.elements)e.some(r=>gn(r,i))||e.push(i);return{arrayValue:{values:e}}}var Nn=class extends go{constructor(t){super(),this.elements=t}};function vE(n,t){let e=yE(t);for(let i of n.elements)e=e.filter(r=>!gn(r,i));return{arrayValue:{values:e}}}var mi=class extends go{constructor(t,e){super(),this.serializer=t,this.Ie=e}};function ix(n){return It(n.integerValue||n.doubleValue)}function yE(n){return xa(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var nr=class{constructor(t,e){this.field=t,this.transform=e}};function m1(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Mn&&r instanceof Mn||i instanceof Nn&&r instanceof Nn?ho(i.elements,r.elements,gn):i instanceof mi&&r instanceof mi?gn(i.Ie,r.Ie):i instanceof fi&&r instanceof fi}(n.transform,t.transform)}var Jm=class{constructor(t,e){this.version=t,this.transformResults=e}},Tt=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Hl(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var _o=class{};function wE(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new gi(n.key,Tt.none()):new pi(n.key,n.data,Tt.none());{let e=n.data,i=se.empty(),r=new dt(Pt.comparator);for(let o of t.fields)if(!r.has(o)){let s=e.field(o);s===null&&o.length>1&&(o=o.popLast(),s=e.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new Xe(n.key,i,new Re(r.toArray()),Tt.none())}}function p1(n,t,e){n instanceof pi?function(r,o,s){let a=r.value.clone(),c=ox(r.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Xe?function(r,o,s){if(!Hl(r.precondition,o))return void o.convertToUnknownDocument(s.version);let a=ox(r.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(xE(r)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,t,e)}function ma(n,t,e,i){return n instanceof pi?function(o,s,a,c){if(!Hl(o.precondition,s))return a;let l=o.value.clone(),d=sx(o.fieldTransforms,c,s);return l.setAll(d),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,t,e,i):n instanceof Xe?function(o,s,a,c){if(!Hl(o.precondition,s))return a;let l=sx(o.fieldTransforms,c,s),d=s.data;return d.setAll(xE(o)),d.setAll(l),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(u=>u.field))}(n,t,e,i):function(o,s,a){return Hl(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,t,e)}function g1(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),o=_E(i.transform,r||null);o!=null&&(e===null&&(e=se.empty()),e.set(i.field,o))}return e||null}function rx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ho(i,r,(o,s)=>m1(o,s))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var pi=class extends _o{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xe=class extends _o{constructor(t,e,i,r,o=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xE(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function ox(n,t,e){let i=new Map;F(n.length===e.length);for(let r=0;r<e.length;r++){let o=n[r],s=o.transform,a=t.data.field(o.field);i.set(o.field,f1(s,a,e[r]))}return i}function sx(n,t,e){let i=new Map;for(let r of n){let o=r.transform,s=e.data.field(r.field);i.set(r.field,h1(o,s,t))}return i}var gi=class extends _o{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ea=class extends _o{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ia=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(t.key)&&p1(o,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=ma(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=ma(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=fE();return this.mutations.forEach(r=>{let o=t.get(r.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=e.has(r.key)?null:a;let c=wE(s,a);c!==null&&i.set(r.key,c),s.isValidDocument()||s.convertToNoDocument(L.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),H())}isEqual(t){return this.batchId===t.batchId&&ho(this.mutations,t.mutations,(e,i)=>rx(e,i))&&ho(this.baseMutations,t.baseMutations,(e,i)=>rx(e,i))}},tp=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){F(t.mutations.length===i.length);let r=function(){return l1}(),o=t.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new n(t,e,i,r)}};var Ta=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ep=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var Vt,tt;function EE(n){switch(n){default:return R();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function IE(n){if(n===void 0)return kt("GRPC error has no .code"),g.UNKNOWN;switch(n){case Vt.OK:return g.OK;case Vt.CANCELLED:return g.CANCELLED;case Vt.UNKNOWN:return g.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return g.INTERNAL;case Vt.UNAVAILABLE:return g.UNAVAILABLE;case Vt.UNAUTHENTICATED:return g.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case Vt.NOT_FOUND:return g.NOT_FOUND;case Vt.ALREADY_EXISTS:return g.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return g.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case Vt.ABORTED:return g.ABORTED;case Vt.OUT_OF_RANGE:return g.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return g.UNIMPLEMENTED;case Vt.DATA_LOSS:return g.DATA_LOSS;default:return R()}}(tt=Vt||(Vt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";var ax=null;function TE(){return new TextEncoder}var _1=new qi([4294967295,4294967295],0);function cx(n){let t=TE().encode(n),e=new Uw;return e.update(t),new Uint8Array(e.digest())}function lx(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new qi([e,i],0),new qi([r,o],0)]}var np=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Yi(`Invalid padding: ${e}`);if(i<0)throw new Yi(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=qi.fromNumber(this.Te)}de(t,e,i){let r=t.add(e.multiply(qi.fromNumber(i)));return r.compare(_1)===1&&(r=new qi([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;let e=cx(t),[i,r]=lx(e);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);if(!this.Ae(s))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,o=new Uint8Array(Math.ceil(t/8)),s=new n(o,r,e);return i.forEach(a=>s.insert(a)),s}insert(t){if(this.Te===0)return;let e=cx(t),[i,r]=lx(e);for(let o=0;o<this.hashCount;o++){let s=this.de(i,r,o);this.Re(s)}}Re(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},Yi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Aa=class n{constructor(t,e,i,r,o){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,Ca.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(L.min(),r,new mt(z),ye(),H())}},Ca=class n{constructor(t,e,i,r,o){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,H(),H(),H())}};var uo=class{constructor(t,e,i,r){this.Ve=t,this.removedTargetIds=e,this.key=i,this.me=r}},ad=class{constructor(t,e){this.targetId=t,this.fe=e}},cd=class{constructor(t,e,i=Yt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},ld=class{constructor(){this.ge=0,this.pe=ux(),this.ye=Yt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=H(),e=H(),i=H();return this.pe.forEach((r,o)=>{switch(o){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:R()}}),new Ca(this.ye,this.we,t,e,i)}Fe(){this.Se=!1,this.pe=ux()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,F(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},ip=class{constructor(t){this.Le=t,this.ke=new Map,this.qe=ye(),this.Qe=dx(),this.Ke=new mt(z)}$e(t){for(let e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(let e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,e=>{let i=this.ze(e);switch(t.state){case 0:this.je(e)&&i.Ce(t.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(t.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(e);break;case 3:this.je(e)&&(i.Be(),i.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),i.Ce(t.resumeToken));break;default:R()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach((i,r)=>{this.je(r)&&e(r)})}Je(t){let e=t.targetId,i=t.fe.count,r=this.Ye(e);if(r){let o=r.target;if(rd(o))if(i===0){let s=new T(o.path);this.We(e,s,Ut.newNoDocument(s,L.min()))}else F(i===1);else{let s=this.Ze(e);if(s!==i){let a=this.Xe(t),c=a?this.et(a,t,s):1;if(c!==0){this.He(e);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,l)}ax?.tt(function(d,u,h,f,y){var b,w,O,B,P,K;let X={localCacheCount:d,existenceFilterCount:u.count,databaseId:h.database,projectId:h.projectId},it=u.unchangedNames;return it&&(X.bloomFilter={applied:y===0,hashCount:(b=it?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(B=(O=(w=it?.bits)===null||w===void 0?void 0:w.bitmap)===null||O===void 0?void 0:O.length)!==null&&B!==void 0?B:0,padding:(K=(P=it?.bits)===null||P===void 0?void 0:P.padding)!==null&&K!==void 0?K:0,mightContain:Nt=>{var tn;return(tn=f?.mightContain(Nt))!==null&&tn!==void 0&&tn}}),X}(s,t.fe,this.Le.nt(),a,c))}}}}Xe(t){let e=t.fe.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=e,s,a;try{s=di(i).toUint8Array()}catch(c){if(c instanceof ed)return Ue("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new np(s,r,o)}catch(c){return Ue(c instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(t,e,i){return e.fe.count===i-this.rt(t,e.targetId)?0:2}rt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;t.mightContain(a)||(this.We(e,o,null),r++)}),r}it(t){let e=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&rd(a.target)){let c=new T(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,Ut.newNoDocument(c,t))}o.De&&(e.set(s,o.ve()),o.Fe())}});let i=H();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(t));let r=new Aa(t,e,this.Ke,this.qe,i);return this.qe=ye(),this.Qe=dx(),this.Ke=new mt(z),r}Ue(t,e){if(!this.je(t))return;let i=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,i),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,i){if(!this.je(t))return;let r=this.ze(t);this.st(t,e)?r.Me(e,1):r.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),i&&(this.qe=this.qe.insert(e,i))}removeTarget(t){this.ke.delete(t)}Ze(t){let e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new ld,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new dt(z),this.Qe=this.Qe.insert(t,e)),e}je(t){let e=this.Ye(t)!==null;return e||x("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){let e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new ld),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.We(t,e,null)})}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function dx(){return new mt(T.comparator)}function ux(){return new mt(T.comparator)}var b1={asc:"ASCENDING",desc:"DESCENDING"},v1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y1={and:"AND",or:"OR"},rp=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function op(n,t){return n.useProto3Json||Ba(t)?t:{value:t}}function bo(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function AE(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function w1(n,t){return bo(n,t.toTimestamp())}function Mt(n){return F(!!n),L.fromTimestamp(function(e){let i=li(e);return new vt(i.seconds,i.nanos)}(n))}function kg(n,t){return sp(n,t).canonicalString()}function sp(n,t){let e=function(r){return new et(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function CE(n){let t=et.fromString(n);return F(VE(t)),t}function Sa(n,t){return kg(n.databaseId,t.path)}function mn(n,t){let e=CE(t);if(e.get(1)!==n.databaseId.projectId)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new v(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new T(RE(e))}function SE(n,t){return kg(n.databaseId,t)}function DE(n){let t=CE(n);return t.length===4?et.emptyPath():RE(t)}function ap(n){return new et(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RE(n){return F(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hx(n,t,e){return{name:Sa(n,t),fields:e.value.mapValue.fields}}function kE(n,t,e){let i=mn(n,t.name),r=Mt(t.updateTime),o=t.createTime?Mt(t.createTime):L.min(),s=new se({mapValue:{fields:t.fields}}),a=Ut.newFoundDocument(i,r,o,s);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function x1(n,t){return"found"in t?function(i,r){F(!!r.found),r.found.name,r.found.updateTime;let o=mn(i,r.found.name),s=Mt(r.found.updateTime),a=r.found.createTime?Mt(r.found.createTime):L.min(),c=new se({mapValue:{fields:r.found.fields}});return Ut.newFoundDocument(o,s,a,c)}(n,t):"missing"in t?function(i,r){F(!!r.missing),F(!!r.readTime);let o=mn(i,r.missing),s=Mt(r.readTime);return Ut.newNoDocument(o,s)}(n,t):R()}function E1(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:R()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],o=function(l,d){return l.useProto3Json?(F(d===void 0||typeof d=="string"),Yt.fromBase64String(d||"")):(F(d===void 0||d instanceof Uint8Array),Yt.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(l){let d=l.code===void 0?g.UNKNOWN:IE(l.code);return new v(d,l.message||"")}(s);e=new cd(i,r,o,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=mn(n,i.document.name),o=Mt(i.document.updateTime),s=i.document.createTime?Mt(i.document.createTime):L.min(),a=new se({mapValue:{fields:i.document.fields}}),c=Ut.newFoundDocument(r,o,s,a),l=i.targetIds||[],d=i.removedTargetIds||[];e=new uo(l,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=mn(n,i.document),o=i.readTime?Mt(i.readTime):L.min(),s=Ut.newNoDocument(r,o),a=i.removedTargetIds||[];e=new uo([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=mn(n,i.document),o=i.removedTargetIds||[];e=new uo([],o,r,null)}else{if(!("filter"in t))return R();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new ep(r,o),a=i.targetId;e=new ad(a,s)}}return e}function Da(n,t){let e;if(t instanceof pi)e={update:hx(n,t.key,t.value)};else if(t instanceof gi)e={delete:Sa(n,t.key)};else if(t instanceof Xe)e={update:hx(n,t.key,t.data),updateMask:D1(t.fieldMask)};else{if(!(t instanceof Ea))return R();e={verify:Sa(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(o,s){let a=s.transform;if(a instanceof fi)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Mn)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Nn)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof mi)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw R()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:w1(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:R()}(n,t.precondition)),e}function cp(n,t){let e=t.currentDocument?function(o){return o.updateTime!==void 0?Tt.updateTime(Mt(o.updateTime)):o.exists!==void 0?Tt.exists(o.exists):Tt.none()}(t.currentDocument):Tt.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,a){let c=null;if("setToServerValue"in a)F(a.setToServerValue==="REQUEST_TIME"),c=new fi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Mn(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Nn(d)}else"increment"in a?c=new mi(s,a.increment):R();let l=Pt.fromServerFormat(a.fieldPath);return new nr(l,c)}(n,r)):[];if(t.update){t.update.name;let r=mn(n,t.update.name),o=new se({mapValue:{fields:t.update.fields}});if(t.updateMask){let s=function(c){let l=c.fieldPaths||[];return new Re(l.map(d=>Pt.fromServerFormat(d)))}(t.updateMask);return new Xe(r,o,s,e,i)}return new pi(r,o,e,i)}if(t.delete){let r=mn(n,t.delete);return new gi(r,e)}if(t.verify){let r=mn(n,t.verify);return new Ea(r,e)}return R()}function I1(n,t){return n&&n.length>0?(F(t!==void 0),n.map(e=>function(r,o){let s=r.updateTime?Mt(r.updateTime):Mt(o);return s.isEqual(L.min())&&(s=Mt(o)),new Jm(s,r.transformResults||[])}(e,t))):[]}function PE(n,t){return{documents:[SE(n,t.path)]}}function ME(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=SE(n,r);let o=function(l){if(l.length!==0)return FE(ct.create(l,"and"))}(t.filters);o&&(e.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(d=>function(h){return{field:ro(h.field),direction:A1(h.dir)}}(d))}(t.orderBy);s&&(e.structuredQuery.orderBy=s);let a=op(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ut:e,parent:r}}function NE(n){let t=DE(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){F(i===1);let d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let o=[];e.where&&(o=function(u){let h=OE(u);return h instanceof ct&&Sg(h)?h.getFilters():[h]}(e.where));let s=[];e.orderBy&&(s=function(u){return u.map(h=>function(y){return new tr(oo(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(h))}(e.orderBy));let a=null;e.limit&&(a=function(u){let h;return h=typeof u=="object"?u.value:u,Ba(h)?null:h}(e.limit));let c=null;e.startAt&&(c=function(u){let h=!!u.before,f=u.values||[];return new _n(f,h)}(e.startAt));let l=null;return e.endAt&&(l=function(u){let h=!u.before,f=u.values||[];return new _n(f,h)}(e.endAt)),aE(t,r,s,o,a,"F",c,l)}function T1(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return R()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function OE(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=oo(e.unaryFilter.field);return Z.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=oo(e.unaryFilter.field);return Z.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=oo(e.unaryFilter.field);return Z.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=oo(e.unaryFilter.field);return Z.create(s,"!=",{nullValue:"NULL_VALUE"});default:return R()}}(n):n.fieldFilter!==void 0?function(e){return Z.create(oo(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return R()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return ct.create(e.compositeFilter.filters.map(i=>OE(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return R()}}(e.compositeFilter.op))}(n):R()}function A1(n){return b1[n]}function C1(n){return v1[n]}function S1(n){return y1[n]}function ro(n){return{fieldPath:n.canonicalString()}}function oo(n){return Pt.fromServerFormat(n.fieldPath)}function FE(n){return n instanceof Z?function(e){if(e.op==="=="){if(Qw(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NAN"}};if(Kw(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Qw(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NAN"}};if(Kw(e.value))return{unaryFilter:{field:ro(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ro(e.field),op:C1(e.op),value:e.value}}}(n):n instanceof ct?function(e){let i=e.getFilters().map(r=>FE(r));return i.length===1?i[0]:{compositeFilter:{op:S1(e.op),filters:i}}}(n):R()}function D1(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function VE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var vo=class n{constructor(t,e,i,r,o=L.min(),s=L.min(),a=Yt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var dd=class{constructor(t){this.ct=t}};function R1(n,t){let e;if(t.document)e=kE(n.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let i=T.fromSegments(t.noDocument.path),r=rr(t.noDocument.readTime);e=Ut.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return R();{let i=T.fromSegments(t.unknownDocument.path),r=rr(t.unknownDocument.version);e=Ut.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(r){let o=new vt(r[0],r[1]);return L.fromTimestamp(o)}(t.readTime)),e}function fx(n,t){let e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:ud(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(o,s){return{name:Sa(o,s.key),fields:s.data.value.mapValue.fields,updateTime:bo(o,s.version.toTimestamp()),createTime:bo(o,s.createTime.toTimestamp())}}(n.ct,t);else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:ir(t.version)};else{if(!t.isUnknownDocument())return R();i.unknownDocument={path:e.path.toArray(),version:ir(t.version)}}return i}function ud(n){let t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function ir(n){let t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function rr(n){let t=new vt(n.seconds,n.nanoseconds);return L.fromTimestamp(t)}function Wi(n,t){let e=(t.baseMutations||[]).map(o=>cp(n.ct,o));for(let o=0;o<t.mutations.length-1;++o){let s=t.mutations[o];if(o+1<t.mutations.length&&t.mutations[o+1].transform!==void 0){let a=t.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}let i=t.mutations.map(o=>cp(n.ct,o)),r=vt.fromMillis(t.localWriteTimeMs);return new Ia(t.batchId,r,e,i)}function ua(n){let t=rr(n.readTime),e=n.lastLimboFreeSnapshotVersion!==void 0?rr(n.lastLimboFreeSnapshotVersion):L.min(),i;return i=function(o){return o.documents!==void 0}(n.query)?function(o){return F(o.documents.length===1),ue(Do(DE(o.documents[0])))}(n.query):function(o){return ue(NE(o))}(n.query),new vo(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,t,e,Yt.fromBase64String(n.resumeToken))}function LE(n,t){let e=ir(t.snapshotVersion),i=ir(t.lastLimboFreeSnapshotVersion),r;r=rd(t.target)?PE(n.ct,t.target):ME(n.ct,t.target).ut;let o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:er(t.target),readTime:e,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Pg(n){let t=NE({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sd(t,t.limit,"L"):t}function Em(n,t){return new Ta(t.largestBatchId,cp(n.ct,t.overlayMutation))}function mx(n,t){let e=t.path.lastSegment();return[n,de(t.path.popLast()),e]}function px(n,t,e,i){return{indexId:n,uid:t,sequenceNumber:e,readTime:ir(i.readTime),documentKey:de(i.documentKey.path),largestBatchId:i.largestBatchId}}var lp=class{getBundleMetadata(t,e){return gx(t).get(e).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:rr(o.createTime),version:o.version}}(i)})}saveBundleMetadata(t,e){return gx(t).put(function(r){return{bundleId:r.id,createTime:ir(Mt(r.createTime)),version:r.version}}(e))}getNamedQuery(t,e){return _x(t).get(e).next(i=>{if(i)return function(o){return{name:o.name,query:Pg(o.bundledQuery),readTime:rr(o.readTime)}}(i)})}saveNamedQuery(t,e){return _x(t).put(function(r){return{name:r.name,readTime:ir(Mt(r.readTime)),bundledQuery:r.bundledQuery}}(e))}};function gx(n){return Xt(n,"bundles")}function _x(n){return Xt(n,"namedQueries")}var hd=class n{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){let i=e.uid||"";return new n(t,i)}getOverlay(t,e){return sa(t).get(mx(this.userId,e)).next(i=>i?Em(this.serializer,i):null)}getOverlays(t,e){let i=hn();return m.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){let r=[];return i.forEach((o,s)=>{let a=new Ta(e,s);r.push(this.ht(t,a))}),m.waitFor(r)}removeOverlaysForBatchId(t,e,i){let r=new Set;e.forEach(s=>r.add(de(s.getCollectionPath())));let o=[];return r.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(sa(t).H("collectionPathOverlayIndex",a))}),m.waitFor(o)}getOverlaysForCollection(t,e,i){let r=hn(),o=de(e),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return sa(t).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=Em(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(t,e,i,r){let o=hn(),s,a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return sa(t).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let u=Em(this.serializer,l);o.size()<r||u.largestBatchId===s?(o.set(u.getKey(),u),s=u.largestBatchId):d.done()}).next(()=>o)}ht(t,e){return sa(t).put(function(r,o,s){let[a,c,l]=mx(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Da(r.ct,s.mutation)}}(this.serializer,this.userId,e))}};function sa(n){return Xt(n,"documentOverlays")}var Rn=class{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(It(t.integerValue));else if("doubleValue"in t){let i=It(t.doubleValue);isNaN(i)?this.Et(e,13):(this.Et(e,15),ba(i)?e.dt(0):e.dt(i))}else if("timestampValue"in t){let i=t.timestampValue;this.Et(e,20),typeof i=="string"?e.At(i):(e.At(`${i.seconds||""}`),e.dt(i.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(di(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.Et(e,45),e.dt(i.latitude||0),e.dt(i.longitude||0)}else"mapValue"in t?tE(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):R()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){let i=t.fields||{};this.Et(e,55);for(let r of Object.keys(i))this.Rt(r,e),this.It(i[r],e)}wt(t,e){let i=t.values||[];this.Et(e,50);for(let r of i)this.It(r,e)}gt(t,e){this.Et(e,37),T.fromName(t).path.forEach(i=>{this.Et(e,60),this.St(i,e)})}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}};Rn.bt=new Rn;function k1(n){if(n===0)return 8;let t=0;return!(n>>4)&&(t+=4,n<<=4),!(n>>6)&&(t+=2,n<<=2),!(n>>7)&&(t+=1),t}function bx(n){let t=64-function(i){let r=0;for(let o=0;o<8;++o){let s=k1(255&i[o]);if(r+=s,s!==8)break}return r}(n);return Math.ceil(t/8)}var dp=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Ct(i.value),i=e.next();this.vt()}Ft(t){let e=t[Symbol.iterator](),i=e.next();for(;!i.done;)this.Mt(i.value),i=e.next();this.xt()}Ot(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=e.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(t){for(let e of t){let i=e.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(e<"\uD800"||"\uDBFF"<e)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=e.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Bt(t){let e=this.Lt(t),i=bx(e);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}qt(t){let e=this.Lt(t),i=bx(e);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Lt(t){let e=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(t),i=(128&e[0])!=0;e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}Ct(t){let e=255&t;e===0?(this.Kt(0),this.Kt(255)):e===255?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){let e=255&t;e===0?(this.Ut(0),this.Ut(255)):e===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){let e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},up=class{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Bt(t)}Tt(){this.Gt.Qt()}},hp=class{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}},Ki=class{constructor(){this.Gt=new dp,this.zt=new up(this.Gt),this.jt=new hp(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return t===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Qi=class n{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}Jt(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function ni(n,t){let e=n.indexId-t.indexId;return e!==0?e:(e=vx(n.arrayValue,t.arrayValue),e!==0?e:(e=vx(n.directionalValue,t.directionalValue),e!==0?e:T.comparator(n.documentKey,t.documentKey)))}function vx(n,t){for(let e=0;e<n.length&&e<t.length;++e){let i=n[e]-t[e];if(i!==0)return i}return n.length-t.length}var fd=class{constructor(t){this.Yt=new dt((e,i)=>Pt.comparator(e.field,i.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(let e of t.filters){let i=e;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(t){if(F(t.collectionGroup===this.collectionId),this.en)return!1;let e=Nm(t);if(e!==void 0&&!this.nn(e))return!1;let i=Gi(t),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<i.length;++o){let a=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let t=new dt(Pt.comparator),e=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")e.push(new co(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),e.push(new co(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||t.has(i.field)||(t=t.add(i.field),e.push(new co(i.field,i.dir==="asc"?0:1)));return new fo(fo.UNKNOWN_ID,this.collectionId,e,_a.empty())}nn(t){for(let e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let i=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===i}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc")}};function jE(n){var t,e;if(F(n instanceof Z||n instanceof ct),n instanceof Z){if(n instanceof id){let r=((e=(t=n.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(o=>Z.create(n.field,"==",o)))||[];return ct.create(r,"or")}return n}let i=n.filters.map(r=>jE(r));return ct.create(i,n.op)}function P1(n){if(n.getFilters().length===0)return[];let t=pp(jE(n));return F(BE(t)),fp(t)||mp(t)?[t]:t.getFilters()}function fp(n){return n instanceof Z}function mp(n){return n instanceof ct&&Sg(n)}function BE(n){return fp(n)||mp(n)||function(e){if(e instanceof ct&&zm(e)){for(let i of e.getFilters())if(!fp(i)&&!mp(i))return!1;return!0}return!1}(n)}function pp(n){if(F(n instanceof Z||n instanceof ct),n instanceof Z)return n;if(n.filters.length===1)return pp(n.filters[0]);let t=n.filters.map(i=>pp(i)),e=ct.create(t,n.op);return e=md(e),BE(e)?e:(F(e instanceof ct),F(po(e)),F(e.filters.length>1),e.filters.reduce((i,r)=>Mg(i,r)))}function Mg(n,t){let e;return F(n instanceof Z||n instanceof ct),F(t instanceof Z||t instanceof ct),e=n instanceof Z?t instanceof Z?function(r,o){return ct.create([r,o],"and")}(n,t):yx(n,t):t instanceof Z?yx(t,n):function(r,o){if(F(r.filters.length>0&&o.filters.length>0),po(r)&&po(o))return rE(r,o.getFilters());let s=zm(r)?r:o,a=zm(r)?o:r,c=s.filters.map(l=>Mg(l,a));return ct.create(c,"or")}(n,t),md(e)}function yx(n,t){if(po(t))return rE(t,n.getFilters());{let e=t.filters.map(i=>Mg(n,i));return ct.create(e,"or")}}function md(n){if(F(n instanceof Z||n instanceof ct),n instanceof Z)return n;let t=n.getFilters();if(t.length===1)return md(t[0]);if(nE(n))return n;let e=t.map(r=>md(r)),i=[];return e.forEach(r=>{r instanceof Z?i.push(r):r instanceof ct&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:ct.create(i,n.op)}var gp=class{constructor(){this._n=new Ra}addToCollectionParentIndex(t,e){return this._n.add(e),m.resolve()}getCollectionParents(t,e){return m.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return m.resolve()}deleteFieldIndex(t,e){return m.resolve()}deleteAllFieldIndexes(t){return m.resolve()}createTargetIndexes(t,e){return m.resolve()}getDocumentsMatchingTarget(t,e){return m.resolve(null)}getIndexType(t,e){return m.resolve(0)}getFieldIndexes(t,e){return m.resolve([])}getNextCollectionGroupToUpdate(t){return m.resolve(null)}getMinOffset(t,e){return m.resolve(ze.min())}getMinOffsetFromCollectionGroup(t,e){return m.resolve(ze.min())}updateCollectionGroup(t,e,i){return m.resolve()}updateIndexEntries(t,e){return m.resolve()}},Ra=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new dt(et.comparator),o=!r.has(i);return this.index[e]=r.add(i),o}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new dt(et.comparator)).toArray()}};var jl=new Uint8Array(0),_p=class{constructor(t,e){this.databaseId=e,this.an=new Ra,this.un=new bn(i=>er(i),(i,r)=>Ua(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){let i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.an.add(e)});let o={collectionId:i,parent:de(r)};return wx(t).put(o)}return m.resolve()}getCollectionParents(t,e){let i=[],r=IDBKeyRange.bound([e,""],[qx(e),""],!1,!0);return wx(t).W(r).next(o=>{for(let s of o){if(s.collectionId!==e)break;i.push(un(s.parent))}return i})}addFieldIndex(t,e){let i=aa(t),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(e);delete r.indexId;let o=i.add(r);if(e.indexState){let s=to(t);return o.next(a=>{s.put(px(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}return o.next()}deleteFieldIndex(t,e){let i=aa(t),r=to(t),o=Jr(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=aa(t),i=Jr(t),r=to(t);return e.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(t,e){return m.forEach(this.cn(e),i=>this.getIndexType(t,i).next(r=>{if(r===0||r===1){let o=new fd(i).on();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){let i=Jr(t),r=!0,o=new Map;return m.forEach(this.cn(e),s=>this.ln(t,s).next(a=>{r&&(r=!!a),o.set(s,a)})).next(()=>{if(r){let s=H(),a=[];return m.forEach(o,(c,l)=>{x("IndexedDbIndexManager",`Using index ${function(P){return`id=${P.indexId}|cg=${P.collectionGroup}|f=${P.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${er(e)}`);let d=function(P,K){let X=Nm(K);if(X===void 0)return null;for(let it of od(P,X.fieldPath))switch(it.op){case"array-contains-any":return it.value.arrayValue.values||[];case"array-contains":return[it.value]}return null}(l,c),u=function(P,K){let X=new Map;for(let it of Gi(K))for(let Nt of od(P,it.fieldPath))switch(Nt.op){case"==":case"in":X.set(it.fieldPath.canonicalString(),Nt.value);break;case"not-in":case"!=":return X.set(it.fieldPath.canonicalString(),Nt.value),Array.from(X.values())}return null}(l,c),h=function(P,K){let X=[],it=!0;for(let Nt of Gi(K)){let tn=Nt.kind===0?tx(P,Nt.fieldPath,P.startAt):ex(P,Nt.fieldPath,P.startAt);X.push(tn.value),it&&(it=tn.inclusive)}return new _n(X,it)}(l,c),f=function(P,K){let X=[],it=!0;for(let Nt of Gi(K)){let tn=Nt.kind===0?ex(P,Nt.fieldPath,P.endAt):tx(P,Nt.fieldPath,P.endAt);X.push(tn.value),it&&(it=tn.inclusive)}return new _n(X,it)}(l,c),y=this.hn(c,l,h),b=this.hn(c,l,f),w=this.Pn(c,l,u),O=this.In(c.indexId,d,y,h.inclusive,b,f.inclusive,w);return m.forEach(O,B=>i.j(B,e.limit).next(P=>{P.forEach(K=>{let X=T.fromSegments(K.documentKey);s.has(X)||(s=s.add(X),a.push(X))})}))}).next(()=>a)}return m.resolve(null)})}cn(t){let e=this.un.get(t);return e||(t.filters.length===0?e=[t]:e=P1(ct.create(t.filters,"and")).map(i=>Xm(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.un.set(t,e),e)}In(t,e,i,r,o,s,a){let c=(e!=null?e.length:1)*Math.max(i.length,o.length),l=c/(e!=null?e.length:1),d=[];for(let u=0;u<c;++u){let h=e?this.Tn(e[u/l]):jl,f=this.En(t,h,i[u%l],r),y=this.dn(t,h,o[u%l],s),b=a.map(w=>this.En(t,h,w,!0));d.push(...this.createRange(f,y,b))}return d}En(t,e,i,r){let o=new Qi(t,T.empty(),e,i);return r?o:o.Jt()}dn(t,e,i,r){let o=new Qi(t,T.empty(),e,i);return r?o.Jt():o}ln(t,e){let i=new fd(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(o=>{let s=null;for(let a of o)i.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(t,e){let i=2,r=this.cn(e);return m.forEach(r,o=>this.ln(t,o).next(s=>{s?i!==0&&s.fields.length<function(c){let l=new dt(Pt.comparator),d=!1;for(let u of c.filters)for(let h of u.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?d=!0:l=l.add(h.field));for(let u of c.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(d?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(e)&&r.length>1&&i===2?1:i)}An(t,e){let i=new Ki;for(let r of Gi(t)){let o=e.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);Rn.bt.Pt(o,s)}return i.Wt()}Tn(t){let e=new Ki;return Rn.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){let i=new Ki;return Rn.bt.Pt(Ji(this.databaseId,e),i.Ht(function(o){let s=Gi(o);return s.length===0?0:s[s.length-1].kind}(t))),i.Wt()}Pn(t,e,i){if(i===null)return[];let r=[];r.push(new Ki);let o=0;for(let s of Gi(t)){let a=i[o++];for(let c of r)if(this.Vn(e,s.fieldPath)&&xa(a))r=this.mn(r,s,a);else{let l=c.Ht(s.kind);Rn.bt.Pt(a,l)}}return this.fn(r)}hn(t,e,i){return this.Pn(t,e,i.position)}fn(t){let e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Wt();return e}mn(t,e,i){let r=[...t],o=[];for(let s of i.arrayValue.values||[])for(let a of r){let c=new Ki;c.seed(a.Wt()),Rn.bt.Pt(s,c.Ht(e.kind)),o.push(c)}return o}Vn(t,e){return!!t.filters.find(i=>i instanceof Z&&i.field.isEqual(e)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(t,e){let i=aa(t),r=to(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(o=>{let s=[];return m.forEach(o,a=>r.get([a.indexId,this.uid]).next(c=>{s.push(function(d,u){let h=u?new _a(u.sequenceNumber,new ze(rr(u.readTime),new T(un(u.documentKey)),u.largestBatchId)):_a.empty(),f=d.fields.map(([y,b])=>new co(Pt.fromServerFormat(y),b));return new fo(d.indexId,d.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:z(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){let r=aa(t),o=to(t);return this.gn(t).next(s=>r.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>m.forEach(a,c=>o.put(px(c.indexId,this.uid,s,i)))))}updateIndexEntries(t,e){let i=new Map;return m.forEach(e,(r,o)=>{let s=i.get(r.collectionGroup);return(s?m.resolve(s):this.getFieldIndexes(t,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),m.forEach(a,c=>this.pn(t,r,c).next(l=>{let d=this.yn(o,c);return l.isEqual(d)?m.resolve():this.wn(t,o,c,l,d)}))))})}Sn(t,e,i,r){return Jr(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,e.key),documentKey:e.key.path.toArray()})}bn(t,e,i,r){return Jr(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,e.key),e.key.path.toArray()])}pn(t,e,i){let r=Jr(t),o=new dt(ni);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,e)])},(s,a)=>{o=o.add(new Qi(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(t,e){let i=new dt(ni),r=this.An(e,t);if(r==null)return i;let o=Nm(e);if(o!=null){let s=t.data.field(o.fieldPath);if(xa(s))for(let a of s.arrayValue.values||[])i=i.add(new Qi(e.indexId,t.key,this.Tn(a),r))}else i=i.add(new Qi(e.indexId,t.key,jl,r));return i}wn(t,e,i,r,o){x("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);let s=[];return function(c,l,d,u,h){let f=c.getIterator(),y=l.getIterator(),b=Zr(f),w=Zr(y);for(;b||w;){let O=!1,B=!1;if(b&&w){let P=d(b,w);P<0?B=!0:P>0&&(O=!0)}else b!=null?B=!0:O=!0;O?(u(w),w=Zr(y)):B?(h(b),b=Zr(f)):(b=Zr(f),w=Zr(y))}}(r,o,ni,a=>{s.push(this.Sn(t,e,i,a))},a=>{s.push(this.bn(t,e,i,a))}),m.waitFor(s)}gn(t){let e=1;return to(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((s,a)=>ni(s,a)).filter((s,a,c)=>!a||ni(s,c[a-1])!==0);let r=[];r.push(t);for(let s of i){let a=ni(s,t),c=ni(s,e);if(a===0)r[0]=t.Jt();else if(a>0&&c<0)r.push(s),r.push(s.Jt());else if(c>0)break}r.push(e);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let a=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,jl,[]],c=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,jl,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(t,e){return ni(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(xx)}getMinOffset(t,e){return m.mapArray(this.cn(e),i=>this.ln(t,i).next(r=>r||R())).next(xx)}};function wx(n){return Xt(n,"collectionParents")}function Jr(n){return Xt(n,"indexEntries")}function aa(n){return Xt(n,"indexConfiguration")}function to(n){return Xt(n,"indexState")}function xx(n){F(n.length!==0);let t=n[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;Tg(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new ze(t.readTime,t.documentKey,e)}var Ex={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Be=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function UE(n,t,e){let i=n.store("mutations"),r=n.store("documentMutations"),o=[],s=IDBKeyRange.only(e.batchId),a=0,c=i.Y({range:s},(d,u,h)=>(a++,h.delete()));o.push(c.next(()=>{F(a===1)}));let l=[];for(let d of e.mutations){let u=Kx(t,d.key.path,e.batchId);o.push(r.delete(u)),l.push(d.key)}return m.waitFor(o).next(()=>l)}function pd(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw R();t=n.noDocument}return JSON.stringify(t).length}Be.DEFAULT_COLLECTION_PERCENTILE=10,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Be.DEFAULT=new Be(41943040,Be.DEFAULT_COLLECTION_PERCENTILE,Be.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Be.DISABLED=new Be(-1,0,0);var gd=class n{constructor(t,e,i,r){this.userId=t,this.serializer=e,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(t,e,i,r){F(t.uid!=="");let o=t.isAuthenticated()?t.uid:"";return new n(o,e,i,r)}checkEmpty(t){let e=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ii(t).Y({index:"userMutationsIndex",range:i},(r,o,s)=>{e=!1,s.done()}).next(()=>e)}addMutationBatch(t,e,i,r){let o=so(t),s=ii(t);return s.add({}).next(a=>{F(typeof a=="number");let c=new Ia(a,e,i,r),l=function(f,y,b){let w=b.baseMutations.map(B=>Da(f.ct,B)),O=b.mutations.map(B=>Da(f.ct,B));return{userId:y,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:w,mutations:O}}(this.serializer,this.userId,c),d=[],u=new dt((h,f)=>z(h.canonicalString(),f.canonicalString()));for(let h of r){let f=Kx(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),d.push(s.put(l)),d.push(o.put(f,jP))}return u.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(t,h))}),t.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),m.waitFor(d).next(()=>c)})}lookupMutationBatch(t,e){return ii(t).get(e).next(i=>i?(F(i.userId===this.userId),Wi(this.serializer,i)):null)}vn(t,e){return this.Cn[e]?m.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){let r=i.keys();return this.Cn[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return ii(t).Y({index:"userMutationsIndex",range:r},(s,a,c)=>{a.userId===this.userId&&(F(a.batchId>=i),o=Wi(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return ii(t).Y({index:"userMutationsIndex",range:e,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ii(t).W("userMutationsIndex",e).next(i=>i.map(r=>Wi(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){let i=ql(this.userId,e.path),r=IDBKeyRange.lowerBound(i),o=[];return so(t).Y({range:r},(s,a,c)=>{let[l,d,u]=s,h=un(d);if(l===this.userId&&e.path.isEqual(h))return ii(t).get(u).next(f=>{if(!f)throw R();F(f.userId===this.userId),o.push(Wi(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new dt(z),r=[];return e.forEach(o=>{let s=ql(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=so(t).Y({range:a},(l,d,u)=>{let[h,f,y]=l,b=un(f);h===this.userId&&o.path.isEqual(b)?i=i.add(y):u.done()});r.push(c)}),m.waitFor(r).next(()=>this.Fn(t,i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=ql(this.userId,i),s=IDBKeyRange.lowerBound(o),a=new dt(z);return so(t).Y({range:s},(c,l,d)=>{let[u,h,f]=c,y=un(h);u===this.userId&&i.isPrefixOf(y)?y.length===r&&(a=a.add(f)):d.done()}).next(()=>this.Fn(t,a))}Fn(t,e){let i=[],r=[];return e.forEach(o=>{r.push(ii(t).get(o).next(s=>{if(s===null)throw R();F(s.userId===this.userId),i.push(Wi(this.serializer,s))}))}),m.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return UE(t.ae,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.Mn(e.batchId)}),m.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return m.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return so(t).Y({range:i},(o,s,a)=>{if(o[0]===this.userId){let c=un(o[1]);r.push(c)}else a.done()}).next(()=>{F(r.length===0)})})}containsKey(t,e){return zE(t,this.userId,e)}xn(t){return qE(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function zE(n,t,e){let i=ql(t,e.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return so(n).Y({range:o,J:!0},(a,c,l)=>{let[d,u,h]=a;d===t&&u===r&&(s=!0),l.done()}).next(()=>s)}function ii(n){return Xt(n,"mutations")}function so(n){return Xt(n,"documentMutations")}function qE(n){return Xt(n,"mutationQueues")}var yo=class n{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new n(0)}static Bn(){return new n(-1)}};var bp=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Ln(t).next(e=>{let i=new yo(e.highestTargetId);return e.highestTargetId=i.next(),this.kn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Ln(t).next(e=>L.fromTimestamp(new vt(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Ln(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Ln(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.kn(t,r)))}addTargetData(t,e){return this.qn(t,e).next(()=>this.Ln(t).next(i=>(i.targetCount+=1,this.Qn(e,i),this.kn(t,i))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>eo(t).delete(e.targetId)).next(()=>this.Ln(t)).next(i=>(F(i.targetCount>0),i.targetCount-=1,this.kn(t,i)))}removeTargets(t,e,i){let r=0,o=[];return eo(t).Y((s,a)=>{let c=ua(a);c.sequenceNumber<=e&&i.get(c.targetId)===null&&(r++,o.push(this.removeTargetData(t,c)))}).next(()=>m.waitFor(o)).next(()=>r)}forEachTarget(t,e){return eo(t).Y((i,r)=>{let o=ua(r);e(o)})}Ln(t){return Ix(t).get("targetGlobalKey").next(e=>(F(e!==null),e))}kn(t,e){return Ix(t).put("targetGlobalKey",e)}qn(t,e){return eo(t).put(LE(this.serializer,e))}Qn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Ln(t).next(e=>e.targetCount)}getTargetData(t,e){let i=er(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return eo(t).Y({range:r,index:"queryTargetsIndex"},(s,a,c)=>{let l=ua(a);Ua(e,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(t,e,i){let r=[],o=ri(t);return e.forEach(s=>{let a=de(s.path);r.push(o.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(t,i,s))}),m.waitFor(r)}removeMatchingKeys(t,e,i){let r=ri(t);return m.forEach(e,o=>{let s=de(o.path);return m.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(t,i,o)])})}removeMatchingKeysForTargetId(t,e){let i=ri(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){let i=IDBKeyRange.bound([e],[e+1],!1,!0),r=ri(t),o=H();return r.Y({range:i,J:!0},(s,a,c)=>{let l=un(s[1]),d=new T(l);o=o.add(d)}).next(()=>o)}containsKey(t,e){let i=de(e.path),r=IDBKeyRange.bound([i],[qx(i)],!1,!0),o=0;return ri(t).Y({index:"documentTargetsIndex",J:!0,range:r},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(t,e){return eo(t).get(e).next(i=>i?ua(i):null)}};function eo(n){return Xt(n,"targets")}function Ix(n){return Xt(n,"targetGlobal")}function ri(n){return Xt(n,"targetDocuments")}function Tx([n,t],[e,i]){let r=z(n,e);return r===0?z(t,i):r}var vp=class{constructor(t){this.Kn=t,this.buffer=new dt(Tx),this.$n=0}Un(){return++this.$n}Wn(t){let e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{let i=this.buffer.last();Tx(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}},yp=class{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(t){x("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>_(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){vi(e)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):yield bi(e)}yield this.zn(3e5)}))}},wp=class{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(e===0)return m.resolve(De._e);let i=new vp(e);return this.jn.forEachTarget(t,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(t,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.jn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===-1?(x("LruGarbageCollector","Garbage collection skipped; disabled"),m.resolve(Ex)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ex):this.Yn(t,e))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let i,r,o,s,a,c,l,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),r=this.params.maximumSequenceNumbersToCollect):r=u,s=Date.now(),this.nthSequenceNumber(t,r))).next(u=>(i=u,a=Date.now(),this.removeTargets(t,i,e))).next(u=>(o=u,c=Date.now(),this.removeOrphanedDocuments(t,i))).next(u=>(l=Date.now(),no()<=rn.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${r} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${u} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),m.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:u})))}};function M1(n,t){return new wp(n,t)}var xp=class{constructor(t,e){this.db=t,this.garbageCollector=M1(this,e)}Hn(t){let e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}Zn(t){let e=0;return this.Jn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,(i,r)=>e(r))}addReference(t,e,i){return Bl(t,i)}removeReference(t,e,i){return Bl(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return Bl(t,e)}er(t,e){return function(r,o){let s=!1;return qE(r).Z(a=>zE(r,a,o).next(c=>(c&&(s=!0),m.resolve(!c)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(t,(s,a)=>{if(a<=e){let c=this.er(t,s).next(l=>{if(!l)return o++,i.getEntry(t,s).next(()=>(i.removeEntry(s,L.min()),ri(t).delete(function(u){return[0,de(u.path)]}(s))))});r.push(c)}}).next(()=>m.waitFor(r)).next(()=>i.apply(t)).next(()=>o)}removeTarget(t,e){let i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return Bl(t,e)}Xn(t,e){let i=ri(t),r,o=De._e;return i.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==De._e&&e(new T(un(r)),o),o=l,r=c):o=De._e}).next(()=>{o!==De._e&&e(new T(un(r)),o)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function Bl(n,t){return ri(n).put(function(i,r){return{targetId:0,path:de(i.path),sequenceNumber:r}}(t,n.currentSequenceNumber))}var _d=class{constructor(){this.changes=new bn(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Ut.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?m.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var Ep=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return $i(t).put(i)}removeEntry(t,e,i){return $i(t).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ud(s),a[a.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.tr(t,i)))}getEntry(t,e){let i=Ut.newInvalidDocument(e);return $i(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ca(e))},(r,o)=>{i=this.nr(e,o)}).next(()=>i)}rr(t,e){let i={size:0,document:Ut.newInvalidDocument(e)};return $i(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(ca(e))},(r,o)=>{i={document:this.nr(e,o),size:pd(o)}}).next(()=>i)}getEntries(t,e){let i=ye();return this.ir(t,e,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(t,e){let i=ye(),r=new mt(T.comparator);return this.ir(t,e,(o,s)=>{let a=this.nr(o,s);i=i.insert(o,a),r=r.insert(o,pd(s))}).next(()=>({documents:i,_r:r}))}ir(t,e,i){if(e.isEmpty())return m.resolve();let r=new dt(Sx);e.forEach(c=>r=r.add(c));let o=IDBKeyRange.bound(ca(r.first()),ca(r.last())),s=r.getIterator(),a=s.getNext();return $i(t).Y({index:"documentKeyIndex",range:o},(c,l,d)=>{let u=T.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Sx(a,u)<0;)i(a,null),a=s.getNext();a&&a.isEqual(u)&&(i(a,l),a=s.hasNext()?s.getNext():null),a?d.U(ca(a)):d.done()}).next(()=>{for(;a;)i(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(t,e,i,r,o){let s=e.path,a=[s.popLast().toArray(),s.lastSegment(),ud(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return $i(t).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let d=ye();for(let u of l){let h=this.nr(T.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(qa(e,h)||r.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(t,e,i,r){let o=ye(),s=Cx(e,i),a=Cx(e,ze.max());return $i(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,d)=>{let u=this.nr(T.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(u.key,u),o.size===r&&d.done()}).next(()=>o)}newChangeBuffer(t){return new Ip(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Ax(t).get("remoteDocumentGlobalKey").next(e=>(F(!!e),e))}tr(t,e){return Ax(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){let i=R1(this.serializer,e);if(!(i.isNoDocument()&&i.version.isEqual(L.min())))return i}return Ut.newInvalidDocument(t)}};function $E(n){return new Ep(n)}var Ip=class extends _d{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new bn(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){let e=[],i=0,r=new dt((o,s)=>z(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(e.push(this.ar.removeEntry(t,o,a.readTime)),s.isValidDocument()){let c=fx(this.ar.serializer,s);r=r.add(o.path.popLast());let l=pd(c);i+=l-a.size,e.push(this.ar.addEntry(t,o,c))}else if(i-=a.size,this.trackRemovals){let c=fx(this.ar.serializer,s.convertToNoDocument(L.min()));e.push(this.ar.addEntry(t,o,c))}}),r.forEach(o=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,o))}),e.push(this.ar.updateMetadata(t,i)),m.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next(i=>(this.ur.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.ar.sr(t,e).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function Ax(n){return Xt(n,"remoteDocumentGlobal")}function $i(n){return Xt(n,"remoteDocumentsV14")}function ca(n){let t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Cx(n,t){let e=t.documentKey.path.toArray();return[n,ud(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Sx(n,t){let e=n.path.toArray(),i=t.path.toArray(),r=0;for(let o=0;o<e.length-2&&o<i.length-2;++o)if(r=z(e[o],i[o]),r)return r;return r=z(e.length,i.length),r||(r=z(e[e.length-2],i[i.length-2]),r||z(e[e.length-1],i[i.length-1]))}var Tp=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var bd=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&ma(i.mutation,r,Re.empty(),vt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,H()).next(()=>i))}getLocalViewOfDocuments(t,e,i=H()){let r=hn();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(o=>{let s=da();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(t,e){let i=hn();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,H()))}populateOverlays(t,e,i){let r=[];return i.forEach(o=>{e.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(t,r).next(o=>{o.forEach((s,a)=>{e.set(s,a)})})}computeViews(t,e,i,r){let o=ye(),s=fa(),a=function(){return fa()}();return e.forEach((c,l)=>{let d=i.get(l.key);r.has(l.key)&&(d===void 0||d.mutation instanceof Xe)?o=o.insert(l.key,l):d!==void 0?(s.set(l.key,d.mutation.getFieldMask()),ma(d.mutation,l,d.mutation.getFieldMask(),vt.now())):s.set(l.key,Re.empty())}),this.recalculateAndSaveOverlays(t,o).next(c=>(c.forEach((l,d)=>s.set(l,d)),e.forEach((l,d)=>{var u;return a.set(l,new Tp(d,(u=s.get(l))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,e){let i=fa(),r=new mt((s,a)=>s-a),o=H();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=e.get(c);if(l===null)return;let d=i.get(c)||Re.empty();d=a.applyToLocalView(l,d),i.set(c,d);let u=(r.get(a.batchId)||H()).add(c);r=r.insert(a.batchId,u)})}).next(()=>{let s=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,u=fE();d.forEach(h=>{if(!o.has(h)){let f=wE(e.get(h),i.get(h));f!==null&&u.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(t,l,u))}return m.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(s){return T.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Dg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-o.size):m.resolve(hn()),a=-1,c=o;return s.next(l=>m.forEach(l,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),o.get(d)?m.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,l,o)).next(()=>this.computeViews(t,c,l,H())).next(d=>({batchId:a,changes:hE(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new T(e)).next(i=>{let r=da();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let o=e.collectionGroup,s=da();return this.indexManager.getCollectionParents(t,o).next(a=>m.forEach(a,c=>{let l=function(u,h){return new Ye(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(e,c.child(o));return this.getDocumentsMatchingCollectionQuery(t,l,i,r).next(d=>{d.forEach((u,h)=>{s=s.insert(u,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,o,r))).next(s=>{o.forEach((c,l)=>{let d=l.getKey();s.get(d)===null&&(s=s.insert(d,Ut.newInvalidDocument(d)))});let a=da();return s.forEach((c,l)=>{let d=o.get(c);d!==void 0&&ma(d.mutation,l,Re.empty(),vt.now()),qa(e,l)&&(a=a.insert(c,l))}),a})}};var Ap=class{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return m.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Mt(r.createTime)}}(e)),m.resolve()}getNamedQuery(t,e){return m.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:Pg(r.bundledQuery),readTime:Mt(r.readTime)}}(e)),m.resolve()}};var Cp=class{constructor(){this.overlays=new mt(T.comparator),this.hr=new Map}getOverlay(t,e){return m.resolve(this.overlays.get(e))}getOverlays(t,e){let i=hn();return m.forEach(e,r=>this.getOverlay(t,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,o)=>{this.ht(t,e,o)}),m.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),m.resolve()}getOverlaysForCollection(t,e,i){let r=hn(),o=e.length+1,s=new T(e.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!e.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>i&&r.set(c.getKey(),c)}return m.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let o=new mt((l,d)=>l-d),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===e&&l.largestBatchId>i){let d=o.get(l.largestBatchId);d===null&&(d=hn(),o=o.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=hn(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=r)););return m.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new Ta(e,i));let o=this.hr.get(e);o===void 0&&(o=H(),this.hr.set(e,o)),this.hr.set(e,o.add(i.key))}};var ka=class{constructor(){this.Pr=new dt(Lt.Ir),this.Tr=new dt(Lt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){let i=new Lt(t,e);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Ar(new Lt(t,e))}Rr(t,e){t.forEach(i=>this.removeReference(i,e))}Vr(t){let e=new T(new et([])),i=new Lt(e,t),r=new Lt(e,t+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){let e=new T(new et([])),i=new Lt(e,t),r=new Lt(e,t+1),o=H();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(t){let e=new Lt(t,0),i=this.Pr.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},Lt=class{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return T.comparator(t.key,e.key)||z(t.pr,e.pr)}static Er(t,e){return z(t.pr,e.pr)||T.comparator(t.key,e.key)}};var Sp=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new dt(Lt.Ir)}checkEmpty(t){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Ia(o,e,i,r);this.mutationQueue.push(s);for(let a of r)this.wr=this.wr.add(new Lt(a.key,o)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return m.resolve(s)}lookupMutationBatch(t,e){return m.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.br(i),o=r<0?0:r;return m.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new Lt(e,0),r=new Lt(e,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let a=this.Sr(s.pr);o.push(a)}),m.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new dt(z);return e.forEach(r=>{let o=new Lt(r,0),s=new Lt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{i=i.add(a.pr)})}),m.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,o=i;T.isDocumentKey(o)||(o=o.child(""));let s=new Lt(new T(o),0),a=new dt(z);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.pr)),!0)},s),m.resolve(this.Dr(a))}Dr(t){let e=[];return t.forEach(i=>{let r=this.Sr(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){F(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return m.forEach(e.mutations,r=>{let o=new Lt(r.key,e.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=i})}Mn(t){}containsKey(t,e){let i=new Lt(e,0),r=this.wr.firstAfterOrEqual(i);return m.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,m.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){let e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var Dp=class{constructor(t){this.vr=t,this.docs=function(){return new mt(T.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return m.resolve(i?i.document.mutableCopy():Ut.newInvalidDocument(e))}getEntries(t,e){let i=ye();return e.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Ut.newInvalidDocument(r))}),m.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let o=ye(),s=e.path,a=new T(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Tg(Gx(d),i)<=0||(r.has(d.key)||qa(e,d))&&(o=o.insert(d.key,d.mutableCopy()))}return m.resolve(o)}getAllFromCollectionGroup(t,e,i,r){R()}Fr(t,e){return m.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new Rp(this)}getSize(t){return m.resolve(this.size)}},Rp=class extends _d{constructor(t){super(),this.ar=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(i)}),m.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}};var kp=class{constructor(t){this.persistence=t,this.Mr=new bn(e=>er(e),Ua),this.lastRemoteSnapshotVersion=L.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ka,this.targetCount=0,this.Br=yo.Nn()}forEachTarget(t,e){return this.Mr.forEach((i,r)=>e(r)),m.resolve()}getLastRemoteSnapshotVersion(t){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return m.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Or&&(this.Or=e),m.resolve()}qn(t){this.Mr.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Br=new yo(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,m.resolve()}updateTargetData(t,e){return this.qn(e),m.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,m.resolve()}removeTargets(t,e,i){let r=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),m.waitFor(o).next(()=>r)}getTargetCount(t){return m.resolve(this.targetCount)}getTargetData(t,e){let i=this.Mr.get(e)||null;return m.resolve(i)}addMatchingKeys(t,e,i){return this.Nr.dr(e,i),m.resolve()}removeMatchingKeys(t,e,i){this.Nr.Rr(e,i);let r=this.persistence.referenceDelegate,o=[];return r&&e.forEach(s=>{o.push(r.markPotentiallyOrphaned(t,s))}),m.waitFor(o)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),m.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Nr.gr(e);return m.resolve(i)}containsKey(t,e){return m.resolve(this.Nr.containsKey(e))}};var vd=class{constructor(t,e){this.Lr={},this.overlays={},this.kr=new De(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new kp(this),this.indexManager=new gp,this.remoteDocumentCache=function(r){return new Dp(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new dd(e),this.$r=new Ap(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Cp,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Lr[t.toKey()];return i||(i=new Sp(e,this.referenceDelegate),this.Lr[t.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,i){x("MemoryPersistence","Starting transaction:",t);let r=new Pp(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(t,e){return m.or(Object.values(this.Lr).map(i=>()=>i.containsKey(t,e)))}},Pp=class extends Zl{constructor(t){super(),this.currentSequenceNumber=t}},yd=class n{constructor(t){this.persistence=t,this.zr=new ka,this.jr=null}static Hr(t){return new n(t)}get Jr(){if(this.jr)return this.jr;throw R()}addReference(t,e,i){return this.zr.addReference(i,e),this.Jr.delete(i.toString()),m.resolve()}removeReference(t,e,i){return this.zr.removeReference(i,e),this.Jr.add(i.toString()),m.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),m.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,i=>{let r=T.fromPath(i);return this.Yr(t,r).next(o=>{o||e.removeEntry(r,L.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(i=>{i?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return m.or([()=>m.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}};var Mp=class{constructor(t){this.serializer=t}N(t,e,i,r){let o=new Jl("createOrUpgrade",e);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(t),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gw,{unique:!0}),c.createObjectStore("documentMutations")}(t),Dx(t),function(c){c.createObjectStore("remoteDocuments")}(t));let s=m.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(t),Dx(t)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:L.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gw,{unique:!0});let u=l.store("mutations"),h=d.map(f=>u.put(f));return m.waitFor(h)})}(t,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(t)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(t),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(t,o))),i<9&&r>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(t)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:XP});l.createIndex("collectionPathOverlayIndex",ZP,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",JP,{unique:!1})})(t)})),i<13&&r>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:BP});l.createIndex("documentKeyIndex",UP),l.createIndex("collectionGroupIndex",zP)}(t)).next(()=>this.ii(t,o)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(t,o))),i<15&&r>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:WP}).createIndex("sequenceNumberIndex",KP,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:QP}).createIndex("documentKeyIndex",YP,{unique:!1})}(t))),s}ei(t){let e=0;return t.store("remoteDocuments").Y((i,r)=>{e+=pd(r)}).next(()=>{let i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(t){let e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(r=>m.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",s).next(a=>m.forEach(a,c=>{F(c.userId===o.userId);let l=Wi(this.serializer,c);return UE(t,o.userId,l).next(()=>{})}))}))}ti(t){let e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.Y((s,a)=>{let c=new et(s),l=function(u){return[0,de(u)]}(c);o.push(e.get(l).next(d=>d?m.resolve():(u=>e.put({targetId:0,path:de(u),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>m.waitFor(o))})}ni(t,e){t.createObjectStore("collectionParents",{keyPath:HP});let i=e.store("collectionParents"),r=new Ra,o=s=>{if(r.add(s)){let a=s.lastSegment(),c=s.popLast();return i.put({collectionId:a,parent:de(c)})}};return e.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new et(s);return o(c.popLast())}).next(()=>e.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let d=un(a);return o(d.popLast())}))}ri(t){let e=t.store("targets");return e.Y((i,r)=>{let o=ua(r),s=LE(this.serializer,o);return e.put(s)})}ii(t,e){let i=e.store("remoteDocuments"),r=[];return i.Y((o,s)=>{let a=e.store("remoteDocumentsV14"),c=function(u){return u.document?new T(et.fromString(u.document.name).popFirst(5)):u.noDocument?T.fromSegments(u.noDocument.path):u.unknownDocument?T.fromSegments(u.unknownDocument.path):R()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(a.put(l))}).next(()=>m.waitFor(r))}si(t,e){let i=e.store("mutations"),r=$E(this.serializer),o=new vd(yd.Hr,this.serializer.ct);return i.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:H();Wi(this.serializer,c).keys().forEach(u=>d=d.add(u)),a.set(c.userId,d)}),m.forEach(a,(c,l)=>{let d=new jt(l),u=hd.lt(this.serializer,d),h=o.getIndexManager(d),f=gd.lt(d,this.serializer,h,o.referenceDelegate);return new bd(r,f,u,h).recalculateAndSaveOverlaysForDocumentKeys(new va(e,De._e),c).next()})})}};function Dx(n){n.createObjectStore("targetDocuments",{keyPath:$P}).createIndex("documentTargetsIndex",GP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",qP,{unique:!0}),n.createObjectStore("targetGlobal")}var Im="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Np=class n{constructor(t,e,i,r,o,s,a,c,l,d,u=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=d,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!n.D())throw new v(g.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xp(this,r),this.Ti=e+"main",this.serializer=new dd(c),this.Ei=new Pn(this.Ti,this.ui,new Mp(this.serializer)),this.Qr=new bp(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$E(this.serializer),this.$r=new lp,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,d===!1&&kt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,Im);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Qr.getHighestSequenceNumber(t))}).then(t=>{this.kr=new De(t,this._i)}).then(()=>{this.qr=!0}).catch(t=>(this.Ei&&this.Ei.close(),Promise.reject(t)))}fi(t){return this.Ii=e=>_(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L(e=>_(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget(()=>_(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Ul(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(t).next(e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(t)).next(e=>this.isPrimary&&!e?this.yi(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(vi(t))return x("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.oi.enqueueRetryable(()=>this.Ii(t)),this.isPrimary=t})}gi(t){return la(t).get("owner").next(e=>m.resolve(this.Si(e)))}bi(t){return Ul(t).delete(this.clientId)}Di(){return _(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let i=Xt(e,"clientMetadata");return i.W().next(r=>{let o=this.vi(r,18e5),s=r.filter(a=>o.indexOf(a)===-1);return m.forEach(s,a=>i.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let e of t)this.di.removeItem(this.Fi(e.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?m.resolve(!0):la(t).get("owner").next(e=>{if(e!==null&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new v(g.FAILED_PRECONDITION,Im);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ul(t).W().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(e=>(this.isPrimary!==e&&x("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){return _(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{let e=new va(t,De._e);return this.yi(e).next(()=>this.bi(e))}),this.Ei.close(),this.Bi()})}vi(t,e){return t.filter(i=>this.Ci(i.updateTimeMs,e)&&!this.Mi(i.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",t=>Ul(t).W().next(e=>this.vi(e,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(t,e){return gd.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new _p(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return hd.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,i){x("IndexedDbPersistence","Starting transaction:",t);let r=e==="readonly"?"readonly":"readwrite",o=function(c){return c===15?e1:c===14?Xx:c===13?Yx:c===12?t1:c===11?Qx:void R()}(this.ui),s;return this.Ei.runTransaction(t,r,o,a=>(s=new va(a,this.kr?this.kr.next():De._e),e==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw kt(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new v(g.FAILED_PRECONDITION,Hx);return i(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>i(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(t){return la(t).get("owner").next(e=>{if(e!==null&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new v(g.FAILED_PRECONDITION,Im)})}wi(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return la(t).put("owner",e)}static D(){return Pn.D()}yi(t){let e=la(t);return e.get("owner").next(i=>this.Si(i)?(x("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):m.resolve())}Ci(t,e){let i=Date.now();return!(t<i-e)&&(!(t>i)||(kt(`Detected an update time that is in the future: ${t} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ci=()=>{this.xi();let e=/(?:Version|Mobile)\/1[456]/;Tu()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{let i=((e=this.di)===null||e===void 0?void 0:e.getItem(this.Fi(t)))!==null;return x("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return kt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){kt("Failed to set zombie client id.",t)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}};function la(n){return Xt(n,"owner")}function Ul(n){return Xt(n,"clientMetadata")}function Ng(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}var Op=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.qi=i,this.Qi=r}static Ki(t,e){let i=H(),r=H();for(let o of e.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new n(t,e.fromCache,i,r)}};var Fp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var wd=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Tu()?8:Pn.v(Yo())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,i,r){let o={result:null};return this.ji(t,e).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(t,e,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Fp;return this.Ji(t,e,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(t,e,s,a.size)})}).next(()=>o.result)}Yi(t,e,i,r){return i.documentReadCount<this.Wi?(no()<=rn.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",io(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):(no()<=rn.DEBUG&&x("QueryEngine","Query:",io(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(no()<=rn.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",io(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ue(e))):m.resolve())}ji(t,e){if(nx(e))return m.resolve(null);let i=ue(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=sd(e,null,"F"),i=ue(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(o=>{let s=H(...o);return this.zi.getDocuments(t,s).next(a=>this.indexManager.getMinOffset(t,i).next(c=>{let l=this.Zi(e,a);return this.Xi(e,l,s,c.readTime)?this.ji(t,sd(e,null,"F")):this.es(t,l,e,c)}))})))}Hi(t,e,i,r){return nx(e)||r.isEqual(L.min())?m.resolve(null):this.zi.getDocuments(t,i).next(o=>{let s=this.Zi(e,o);return this.Xi(e,s,i,r)?m.resolve(null):(no()<=rn.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),io(e)),this.es(t,s,e,$x(r,-1)).next(a=>a))})}Zi(t,e){let i=new dt(dE(t));return e.forEach((r,o)=>{qa(t,o)&&(i=i.add(o))}),i}Xi(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let o=t.limitType==="F"?e.last():e.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(t,e,i){return no()<=rn.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",io(e)),this.zi.getDocumentsMatchingQuery(t,e,ze.min(),i)}es(t,e,i,r){return this.zi.getDocumentsMatchingQuery(t,i,r).next(o=>(e.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Vp=class{constructor(t,e,i,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new mt(z),this.rs=new bn(o=>er(o),Ua),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(i)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new bd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}};function GE(n,t,e,i){return new Vp(n,t,e,i)}function HE(n,t){return _(this,null,function*(){let e=C(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,e._s(t),e.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],a=[],c=H();for(let l of r){s.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of o){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(i,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function N1(n,t){let e=C(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),o=e.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let u=l.batch,h=u.keys(),f=m.resolve();return h.forEach(y=>{f=f.next(()=>d.getEntry(c,y)).next(b=>{let w=l.docVersions.get(y);F(w!==null),b.version.compareTo(w)<0&&(u.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,u))}(e,i,t,o).next(()=>o.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=H();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function WE(n){let t=C(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function O1(n,t){let e=C(n),i=t.snapshotVersion,r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;let a=[];t.targetChanges.forEach((d,u)=>{let h=r.get(u);if(!h)return;a.push(e.Qr.removeMatchingKeys(o,d.removedDocuments,u).next(()=>e.Qr.addMatchingKeys(o,d.addedDocuments,u)));let f=h.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.get(u)!==null?f=f.withResumeToken(Yt.EMPTY_BYTE_STRING,L.min()).withLastLimboFreeSnapshotVersion(L.min()):d.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(d.resumeToken,i)),r=r.insert(u,f),function(b,w,O){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(h,f,d)&&a.push(e.Qr.updateTargetData(o,f))});let c=ye(),l=H();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(KE(o,s,t.documentUpdates).next(d=>{c=d.cs,l=d.ls})),!i.isEqual(L.min())){let d=e.Qr.getLastRemoteSnapshotVersion(o).next(u=>e.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));a.push(d)}return m.waitFor(a).next(()=>s.apply(o)).next(()=>e.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(e.ns=r,o))}function KE(n,t,e){let i=H(),r=H();return e.forEach(o=>i=i.add(o)),t.getEntries(n,i).next(o=>{let s=ye();return e.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(L.min())?(t.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),s=s.insert(a,c)):x("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:r}})}function F1(n,t){let e=C(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function wo(n,t){let e=C(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.Qr.getTargetData(i,t).next(o=>o?(r=o,m.resolve(r)):e.Qr.allocateTargetId(i).next(s=>(r=new vo(t,s,"TargetPurposeListen",i.currentSequenceNumber),e.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(i.targetId,i),e.rs.set(t,i.targetId)),i})}function xo(n,t,e){return _(this,null,function*(){let i=C(n),r=i.ns.get(t),o=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!vi(s))throw s;x("LocalStore",`Failed to update sequence numbers for target ${t}: ${s}`)}i.ns=i.ns.remove(t),i.rs.delete(r.target)})}function xd(n,t,e){let i=C(n),r=L.min(),o=H();return i.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,d){let u=C(c),h=u.rs.get(d);return h!==void 0?m.resolve(u.ns.get(h)):u.Qr.getTargetData(l,d)}(i,s,ue(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>i.ts.getDocumentsMatchingQuery(s,t,e?r:L.min(),e?o:H())).next(a=>(XE(i,lE(t),a),{documents:a,hs:o})))}function QE(n,t){let e=C(n),i=C(e.Qr),r=e.ns.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",o=>i._t(o,t).next(s=>s?s.target:null))}function YE(n,t){let e=C(n),i=e.ss.get(t)||L.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.os.getAllFromCollectionGroup(r,t,$x(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(XE(e,t,r),r))}function XE(n,t,e){let i=n.ss.get(t)||L.min();e.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.ss.set(t,i)}function V1(n,t,e,i){return _(this,null,function*(){let r=C(n),o=H(),s=ye();for(let l of e){let d=t.Ps(l.metadata.name);l.document&&(o=o.add(d));let u=t.Is(l);u.setReadTime(t.Ts(l.metadata.readTime)),s=s.insert(d,u)}let a=r.os.newChangeBuffer({trackRemovals:!0}),c=yield wo(r,function(d){return ue(Do(et.fromString(`__bundle__/docs/${d}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>KE(l,a,s).next(d=>(a.apply(l),d)).next(d=>r.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,d.cs,d.ls)).next(()=>d.cs)))})}function L1(i,r){return _(this,arguments,function*(n,t,e=H()){let o=yield wo(n,ue(Pg(t.bundledQuery))),s=C(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=Mt(t.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,t);let l=o.withResumeToken(Yt.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,e,o.targetId)).next(()=>s.$r.saveNamedQuery(a,t))})})}function Rx(n,t){return`firestore_clients_${n}_${t}`}function kx(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function Tm(n,t){return`firestore_targets_${n}_${t}`}var Ed=class n{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static Es(t,e,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new v(r.error.code,r.error.message))),s?new n(t,e,r.state,o):(kt("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},pa=class n{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Es(t,e){let i=JSON.parse(e),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new v(i.error.code,i.error.message))),o?new n(t,i.state,r):(kt("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},Id=class n{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){let i=JSON.parse(e),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=Rg();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=Wx(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new n(t,o):(kt("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}},Lp=class n{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new n(e.clientId,e.onlineState):(kt("SharedClientState",`Failed to parse online state: ${t}`),null)}},Pa=class{constructor(){this.activeTargetIds=Rg()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},ga=class{constructor(t,e,i,r,o){this.window=t,this.oi=e,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new mt(z),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=Rx(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Pa),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}start(){return _(this,null,function*(){let t=yield this.syncEngine.Li();for(let i of t){if(i===this.Vs)continue;let r=this.getItem(Rx(this.persistenceKey,i));if(r){let o=Id.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let e=this.storage.getItem(this.vs);if(e){let i=this.xs(e);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Bs(t,"pending")}updateMutationState(t,e,i){this.Bs(t,e,i),this.Ls(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){let i=this.storage.getItem(Tm(this.persistenceKey,t));if(i){let r=pa.Es(t,i);r&&(e=r.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Tm(this.persistenceKey,t))}updateQueryState(t,e,i){this.qs(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ls(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return x("SharedClientState","READ",t,e),e}setItem(t,e){x("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){x("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){let e=t;if(e.storageArea===this.storage){if(x("SharedClientState","EVENT",e.key,e.newValue),e.key===this.ws)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>_(this,null,function*(){if(this.started){if(e.key!==null){if(this.bs.test(e.key)){if(e.newValue==null){let i=this.$s(e.key);return this.Us(i,null)}{let i=this.Ws(e.key,e.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(e.key)){if(e.newValue!==null){let i=this.Gs(e.key,e.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(e.key)){if(e.newValue!==null){let i=this.js(e.key,e.newValue);if(i)return this.Hs(i)}}else if(e.key===this.vs){if(e.newValue!==null){let i=this.xs(e.newValue);if(i)return this.Os(i)}}else if(e.key===this.Ss){let i=function(o){let s=De._e;if(o!=null)try{let a=JSON.parse(o);F(typeof a=="number"),s=a}catch(a){kt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(e.newValue);i!==De._e&&this.sequenceNumberHandler(i)}else if(e.key===this.Fs){let i=this.Js(e.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(e)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(t,e,i){let r=new Ed(this.currentUser,t,e,i),o=kx(this.persistenceKey,this.currentUser,t);this.setItem(o,r.ds())}Ls(t){let e=kx(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){let e={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(e))}qs(t,e,i){let r=Tm(this.persistenceKey,t),o=new pa(t,e,i);this.setItem(r,o.ds())}Ks(t){let e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){let e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){let i=this.$s(t);return Id.Es(i,e)}Gs(t,e){let i=this.Ds.exec(t),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Ed.Es(new jt(o),r,e)}js(t,e){let i=this.Cs.exec(t),r=Number(i[1]);return pa.Es(r,e)}xs(t){return Lp.Es(t)}Js(t){return JSON.parse(t)}zs(t){return _(this,null,function*(){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);x("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){let i=e?this.ps.insert(t,e):this.ps.remove(t),r=this.Ns(this.ps),o=this.Ns(i),s=[],a=[];return o.forEach(c=>{r.has(c)||s.push(c)}),r.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=i})}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=Rg();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}},Td=class{constructor(){this.no=new Pa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,i){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Pa,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var jp=class{io(t){}shutdown(){}};var Ad=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.uo)t(0)}ao(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var zl=null;function Am(){return zl===null?zl=function(){return 268435456+Math.round(2147483648*Math.random())}():zl++,"0x"+zl.toString(16)}var j1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Bp=class{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}};var oe="WebChannelConnection",Up=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=i+"://"+e.host,this.po=`projects/${r}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get wo(){return!1}So(e,i,r,o,s){let a=Am(),c=this.bo(e,i.toUriEncodedString());x("RestConnection",`Sending RPC '${e}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(e,c,l,r).then(d=>(x("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw Ue("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}vo(e,i,r,o,s,a){return this.So(e,i,r,o,s)}Do(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+So}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>e[s]=o),r&&r.headers.forEach((o,s)=>e[s]=o)}bo(e,i){let r=j1[e];return`${this.fo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,i,r){let o=Am();return new Promise((s,a)=>{let c=new Bw;c.setWithCredentials(!0),c.listenOnce(Lw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ll.NO_ERROR:let d=c.getResponseJson();x(oe,`XHR for RPC '${t}' ${o} received:`,JSON.stringify(d)),s(d);break;case Ll.TIMEOUT:x(oe,`RPC '${t}' ${o} timed out`),a(new v(g.DEADLINE_EXCEEDED,"Request time out"));break;case Ll.HTTP_ERROR:let u=c.getStatus();if(x(oe,`RPC '${t}' ${o} failed with status:`,u,"response text:",c.getResponseText()),u>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let y=function(w){let O=w.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(O)>=0?O:g.UNKNOWN}(f.status);a(new v(y,f.message))}else a(new v(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new v(g.UNAVAILABLE,"Connection failed."));break;default:R()}}finally{x(oe,`RPC '${t}' ${o} completed.`)}});let l=JSON.stringify(r);x(oe,`RPC '${t}' ${o} sending request:`,r),c.send(e,"POST",l,i,15)})}Fo(t,e,i){let r=Am(),o=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=Fw(),a=Vw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,e,i),c.encodeInitMessageHeaders=!0;let d=o.join("");x(oe,`Creating RPC '${t}' stream ${r}: ${d}`,c);let u=s.createWebChannel(d,c),h=!1,f=!1,y=new Bp({lo:w=>{f?x(oe,`Not sending because RPC '${t}' stream ${r} is closed:`,w):(h||(x(oe,`Opening RPC '${t}' stream ${r} transport.`),u.open(),h=!0),x(oe,`RPC '${t}' stream ${r} sending:`,w),u.send(w))},ho:()=>u.close()}),b=(w,O,B)=>{w.listen(O,P=>{try{B(P)}catch(K){setTimeout(()=>{throw K},0)}})};return b(u,oa.EventType.OPEN,()=>{f||x(oe,`RPC '${t}' stream ${r} transport opened.`)}),b(u,oa.EventType.CLOSE,()=>{f||(f=!0,x(oe,`RPC '${t}' stream ${r} transport closed`),y.Vo())}),b(u,oa.EventType.ERROR,w=>{f||(f=!0,Ue(oe,`RPC '${t}' stream ${r} transport errored:`,w),y.Vo(new v(g.UNAVAILABLE,"The operation could not be completed")))}),b(u,oa.EventType.MESSAGE,w=>{var O;if(!f){let B=w.data[0];F(!!B);let P=B,K=P.error||((O=P[0])===null||O===void 0?void 0:O.error);if(K){x(oe,`RPC '${t}' stream ${r} received error:`,K);let X=K.status,it=function(pT){let v_=Vt[pT];if(v_!==void 0)return IE(v_)}(X),Nt=K.message;it===void 0&&(it=g.INTERNAL,Nt="Unknown error status: "+X+" with message "+K.message),f=!0,y.Vo(new v(it,Nt)),u.close()}else x(oe,`RPC '${t}' stream ${r} received:`,B),y.mo(B)}}),b(a,jw.STAT_EVENT,w=>{w.stat===xm.PROXY?x(oe,`RPC '${t}' stream ${r} detected buffering proxy`):w.stat===xm.NOPROXY&&x(oe,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.Ro()},0),y}};function ZE(){return typeof window<"u"?window:null}function Wl(){return typeof document<"u"?document:null}function $a(n){return new rp(n,!0)}var Ma=class{constructor(t,e,i=1e3,r=1.5,o=6e4){this.oi=t,this.timerId=e,this.Mo=i,this.xo=r,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();let e=Math.floor(this.No+this.Qo()),i=Math.max(0,Date.now()-this.Lo),r=Math.max(0,e-i);r>0&&x("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Lo=Date.now(),t())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var Cd=class{constructor(t,e,i,r,o,s,a,c){this.oi=t,this.$o=i,this.Uo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ma(t,e)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return _(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(t){this.n_(),this.stream.send(t)}e_(){return _(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(t,e){return _(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,t!==4?this.jo.reset():e&&e.code===g.RESOURCE_EXHAUSTED?(kt(e.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.To(e)})}i_(){}auth(){this.state=1;let t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Wo===e&&this.o_(i,r)},i=>{t(()=>{let r=new v(g.UNKNOWN,"Fetching auth token failed: "+i.message);return this.__(r)})})}o_(t,e){let i=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po(()=>{i(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(r=>{i(()=>this.__(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Yo(){this.state=5,this.jo.qo(()=>_(this,null,function*(){this.state=0,this.start()}))}__(t){return x("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget(()=>this.Wo===t?e():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zp=class extends Cd{constructor(t,e,i,r,o,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();let e=E1(this.serializer,t),i=function(o){if(!("targetChange"in o))return L.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?L.min():s.readTime?Mt(s.readTime):L.min()}(t);return this.listener.u_(e,i)}c_(t){let e={};e.database=ap(this.serializer),e.addTarget=function(o,s){let a,c=s.target;if(a=rd(c)?{documents:PE(o,c)}:{query:ME(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=AE(o,s.resumeToken);let l=op(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(L.min())>0){a.readTime=bo(o,s.snapshotVersion.toTimestamp());let l=op(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);let i=T1(this.serializer,t);i&&(e.labels=i),this.t_(e)}l_(t){let e={};e.database=ap(this.serializer),e.removeTarget=t,this.t_(e)}},qp=class extends Cd{constructor(t,e,i,r,o,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(F(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();let e=I1(t.writeResults,t.commitTime),i=Mt(t.commitTime);return this.listener.T_(i,e)}return F(!t.writeResults||t.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let t={};t.database=ap(this.serializer),this.t_(t)}I_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>Da(this.serializer,i))};this.t_(e)}};var $p=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(t,sp(e,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new v(g.UNKNOWN,o.toString())})}vo(t,e,i,r,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(t,sp(e,i),r,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new v(g.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Gp=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(t){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,t==="Online"&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(kt(e),this.g_=!1):x("OnlineStateTracker",e)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Hp=class{constructor(t,e,i,r,o){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{i.enqueueAndForget(()=>_(this,null,function*(){yi(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=C(c);l.v_.add(4),yield Ro(l),l.x_.set("Unknown"),l.v_.delete(4),yield Ga(l)})}(this))}))}),this.x_=new Gp(i,r)}};function Ga(n){return _(this,null,function*(){if(yi(n))for(let t of n.F_)yield t(!0)})}function Ro(n){return _(this,null,function*(){for(let t of n.F_)yield t(!1)})}function Hd(n,t){let e=C(n);e.C_.has(t.targetId)||(e.C_.set(t.targetId,t),Vg(e)?Fg(e):Po(e).Jo()&&Og(e,t))}function Na(n,t){let e=C(n),i=Po(e);e.C_.delete(t),i.Jo()&&JE(e,t),e.C_.size===0&&(i.Jo()?i.Xo():yi(e)&&e.x_.set("Unknown"))}function Og(n,t){if(n.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(L.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Po(n).c_(t)}function JE(n,t){n.O_.Oe(t),Po(n).l_(t)}function Fg(n){n.O_=new ip({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>n.C_.get(t)||null,nt:()=>n.datastore.serializer.databaseId}),Po(n).start(),n.x_.p_()}function Vg(n){return yi(n)&&!Po(n).Ho()&&n.C_.size>0}function yi(n){return C(n).v_.size===0}function tI(n){n.O_=void 0}function B1(n){return _(this,null,function*(){n.C_.forEach((t,e)=>{Og(n,t)})})}function U1(n,t){return _(this,null,function*(){tI(n),Vg(n)?(n.x_.S_(t),Fg(n)):n.x_.set("Unknown")})}function z1(n,t,e){return _(this,null,function*(){if(n.x_.set("Online"),t instanceof cd&&t.state===2&&t.cause)try{yield function(r,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)r.C_.has(a)&&(yield r.remoteSyncer.rejectListen(a,s),r.C_.delete(a),r.O_.removeTarget(a))})}(n,t)}catch(i){x("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Sd(n,i)}else if(t instanceof uo?n.O_.$e(t):t instanceof ad?n.O_.Je(t):n.O_.Ge(t),!e.isEqual(L.min()))try{let i=yield WE(n.localStore);e.compareTo(i)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.C_.get(l);d&&o.C_.set(l,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let d=o.C_.get(c);if(!d)return;o.C_.set(c,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),JE(o,c);let u=new vo(d.target,c,l,d.sequenceNumber);Og(o,u)}),o.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){x("RemoteStore","Failed to raise snapshot:",i),yield Sd(n,i)}})}function Sd(n,t,e){return _(this,null,function*(){if(!vi(t))throw t;n.v_.add(1),yield Ro(n),n.x_.set("Offline"),e||(e=()=>WE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield e(),n.v_.delete(1),yield Ga(n)}))})}function eI(n,t){return t().catch(e=>Sd(n,e,t))}function ko(n){return _(this,null,function*(){let t=C(n),e=_i(t),i=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;q1(t);)try{let r=yield F1(t.localStore,i);if(r===null){t.D_.length===0&&e.Xo();break}i=r.batchId,$1(t,r)}catch(r){yield Sd(t,r)}nI(t)&&iI(t)})}function q1(n){return yi(n)&&n.D_.length<10}function $1(n,t){n.D_.push(t);let e=_i(n);e.Jo()&&e.P_&&e.I_(t.mutations)}function nI(n){return yi(n)&&!_i(n).Ho()&&n.D_.length>0}function iI(n){_i(n).start()}function G1(n){return _(this,null,function*(){_i(n).d_()})}function H1(n){return _(this,null,function*(){let t=_i(n);for(let e of n.D_)t.I_(e.mutations)})}function W1(n,t,e){return _(this,null,function*(){let i=n.D_.shift(),r=tp.from(i,t,e);yield eI(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ko(n)})}function K1(n,t){return _(this,null,function*(){t&&_i(n).P_&&(yield function(i,r){return _(this,null,function*(){if(function(s){return EE(s)&&s!==g.ABORTED}(r.code)){let o=i.D_.shift();_i(i).Zo(),yield eI(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield ko(i)}})}(n,t)),nI(n)&&iI(n)})}function Px(n,t){return _(this,null,function*(){let e=C(n);e.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let i=yi(e);e.v_.add(3),yield Ro(e),i&&e.x_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.v_.delete(3),yield Ga(e)})}function Wp(n,t){return _(this,null,function*(){let e=C(n);t?(e.v_.delete(2),yield Ga(e)):t||(e.v_.add(2),yield Ro(e),e.x_.set("Unknown"))})}function Po(n){return n.N_||(n.N_=function(e,i,r){let o=C(e);return o.R_(),new zp(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Po:B1.bind(null,n),To:U1.bind(null,n),u_:z1.bind(null,n)}),n.F_.push(t=>_(this,null,function*(){t?(n.N_.Zo(),Vg(n)?Fg(n):n.x_.set("Unknown")):(yield n.N_.stop(),tI(n))}))),n.N_}function _i(n){return n.B_||(n.B_=function(e,i,r){let o=C(e);return o.R_(),new qp(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(n.datastore,n.asyncQueue,{Po:G1.bind(null,n),To:K1.bind(null,n),E_:H1.bind(null,n),T_:W1.bind(null,n)}),n.F_.push(t=>_(this,null,function*(){t?(n.B_.Zo(),yield ko(n)):(yield n.B_.stop(),n.D_.length>0&&(x("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))}))),n.B_}var Kp=class n{constructor(t,e,i,r,o){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,o){let s=Date.now()+i,a=new n(t,e,s,r,o);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new v(g.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Mo(n,t){if(kt("AsyncQueue",`${t}: ${n}`),vi(n))return new v(g.UNAVAILABLE,`${t}: ${n}`);throw n}var Dd=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||T.comparator(e.key,i.key):(e,i)=>T.comparator(e.key,i.key),this.keyedMap=da(),this.sortedSet=new mt(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Rd=class{constructor(){this.L_=new mt(T.comparator)}track(t){let e=t.doc.key,i=this.L_.get(e);i?t.type!==0&&i.type===3?this.L_=this.L_.insert(e,t):t.type===3&&i.type!==1?this.L_=this.L_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.L_=this.L_.remove(e):t.type===1&&i.type===2?this.L_=this.L_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):R():this.L_=this.L_.insert(e,t)}k_(){let t=[];return this.L_.inorderTraversal((e,i)=>{t.push(i)}),t}},Eo=class n{constructor(t,e,i,r,o,s,a,c,l){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,e,i,r,o){let s=[];return e.forEach(a=>{s.push({type:0,doc:a})}),new n(t,e,Dd.emptySet(e),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&za(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Qp=class{constructor(){this.q_=void 0,this.Q_=[]}},Yp=class{constructor(){this.queries=new bn(t=>cE(t),za),this.onlineState="Unknown",this.K_=new Set}};function Lg(n,t){return _(this,null,function*(){let e=C(n),i=t.query,r=!1,o=e.queries.get(i);if(o||(r=!0,o=new Qp),r)try{o.q_=yield e.onListen(i)}catch(s){let a=Mo(s,`Initialization of query '${io(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,o),o.Q_.push(t),t.U_(e.onlineState),o.q_&&t.W_(o.q_)&&Bg(e)})}function jg(n,t){return _(this,null,function*(){let e=C(n),i=t.query,r=!1,o=e.queries.get(i);if(o){let s=o.Q_.indexOf(t);s>=0&&(o.Q_.splice(s,1),r=o.Q_.length===0)}if(r)return e.queries.delete(i),e.onUnlisten(i)})}function Q1(n,t){let e=C(n),i=!1;for(let r of t){let o=r.query,s=e.queries.get(o);if(s){for(let a of s.Q_)a.W_(r)&&(i=!0);s.q_=r}}i&&Bg(e)}function Y1(n,t,e){let i=C(n),r=i.queries.get(t);if(r)for(let o of r.Q_)o.onError(e);i.queries.delete(t)}function Bg(n){n.K_.forEach(t=>{t.next()})}var Oa=class{constructor(t,e,i){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=i||{}}W_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new Eo(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;let i=e!=="Offline";return(!this.options.Z_||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}H_(t){if(t.docChanges.length>0)return!0;let e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}Y_(t){t=Eo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}};var Xp=class{constructor(t,e){this.X_=t,this.byteLength=e}ea(){return"metadata"in this.X_}};var kd=class{constructor(t){this.serializer=t}Ps(t){return mn(this.serializer,t)}Is(t){return t.metadata.exists?kE(this.serializer,t.document,!1):Ut.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Mt(t)}},Zp=class{constructor(t,e,i){this.ta=t,this.localStore=e,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rI(t)}na(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.X_.namedQuery)this.queries.push(t.X_.namedQuery);else if(t.X_.documentMetadata){this.documents.push({metadata:t.X_.documentMetadata}),t.X_.documentMetadata.exists||++e;let i=et.fromString(t.X_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.X_.document&&(this.documents[this.documents.length-1].document=t.X_.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ra(t){let e=new Map,i=new kd(this.serializer);for(let r of t)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let a=(e.get(s)||H()).add(o);e.set(s,a)}}return e}complete(){return _(this,null,function*(){let t=yield V1(this.localStore,new kd(this.serializer),this.documents,this.ta.id),e=this.ra(this.documents);for(let i of this.queries)yield L1(this.localStore,i,e.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}})}};function rI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Pd=class{constructor(t){this.key=t}},Md=class{constructor(t){this.key=t}},Nd=class{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=H(),this.mutatedKeys=H(),this.ua=dE(t),this.ca=new Dd(this.ua)}get la(){return this.oa}ha(t,e){let i=e?e.Pa:new Rd,r=e?e.ca:this.ca,o=e?e.mutatedKeys:this.mutatedKeys,s=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,u)=>{let h=r.get(d),f=qa(this.query,u)?u:null,y=!!h&&this.mutatedKeys.has(h.key),b=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),w=!1;h&&f?h.data.isEqual(f.data)?y!==b&&(i.track({type:3,doc:f}),w=!0):this.Ia(h,f)||(i.track({type:2,doc:f}),w=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),w=!0):h&&!f&&(i.track({type:1,doc:h}),w=!0,(c||l)&&(a=!0)),w&&(f?(s=s.add(f),o=b?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),i.track({type:1,doc:d})}return{ca:s,Pa:i,Xi:a,mutatedKeys:o}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let o=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;let s=t.Pa.k_();s.sort((d,u)=>function(f,y){let b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return R()}};return b(f)-b(y)}(d.type,u.type)||this.ua(d.doc,u.doc)),this.Ta(i),r=r!=null&&r;let a=e&&!r?this.Ea():[],c=this.aa.size===0&&this.current&&!r?1:0,l=c!==this._a;return this._a=c,s.length!==0||l?{snapshot:new Eo(this.query,t.ca,o,s,t.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Rd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach(e=>this.oa=this.oa.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.oa=this.oa.delete(e)),this.current=t.current)}Ea(){if(!this.current)return[];let t=this.aa;this.aa=H(),this.ca.forEach(i=>{this.Aa(i.key)&&(this.aa=this.aa.add(i.key))});let e=[];return t.forEach(i=>{this.aa.has(i)||e.push(new Md(i))}),this.aa.forEach(i=>{t.has(i)||e.push(new Pd(i))}),e}Ra(t){this.oa=t.hs,this.aa=H();let e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return Eo.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},Jp=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},tg=class{constructor(t){this.key=t,this.ma=!1}},eg=class{constructor(t,e,i,r,o,s){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new bn(a=>cE(a),za),this.pa=new Map,this.ya=new Set,this.wa=new mt(T.comparator),this.Sa=new Map,this.ba=new ka,this.Da={},this.Ca=new Map,this.va=yo.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function X1(n,t){return _(this,null,function*(){let e=Gg(n),i,r,o=e.ga.get(t);if(o)i=o.targetId,e.sharedClientState.addLocalQueryTarget(i),r=o.view.Va();else{let s=yield wo(e.localStore,ue(t)),a=e.sharedClientState.addLocalQueryTarget(s.targetId);i=s.targetId,r=yield Ug(e,t,i,a==="current",s.resumeToken),e.isPrimaryClient&&Hd(e.remoteStore,s)}return r})}function Ug(n,t,e,i,r){return _(this,null,function*(){n.Ma=(u,h,f)=>function(b,w,O,B){return _(this,null,function*(){let P=w.view.ha(O);P.Xi&&(P=yield xd(b.localStore,w.query,!1).then(({documents:Nt})=>w.view.ha(Nt,P)));let K=B&&B.targetChanges.get(w.targetId),X=B&&B.targetMismatches.get(w.targetId)!=null,it=w.view.applyChanges(P,b.isPrimaryClient,K,X);return ng(b,w.targetId,it.da),it.snapshot})}(n,u,h,f);let o=yield xd(n.localStore,t,!0),s=new Nd(t,o.hs),a=s.ha(o.documents),c=Ca.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),l=s.applyChanges(a,n.isPrimaryClient,c);ng(n,e,l.da);let d=new Jp(t,e,s);return n.ga.set(t,d),n.pa.has(e)?n.pa.get(e).push(t):n.pa.set(e,[t]),l.snapshot})}function Z1(n,t){return _(this,null,function*(){let e=C(n),i=e.ga.get(t),r=e.pa.get(i.targetId);if(r.length>1)return e.pa.set(i.targetId,r.filter(o=>!za(o,t))),void e.ga.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xo(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),Na(e.remoteStore,i.targetId),Io(e,i.targetId)}).catch(bi))):(Io(e,i.targetId),yield xo(e.localStore,i.targetId,!0))})}function J1(n,t,e){return _(this,null,function*(){let i=Hg(n);try{let r=yield function(s,a){let c=C(s),l=vt.now(),d=a.reduce((f,y)=>f.add(y.key),H()),u,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let y=ye(),b=H();return c.os.getEntries(f,d).next(w=>{y=w,y.forEach((O,B)=>{B.isValidDocument()||(b=b.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,y)).next(w=>{u=w;let O=[];for(let B of a){let P=g1(B,u.get(B.key).overlayedDocument);P!=null&&O.push(new Xe(B.key,P,eE(P.value.mapValue),Tt.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,O,a)}).next(w=>{h=w;let O=w.applyToLocalDocumentSet(u,b);return c.documentOverlayCache.saveOverlays(f,w.batchId,O)})}).then(()=>({batchId:h.batchId,changes:hE(u)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,a,c){let l=s.Da[s.currentUser.toKey()];l||(l=new mt(z)),l=l.insert(a,c),s.Da[s.currentUser.toKey()]=l}(i,r.batchId,e),yield Vn(i,r.changes),yield ko(i.remoteStore)}catch(r){let o=Mo(r,"Failed to persist write");e.reject(o)}})}function oI(n,t){return _(this,null,function*(){let e=C(n);try{let i=yield O1(e.localStore,t);t.targetChanges.forEach((r,o)=>{let s=e.Sa.get(o);s&&(F(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.ma=!0:r.modifiedDocuments.size>0?F(s.ma):r.removedDocuments.size>0&&(F(s.ma),s.ma=!1))}),yield Vn(e,i,t)}catch(i){yield bi(i)}})}function Mx(n,t,e){let i=C(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.ga.forEach((o,s)=>{let a=s.view.U_(t);a.snapshot&&r.push(a.snapshot)}),function(s,a){let c=C(s);c.onlineState=a;let l=!1;c.queries.forEach((d,u)=>{for(let h of u.Q_)h.U_(a)&&(l=!0)}),l&&Bg(c)}(i.eventManager,t),r.length&&i.fa.u_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function tM(n,t,e){return _(this,null,function*(){let i=C(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Sa.get(t),o=r&&r.key;if(o){let s=new mt(T.comparator);s=s.insert(o,Ut.newNoDocument(o,L.min()));let a=H().add(o),c=new Aa(L.min(),new Map,new mt(z),s,a);yield oI(i,c),i.wa=i.wa.remove(o),i.Sa.delete(t),$g(i)}else yield xo(i.localStore,t,!1).then(()=>Io(i,t,e)).catch(bi)})}function eM(n,t){return _(this,null,function*(){let e=C(n),i=t.batch.batchId;try{let r=yield N1(e.localStore,t);qg(e,i,null),zg(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Vn(e,r)}catch(r){yield bi(r)}})}function nM(n,t,e){return _(this,null,function*(){let i=C(n);try{let r=yield function(s,a){let c=C(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(u=>(F(u!==null),d=u.keys(),c.mutationQueue.removeMutationBatch(l,u))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(i.localStore,t);qg(i,t,e),zg(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Vn(i,r)}catch(r){yield bi(r)}})}function iM(n,t){return _(this,null,function*(){let e=C(n);yi(e.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let a=C(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(e.localStore);if(i===-1)return void t.resolve();let r=e.Ca.get(i)||[];r.push(t),e.Ca.set(i,r)}catch(i){let r=Mo(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function zg(n,t){(n.Ca.get(t)||[]).forEach(e=>{e.resolve()}),n.Ca.delete(t)}function qg(n,t,e){let i=C(n),r=i.Da[i.currentUser.toKey()];if(r){let o=r.get(t);o&&(e?o.reject(e):o.resolve(),r=r.remove(t)),i.Da[i.currentUser.toKey()]=r}}function Io(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.pa.get(t))n.ga.delete(i),e&&n.fa.xa(i,e);n.pa.delete(t),n.isPrimaryClient&&n.ba.Vr(t).forEach(i=>{n.ba.containsKey(i)||sI(n,i)})}function sI(n,t){n.ya.delete(t.path.canonicalString());let e=n.wa.get(t);e!==null&&(Na(n.remoteStore,e),n.wa=n.wa.remove(t),n.Sa.delete(e),$g(n))}function ng(n,t,e){for(let i of e)i instanceof Pd?(n.ba.addReference(i.key,t),rM(n,i)):i instanceof Md?(x("SyncEngine","Document no longer in limbo: "+i.key),n.ba.removeReference(i.key,t),n.ba.containsKey(i.key)||sI(n,i.key)):R()}function rM(n,t){let e=t.key,i=e.path.canonicalString();n.wa.get(e)||n.ya.has(i)||(x("SyncEngine","New document in limbo: "+e),n.ya.add(i),$g(n))}function $g(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){let t=n.ya.values().next().value;n.ya.delete(t);let e=new T(et.fromString(t)),i=n.va.next();n.Sa.set(i,new tg(e)),n.wa=n.wa.insert(e,i),Hd(n.remoteStore,new vo(ue(Do(e.path)),i,"TargetPurposeLimboResolution",De._e))}}function Vn(n,t,e){return _(this,null,function*(){let i=C(n),r=[],o=[],s=[];i.ga.isEmpty()||(i.ga.forEach((a,c)=>{s.push(i.Ma(c,t,e).then(l=>{if((l||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let d=Op.Ki(c.targetId,l);o.push(d)}}))}),yield Promise.all(s),i.fa.u_(r),yield function(c,l){return _(this,null,function*(){let d=C(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",u=>m.forEach(l,h=>m.forEach(h.qi,f=>d.persistence.referenceDelegate.addReference(u,h.targetId,f)).next(()=>m.forEach(h.Qi,f=>d.persistence.referenceDelegate.removeReference(u,h.targetId,f)))))}catch(u){if(!vi(u))throw u;x("LocalStore","Failed to update sequence numbers: "+u)}for(let u of l){let h=u.targetId;if(!u.fromCache){let f=d.ns.get(h),y=f.snapshotVersion,b=f.withLastLimboFreeSnapshotVersion(y);d.ns=d.ns.insert(h,b)}}})}(i.localStore,o))})}function oM(n,t){return _(this,null,function*(){let e=C(n);if(!e.currentUser.isEqual(t)){x("SyncEngine","User change. New user:",t.toKey());let i=yield HE(e.localStore,t);e.currentUser=t,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new v(g.CANCELLED,s))})}),o.Ca.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Vn(e,i.us)}})}function sM(n,t){let e=C(n),i=e.Sa.get(t);if(i&&i.ma)return H().add(i.key);{let r=H(),o=e.pa.get(t);if(!o)return r;for(let s of o){let a=e.ga.get(s);r=r.unionWith(a.view.la)}return r}}function aM(n,t){return _(this,null,function*(){let e=C(n),i=yield xd(e.localStore,t.query,!0),r=t.view.Ra(i);return e.isPrimaryClient&&ng(e,t.targetId,r.da),r})}function cM(n,t){return _(this,null,function*(){let e=C(n);return YE(e.localStore,t).then(i=>Vn(e,i))})}function lM(n,t,e,i){return _(this,null,function*(){let r=C(n),o=yield function(a,c){let l=C(a),d=C(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>d.vn(u,c).next(h=>h?l.localDocuments.getDocuments(u,h):m.resolve(null)))}(r.localStore,t);o!==null?(e==="pending"?yield ko(r.remoteStore):e==="acknowledged"||e==="rejected"?(qg(r,t,i||null),zg(r,t),function(a,c){C(C(a).mutationQueue).Mn(c)}(r.localStore,t)):R(),yield Vn(r,o)):x("SyncEngine","Cannot apply mutation batch with id: "+t)})}function dM(n,t){return _(this,null,function*(){let e=C(n);if(Gg(e),Hg(e),t===!0&&e.Fa!==!0){let i=e.sharedClientState.getAllActiveQueryTargets(),r=yield Nx(e,i.toArray());e.Fa=!0,yield Wp(e.remoteStore,!0);for(let o of r)Hd(e.remoteStore,o)}else if(t===!1&&e.Fa!==!1){let i=[],r=Promise.resolve();e.pa.forEach((o,s)=>{e.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Io(e,s),xo(e.localStore,s,!0))),Na(e.remoteStore,s)}),yield r,yield Nx(e,i),function(s){let a=C(s);a.Sa.forEach((c,l)=>{Na(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new mt(T.comparator)}(e),e.Fa=!1,yield Wp(e.remoteStore,!1)}})}function Nx(n,t,e){return _(this,null,function*(){let i=C(n),r=[],o=[];for(let s of t){let a,c=i.pa.get(s);if(c&&c.length!==0){a=yield wo(i.localStore,ue(c[0]));for(let l of c){let d=i.ga.get(l),u=yield aM(i,d);u.snapshot&&o.push(u.snapshot)}}else{let l=yield QE(i.localStore,s);a=yield wo(i.localStore,l),yield Ug(i,aI(l),s,!1,a.resumeToken)}r.push(a)}return i.fa.u_(o),r})}function aI(n){return aE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function uM(n){return function(e){return C(C(e).persistence).Li()}(C(n).localStore)}function hM(n,t,e,i){return _(this,null,function*(){let r=C(n);if(r.Fa)return void x("SyncEngine","Ignoring unexpected query state notification.");let o=r.pa.get(t);if(o&&o.length>0)switch(e){case"current":case"not-current":{let s=yield YE(r.localStore,lE(o[0])),a=Aa.createSynthesizedRemoteEventForCurrentChange(t,e==="current",Yt.EMPTY_BYTE_STRING);yield Vn(r,s,a);break}case"rejected":yield xo(r.localStore,t,!0),Io(r,t,i);break;default:R()}})}function fM(n,t,e){return _(this,null,function*(){let i=Gg(n);if(i.Fa){for(let r of t){if(i.pa.has(r)){x("SyncEngine","Adding an already active target "+r);continue}let o=yield QE(i.localStore,r),s=yield wo(i.localStore,o);yield Ug(i,aI(o),s.targetId,!1,s.resumeToken),Hd(i.remoteStore,s)}for(let r of e)i.pa.has(r)&&(yield xo(i.localStore,r,!1).then(()=>{Na(i.remoteStore,r),Io(i,r)}).catch(bi))}})}function Gg(n){let t=C(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=oI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tM.bind(null,t),t.fa.u_=Q1.bind(null,t.eventManager),t.fa.xa=Y1.bind(null,t.eventManager),t}function Hg(n){let t=C(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nM.bind(null,t),t}function mM(n,t,e){let i=C(n);(function(o,s,a){return _(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,y){let b=C(f),w=Mt(y.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",O=>b.$r.getBundleMetadata(O,y.id)).then(O=>!!O&&O.createTime.compareTo(w)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(rI(c));let l=new Zp(c,o.localStore,s.serializer),d=yield s.Oa();for(;d;){let h=yield l.na(d);h&&a._updateProgress(h),d=yield s.Oa()}let u=yield l.complete();return yield Vn(o,u.sa,void 0),yield function(f,y){let b=C(f);return b.persistence.runTransaction("Save bundle","readwrite",w=>b.$r.saveBundleMetadata(w,y))}(o.localStore,c),a._completeWith(u.progress),Promise.resolve(u.ia)}catch(c){return Ue("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Fa=class{constructor(){this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=$a(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return GE(this.persistence,new wd,t.initialUser,this.serializer)}createPersistence(t){return new vd(yd.Hr,this.serializer)}createSharedClientState(t){return new Td}terminate(){return _(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Od=class n extends Fa{constructor(t,e,i){super(),this.Na=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){yield ou(n.prototype,this,"initialize").call(this,t),yield this.Na.initialize(this,t),yield Hg(this.Na.syncEngine),yield ko(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return GE(this.persistence,new wd,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let i=this.persistence.referenceDelegate.garbageCollector;return new yp(i,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let i=new Lm(e,this.persistence);return new Vm(t.asyncQueue,i)}createPersistence(t){let e=Ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Be.withCacheSize(this.cacheSizeBytes):Be.DEFAULT;return new Np(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,ZE(),Wl(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Td}},ig=class n extends Od{constructor(t,e){super(t,e,!1),this.Na=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return _(this,null,function*(){yield ou(n.prototype,this,"initialize").call(this,t);let e=this.Na.syncEngine;this.sharedClientState instanceof ga&&(this.sharedClientState.syncEngine={Zs:lM.bind(null,e),Xs:hM.bind(null,e),eo:fM.bind(null,e),Li:uM.bind(null,e),Ys:cM.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>_(this,null,function*(){yield dM(this.Na.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=ZE();if(!ga.D(e))throw new v(g.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=Ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new ga(e,t.asyncQueue,i,t.clientId,t.initialUser)}},Va=class{initialize(t,e){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Mx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oM.bind(null,this.syncEngine),yield Wp(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Yp}()}createDatastore(t){let e=$a(t.databaseInfo.databaseId),i=function(o){return new Up(o)}(t.databaseInfo);return function(o,s,a,c){return new $p(o,s,a,c)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,o,s,a){return new Hp(i,r,o,s,a)}(this.localStore,this.datastore,t.asyncQueue,e=>Mx(this.syncEngine,e,0),function(){return Ad.D()?new Ad:new jp}())}createSyncEngine(t,e){return function(r,o,s,a,c,l,d){let u=new eg(r,o,s,a,c,l);return d&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return _(this,null,function*(){var t;yield function(i){return _(this,null,function*(){let r=C(i);x("RemoteStore","RemoteStore shutting down."),r.v_.add(5),yield Ro(r),r.M_.shutdown(),r.x_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()})}};function Ox(n,t=10240){let e=0;return{read(){return _(this,null,function*(){if(e<n.byteLength){let r={value:n.slice(e,e+t),done:!1};return e+=t,r}return{done:!0}})},cancel(){return _(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var To=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):kt("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var rg=class{constructor(t,e){this.ka=t,this.serializer=e,this.metadata=new Bt,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(i=>{i&&i.ea()?this.metadata.resolve(i.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.X_)}`))},i=>this.metadata.reject(i))}close(){return this.ka.cancel()}getMetadata(){return _(this,null,function*(){return this.metadata.promise})}Oa(){return _(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return _(this,null,function*(){let t=yield this.Ka();if(t===null)return null;let e=this.qa.decode(t),i=Number(e);isNaN(i)&&this.$a(`length string (${e}) is not valid number`);let r=yield this.Ua(i);return new Xp(JSON.parse(r),t.length+i)})}Wa(){return this.buffer.findIndex(t=>t===123)}Ka(){return _(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let t=this.Wa();t<0&&this.$a("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}Ua(t){return _(this,null,function*(){for(;this.buffer.length<t;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let e=this.qa.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}$a(t){throw this.ka.cancel(),new Error(`Invalid bundle format: ${t}`)}Ga(){return _(this,null,function*(){let t=yield this.ka.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};var og=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new v(g.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield function(r,o){return _(this,null,function*(){let s=C(r),a={documents:o.map(u=>Sa(s.serializer,u))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,et.emptyPath(),a,o.length),l=new Map;c.forEach(u=>{let h=x1(s.serializer,u);l.set(h.key.toString(),h)});let d=[];return o.forEach(u=>{let h=l.get(u.toString());F(!!h),d.push(h)}),d})}(this.datastore,t);return e.forEach(i=>this.recordVersion(i)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new gi(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return _(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,i)=>{let r=T.fromPath(i);this.mutations.push(new Ea(r,this.precondition(r)))}),yield function(i,r){return _(this,null,function*(){let o=C(i),s={writes:r.map(a=>Da(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,et.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw R();e=L.min()}let i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new v(g.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(L.min())?Tt.exists(!1):Tt.updateTime(e):Tt.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(L.min()))throw new v(g.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tt.updateTime(e)}return Tt.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var sg=class{constructor(t,e,i,r,o){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=o,this.za=i.maxAttempts,this.jo=new Ma(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>_(this,null,function*(){let t=new og(this.datastore),e=this.Ja(t);e&&e.then(i=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.Ya(r)}))}).catch(i=>{this.Ya(i)})}))}Ja(t){try{let e=this.updateFunction(t);return!Ba(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(t){this.za>0&&this.Za(t)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(t)}Za(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!EE(e)}return!1}};var ag=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=Yl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>_(this,null,function*(){x("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new v(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=Mo(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function Kl(n,t){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>_(this,null,function*(){i.isEqual(r)||(yield HE(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function cg(n,t){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield Wg(n);x("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Px(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Px(t.remoteStore,r)),n._onlineComponents=t})}function cI(n){return n.name==="FirebaseError"?n.code===g.FAILED_PRECONDITION||n.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function Wg(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Kl(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!cI(e))throw e;Ue("Error using user provided cache. Falling back to memory cache: "+e),yield Kl(n,new Fa)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield Kl(n,new Fa);return n._offlineComponents})}function Wd(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield cg(n,n._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield cg(n,new Va))),n._onlineComponents})}function lI(n){return Wg(n).then(t=>t.persistence)}function Kg(n){return Wg(n).then(t=>t.localStore)}function dI(n){return Wd(n).then(t=>t.remoteStore)}function Qg(n){return Wd(n).then(t=>t.syncEngine)}function pM(n){return Wd(n).then(t=>t.datastore)}function Ao(n){return _(this,null,function*(){let t=yield Wd(n),e=t.eventManager;return e.onListen=X1.bind(null,t.syncEngine),e.onUnlisten=Z1.bind(null,t.syncEngine),e})}function gM(n){return n.asyncQueue.enqueue(()=>_(this,null,function*(){let t=yield lI(n),e=yield dI(n);return t.setNetworkEnabled(!0),function(r){let o=C(r);return o.v_.delete(0),Ga(o)}(e)}))}function _M(n){return n.asyncQueue.enqueue(()=>_(this,null,function*(){let t=yield lI(n),e=yield dI(n);return t.setNetworkEnabled(!1),function(r){return _(this,null,function*(){let o=C(r);o.v_.add(0),yield Ro(o),o.x_.set("Offline")})}(e)}))}function bM(n,t){let e=new Bt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o,s){return _(this,null,function*(){try{let a=yield function(l,d){let u=C(l);return u.persistence.runTransaction("read document","readonly",h=>u.localDocuments.getDocument(h,d))}(r,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new v(g.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Mo(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield Kg(n),t,e)})),e.promise}function uI(n,t,e={}){let i=new Bt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,l){let d=new To({next:h=>{s.enqueueAndForget(()=>jg(o,u));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new v(g.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new v(g.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Oa(Do(a.path),d,{includeMetadataChanges:!0,Z_:!0});return Lg(o,u)}(yield Ao(n),n.asyncQueue,t,e,i)})),i.promise}function vM(n,t){let e=new Bt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o,s){return _(this,null,function*(){try{let a=yield xd(r,o,!0),c=new Nd(o,a.hs),l=c.ha(a.documents),d=c.applyChanges(l,!1);s.resolve(d.snapshot)}catch(a){let c=Mo(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield Kg(n),t,e)})),e.promise}function hI(n,t,e={}){let i=new Bt;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(o,s,a,c,l){let d=new To({next:h=>{s.enqueueAndForget(()=>jg(o,u)),h.fromCache&&c.source==="server"?l.reject(new v(g.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),u=new Oa(a,d,{includeMetadataChanges:!0,Z_:!0});return Lg(o,u)}(yield Ao(n),n.asyncQueue,t,e,i)})),i.promise}function yM(n,t){let e=new To(t);return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o){C(r).K_.add(o),o.next()}(yield Ao(n),e)})),()=>{e.La(),n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(r,o){C(r).K_.delete(o)}(yield Ao(n),e)}))}}function wM(n,t,e,i){let r=function(s,a){let c;return c=typeof s=="string"?TE().encode(s):s,function(d,u){return new rg(d,u)}(function(d,u){if(d instanceof Uint8Array)return Ox(d,u);if(d instanceof ArrayBuffer)return Ox(new Uint8Array(d),u);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(e,$a(t));n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){mM(yield Qg(n),r,i)}))}function xM(n,t){return n.asyncQueue.enqueue(()=>_(this,null,function*(){return function(i,r){let o=C(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield Kg(n),t)}))}function fI(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var Fx=new Map;function Yg(n,t,e){if(!e)throw new v(g.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function Xg(n,t,e,i){if(t===!0&&i===!0)throw new v(g.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Vx(n){if(!T.isDocumentKey(n))throw new v(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Lx(n){if(T.isDocumentKey(n))throw new v(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":R()}function nt(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new v(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=Kd(n);throw new v(g.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function mI(n,t){if(t<=0)throw new v(g.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}var Fd=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new v(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new v(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Xg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fI((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new v(g.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},or=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new v(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fd(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Cm;switch(i.type){case"firstParty":return new km(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new v(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=Fx.get(e);i&&(x("ComponentProvider","Removing Datastore"),Fx.delete(e),i.terminate())}(this),Promise.resolve()}};function pI(n,t,e,i={}){var r;let o=(n=nt(n,or))._getSettings(),s=`${t}:${e}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ue("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=jt.MOCK_USER;else{a=fb(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new v(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new jt(l)}n._authCredentials=new Sm(new Ql(a,c))}}var ee=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},ht=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},pn=class n extends ee{constructor(t,e,i){super(t,e,Do(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new ht(this.firestore,null,new T(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function Zg(n,t,...e){if(n=bt(n),Yg("collection","path",t),n instanceof or){let i=et.fromString(t,...e);return Lx(i),new pn(n,null,i)}{if(!(n instanceof ht||n instanceof pn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(et.fromString(t,...e));return Lx(i),new pn(n.firestore,null,i)}}function gI(n,t){if(n=nt(n,or),Yg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new v(g.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ee(n,null,function(i){return new Ye(et.emptyPath(),i)}(t))}function Ha(n,t,...e){if(n=bt(n),arguments.length===1&&(t=Yl.newId()),Yg("doc","path",t),n instanceof or){let i=et.fromString(t,...e);return Vx(i),new ht(n,null,new T(i))}{if(!(n instanceof ht||n instanceof pn))throw new v(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(et.fromString(t,...e));return Vx(i),new ht(n.firestore,n instanceof pn?n.converter:null,new T(i))}}function Jg(n,t){return n=bt(n),t=bt(t),(n instanceof ht||n instanceof pn)&&(t instanceof ht||t instanceof pn)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function t_(n,t){return n=bt(n),t=bt(t),n instanceof ee&&t instanceof ee&&n.firestore===t.firestore&&za(n._query,t._query)&&n.converter===t.converter}var lg=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Ma(this,"async_queue_retry"),this._u=()=>{let e=Wl();e&&x("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};let t=Wl();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;let e=Wl();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise(()=>{});let e=new Bt;return this.uu(()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.eu.push(t),this.cu()))}cu(){return _(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!vi(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(t){let e=this.Xa.then(()=>(this.iu=!0,t().catch(i=>{this.ru=i,this.iu=!1;let r=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i);throw kt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.iu=!1,i))));return this.Xa=e,e}enqueueAfterDelay(t,e,i){this.au(),this.ou.indexOf(t)>-1&&(e=0);let r=Kp.createAndSchedule(this,t,e,i,o=>this.lu(o));return this.nu.push(r),r}au(){this.ru&&R()}verifyOperationInProgress(){}hu(){return _(this,null,function*(){let t;do t=this.Xa,yield t;while(t!==this.Xa)})}Pu(t){for(let e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then(()=>{this.nu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.nu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.hu()})}Tu(t){this.ou.push(t)}lu(t){let e=this.nu.indexOf(t);this.nu.splice(e,1)}};function dg(n){return function(e,i){if(typeof e!="object"||e===null)return!1;let r=e;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(n,["next","error","complete"])}var ug=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Bt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var _I=-1,gt=class extends or{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new lg}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bI(this),this._firestoreClient.terminate()}};function Gt(n){return n._firestoreClient||bI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function bI(n){var t,e,i;let r=n._freezeSettings(),o=function(a,c,l,d){return new jm(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fI(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new ag(n._authCredentials,n._appCheckCredentials,n._queue,o),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function vI(n,t){SI(n=nt(n,gt));let e=Gt(n);if(e._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");Ue("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new Va;return wI(e,r,new Od(r,i.cacheSizeBytes,t?.forceOwnership))}function yI(n){SI(n=nt(n,gt));let t=Gt(n);if(t._uninitializedComponentsProvider)throw new v(g.FAILED_PRECONDITION,"SDK cache is already specified.");Ue("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings(),i=new Va;return wI(t,i,new ig(i,e.cacheSizeBytes))}function wI(n,t,e){let i=new Bt;return n.asyncQueue.enqueue(()=>_(this,null,function*(){try{yield Kl(n,e),yield cg(n,t),i.resolve()}catch(r){let o=r;if(!cI(o))throw o;Ue("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function xI(n){if(n._initialized&&!n._terminated)throw new v(g.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Bt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{yield function(i){return _(this,null,function*(){if(!Pn.D())return Promise.resolve();let r=i+"main";yield Pn.delete(r)})}(Ng(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function EI(n){return function(e){let i=new Bt;return e.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return iM(yield Qg(e),i)})),i.promise}(Gt(n=nt(n,gt)))}function II(n){return gM(Gt(n=nt(n,gt)))}function TI(n){return _M(Gt(n=nt(n,gt)))}function AI(n,t){let e=Gt(n=nt(n,gt)),i=new ug;return wM(e,n._databaseId,t,i),i}function CI(n,t){return xM(Gt(n=nt(n,gt)),t).then(e=>e?new ee(n,null,e.query):null)}function SI(n){if(n._initialized||n._terminated)throw new v(g.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var vn=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Yt.fromBase64String(t))}catch(e){throw new v(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Yt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var Ze=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new v(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var On=class{constructor(t){this._methodName=t}};var sr=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new v(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new v(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return z(this._lat,t._lat)||z(this._long,t._long)}};var EM=/^__.*__$/,hg=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xe(t,this.data,this.fieldMask,e,this.fieldTransforms):new pi(t,this.data,e,this.fieldTransforms)}},Vd=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xe(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function DI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw R()}}var Ld=class n{constructor(t,e,i,r,o,s){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Au({path:i,Vu:!1});return r.mu(t),r}fu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.Au({path:i,Vu:!1});return r.Eu(),r}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return jd(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(t.length===0)throw this.pu("Document fields must not be empty");if(DI(this.du)&&EM.test(t))throw this.pu('Document fields cannot begin and end with "__"')}},fg=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||$a(t)}Su(t,e,i,r=!1){return new Ld({du:t,methodName:e,wu:i,path:Pt.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dr(n){let t=n._freezeSettings(),e=$a(n._databaseId);return new fg(n._databaseId,!!t.ignoreUndefinedProperties,e)}function Qd(n,t,e,i,r,o={}){let s=n.Su(o.merge||o.mergeFields?2:0,t,e,r);i_("Data must be an object, but it was:",s,i);let a=PI(i,s),c,l;if(o.merge)c=new Re(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let u of o.mergeFields){let h=bg(t,u,e);if(!s.contains(h))throw new v(g.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);NI(d,h)||d.push(h)}c=new Re(d),l=s.fieldTransforms.filter(u=>c.covers(u.field))}else c=null,l=s.fieldTransforms;return new hg(new se(a),c,l)}var La=class n extends On{_toFieldTransform(t){if(t.du!==2)throw t.du===1?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function RI(n,t,e){return new Ld({du:3,wu:t.settings.wu,methodName:n._methodName,Vu:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var mg=class n extends On{_toFieldTransform(t){return new nr(t.path,new fi)}isEqual(t){return t instanceof n}},pg=class n extends On{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){let e=RI(this,t,!0),i=this.bu.map(o=>ur(o,e)),r=new Mn(i);return new nr(t.path,r)}isEqual(t){return t instanceof n&&Au(this.bu,t.bu)}},gg=class n extends On{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){let e=RI(this,t,!0),i=this.bu.map(o=>ur(o,e)),r=new Nn(i);return new nr(t.path,r)}isEqual(t){return t instanceof n&&Au(this.bu,t.bu)}},_g=class n extends On{constructor(t,e){super(t),this.Du=e}_toFieldTransform(t){let e=new mi(t.serializer,gE(t.serializer,this.Du));return new nr(t.path,e)}isEqual(t){return t instanceof n&&this.Du===t.Du}};function e_(n,t,e,i){let r=n.Su(1,t,e);i_("Data must be an object, but it was:",r,i);let o=[],s=se.empty();lr(i,(c,l)=>{let d=r_(t,c,e);l=bt(l);let u=r.fu(d);if(l instanceof La)o.push(d);else{let h=ur(l,u);h!=null&&(o.push(d),s.set(d,h))}});let a=new Re(o);return new Vd(s,a,r.fieldTransforms)}function n_(n,t,e,i,r,o){let s=n.Su(1,t,e),a=[bg(t,i,e)],c=[r];if(o.length%2!=0)throw new v(g.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(bg(t,o[h])),c.push(o[h+1]);let l=[],d=se.empty();for(let h=a.length-1;h>=0;--h)if(!NI(l,a[h])){let f=a[h],y=c[h];y=bt(y);let b=s.fu(f);if(y instanceof La)l.push(f);else{let w=ur(y,b);w!=null&&(l.push(f),d.set(f,w))}}let u=new Re(l);return new Vd(d,u,s.fieldTransforms)}function kI(n,t,e,i=!1){return ur(e,n.Su(i?4:3,t))}function ur(n,t){if(MI(n=bt(n)))return i_("Unsupported field value:",t,n),PI(n,t);if(n instanceof On)return function(i,r){if(!DI(r.du))throw r.pu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.pu(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.Vu&&t.du!==4)throw t.pu("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let a of i){let c=ur(a,r.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,t)}return function(i,r){if((i=bt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gE(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=vt.fromDate(i);return{timestampValue:bo(r.serializer,o)}}if(i instanceof vt){let o=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bo(r.serializer,o)}}if(i instanceof sr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vn)return{bytesValue:AE(r.serializer,i._byteString)};if(i instanceof ht){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:kg(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.pu(`Unsupported field value: ${Kd(i)}`)}(n,t)}function PI(n,t){let e={};return Zx(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):lr(n,(i,r)=>{let o=ur(r,t.Ru(i));o!=null&&(e[i]=o)}),{mapValue:{fields:e}}}function MI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof sr||n instanceof vn||n instanceof ht||n instanceof On)}function i_(n,t,e){if(!MI(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=Kd(e);throw i==="an object"?t.pu(n+" a custom object"):t.pu(n+" "+i)}}function bg(n,t,e){if((t=bt(t))instanceof Ze)return t._internalPath;if(typeof t=="string")return r_(n,t);throw jd("Field path arguments must be of type string or ",n,!1,void 0,e)}var IM=new RegExp("[~\\*/\\[\\]]");function r_(n,t,e){if(t.search(IM)>=0)throw jd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new Ze(...t.split("."))._internalPath}catch{throw jd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function jd(n,t,e,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${i}`),s&&(c+=` in document ${r}`),c+=")"),new v(g.INVALID_ARGUMENT,a+n+c)}function NI(n,t){return n.some(e=>e.isEqual(t))}var ar=class{constructor(t,e,i,r,o){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new vg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(Yd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},vg=class extends ar{data(){return super.data()}};function Yd(n,t){return typeof t=="string"?r_(n,t):t instanceof Ze?t._internalPath:t._delegate._internalPath}function OI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new v(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ja=class{},cr=class extends ja{};function Ln(n,t,...e){let i=[];t instanceof ja&&i.push(t),i=i.concat(e),function(o){let s=o.filter(c=>c instanceof yg).length,a=o.filter(c=>c instanceof Bd).length;if(s>1||s>0&&a>0)throw new v(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Bd=class n extends cr{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return GI(t._query,e),new ee(t.firestore,t.converter,Zm(t._query,e))}_parse(t){let e=dr(t.firestore);return function(o,s,a,c,l,d,u){let h;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new v(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Bx(u,d);let f=[];for(let y of u)f.push(jx(c,o,y));h={arrayValue:{values:f}}}else h=jx(c,o,u)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Bx(u,d),h=kI(a,s,u,d==="in"||d==="not-in");return Z.create(l,d,h)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function FI(n,t,e){let i=t,r=Yd("where",n);return Bd._create(r,i,e)}var yg=class n extends ja{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:ct.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,o){let s=r,a=o.getFlattenedFilters();for(let c of a)GI(s,c),s=Zm(s,c)}(t._query,e),new ee(t.firestore,t.converter,Zm(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var wg=class n extends cr{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new n(t,e)}_apply(t){let e=function(r,o,s){if(r.startAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new v(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tr(o,s)}(t._query,this._field,this._direction);return new ee(t.firestore,t.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new Ye(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(t._query,e))}};function VI(n,t="asc"){let e=t,i=Yd("orderBy",n);return wg._create(i,e)}var Ud=class n extends cr{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){return new ee(t.firestore,t.converter,sd(t._query,this._limit,this._limitType))}};function LI(n){return mI("limit",n),Ud._create("limit",n,"F")}function jI(n){return mI("limitToLast",n),Ud._create("limitToLast",n,"L")}var zd=class n extends cr{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=$I(t,this.type,this._docOrFields,this._inclusive);return new ee(t.firestore,t.converter,function(r,o){return new Ye(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(t._query,e))}};function BI(...n){return zd._create("startAt",n,!0)}function UI(...n){return zd._create("startAfter",n,!1)}var qd=class n extends cr{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=$I(t,this.type,this._docOrFields,this._inclusive);return new ee(t.firestore,t.converter,function(r,o){return new Ye(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(t._query,e))}};function zI(...n){return qd._create("endBefore",n,!1)}function qI(...n){return qd._create("endAt",n,!0)}function $I(n,t,e,i){if(e[0]=bt(e[0]),e[0]instanceof ar)return function(o,s,a,c,l){if(!c)throw new v(g.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let u of lo(o))if(u.field.isKeyField())d.push(Ji(s,c.key));else{let h=c.data.field(u.field);if(Gd(h))throw new v(g.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=u.field.canonicalString();throw new v(g.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}d.push(h)}return new _n(d,l)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{let r=dr(n.firestore);return function(s,a,c,l,d,u){let h=s.explicitOrderBy;if(d.length>h.length)throw new v(g.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let y=0;y<d.length;y++){let b=d[y];if(h[y].field.isKeyField()){if(typeof b!="string")throw new v(g.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!Dg(s)&&b.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let w=s.path.child(et.fromString(b));if(!T.isDocumentKey(w))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);let O=new T(w);f.push(Ji(a,O))}else{let w=kI(c,l,b);f.push(w)}}return new _n(f,u)}(n._query,n.firestore._databaseId,r,t,e,i)}}function jx(n,t,e){if(typeof(e=bt(e))=="string"){if(e==="")throw new v(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dg(t)&&e.indexOf("/")!==-1)throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(et.fromString(e));if(!T.isDocumentKey(i))throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ji(n,new T(i))}if(e instanceof ht)return Ji(n,e._key);throw new v(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kd(e)}.`)}function Bx(n,t){if(!Array.isArray(n)||n.length===0)throw new v(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function GI(n,t){let e=function(r,o){for(let s of r)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new v(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}var Co=class{convertValue(t,e="none"){switch(Zi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return It(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(di(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw R()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return lr(t,(r,o)=>{i[r]=this.convertValue(o,e)}),i}convertGeoPoint(t){return new sr(It(t.latitude),It(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=Cg(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(ya(t));default:return null}}convertTimestamp(t){let e=li(t);return new vt(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=et.fromString(t);F(VE(i));let r=new ui(i.get(1),i.get(3)),o=new T(i.popFirst(5));return r.isEqual(e)||kt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),o}};function Xd(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var xg=class extends Co{constructor(t){super(),this.firestore=t}convertBytes(t){return new vn(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ht(this.firestore,null,e)}};var kn=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},qe=class extends ar{constructor(t,e,i,r,o,s){super(t,e,i,r,s),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new ai(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(Yd("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},ai=class extends qe{data(t={}){return super.data(t)}},Je=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new kn(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new ai(this._firestore,this._userDataWriter,i.key,i,new kn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new v(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(a=>{let c=new ai(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new ai(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kn(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,d=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:TM(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function TM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return R()}}function o_(n,t){return n instanceof qe&&t instanceof qe?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(n._document===null?t._document===null:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof Je&&t instanceof Je&&n._firestore===t._firestore&&t_(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function HI(n){n=nt(n,ht);let t=nt(n.firestore,gt);return uI(Gt(t),n._key).then(e=>l_(t,n,e))}var Fn=class extends Co{constructor(t){super(),this.firestore=t}convertBytes(t){return new vn(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new ht(this.firestore,null,e)}};function WI(n){n=nt(n,ht);let t=nt(n.firestore,gt),e=Gt(t),i=new Fn(t);return bM(e,n._key).then(r=>new qe(t,i,n._key,r,new kn(r!==null&&r.hasLocalMutations,!0),n.converter))}function KI(n){n=nt(n,ht);let t=nt(n.firestore,gt);return uI(Gt(t),n._key,{source:"server"}).then(e=>l_(t,n,e))}function QI(n){n=nt(n,ee);let t=nt(n.firestore,gt),e=Gt(t),i=new Fn(t);return OI(n._query),hI(e,n._query).then(r=>new Je(t,i,n,r))}function YI(n){n=nt(n,ee);let t=nt(n.firestore,gt),e=Gt(t),i=new Fn(t);return vM(e,n._query).then(r=>new Je(t,i,n,r))}function XI(n){n=nt(n,ee);let t=nt(n.firestore,gt),e=Gt(t),i=new Fn(t);return hI(e,n._query,{source:"server"}).then(r=>new Je(t,i,n,r))}function s_(n,t,e){n=nt(n,ht);let i=nt(n.firestore,gt),r=Xd(n.converter,t,e);return No(i,[Qd(dr(i),"setDoc",n._key,r,n.converter!==null,e).toMutation(n._key,Tt.none())])}function a_(n,t,e,...i){n=nt(n,ht);let r=nt(n.firestore,gt),o=dr(r),s;return s=typeof(t=bt(t))=="string"||t instanceof Ze?n_(o,"updateDoc",n._key,t,e,i):e_(o,"updateDoc",n._key,t),No(r,[s.toMutation(n._key,Tt.exists(!0))])}function ZI(n){return No(nt(n.firestore,gt),[new gi(n._key,Tt.none())])}function JI(n,t){let e=nt(n.firestore,gt),i=Ha(n),r=Xd(n.converter,t);return No(e,[Qd(dr(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Tt.exists(!1))]).then(()=>i)}function c_(n,...t){var e,i,r;n=bt(n);let o={includeMetadataChanges:!1},s=0;typeof t[s]!="object"||dg(t[s])||(o=t[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(dg(t[s])){let u=t[s];t[s]=(e=u.next)===null||e===void 0?void 0:e.bind(u),t[s+1]=(i=u.error)===null||i===void 0?void 0:i.bind(u),t[s+2]=(r=u.complete)===null||r===void 0?void 0:r.bind(u)}let c,l,d;if(n instanceof ht)l=nt(n.firestore,gt),d=Do(n._key.path),c={next:u=>{t[s]&&t[s](l_(l,n,u))},error:t[s+1],complete:t[s+2]};else{let u=nt(n,ee);l=nt(u.firestore,gt),d=u._query;let h=new Fn(l);c={next:f=>{t[s]&&t[s](new Je(l,h,u,f))},error:t[s+1],complete:t[s+2]},OI(n._query)}return function(h,f,y,b){let w=new To(b),O=new Oa(f,w,y);return h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Lg(yield Ao(h),O)})),()=>{w.La(),h.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return jg(yield Ao(h),O)}))}}(Gt(l),d,a,c)}function tT(n,t){return yM(Gt(n=nt(n,gt)),dg(t)?t:{next:t})}function No(n,t){return function(i,r){let o=new Bt;return i.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return J1(yield Qg(i),r,o)})),o.promise}(Gt(n),t)}function l_(n,t,e){let i=e.docs.get(t._key),r=new Fn(n);return new qe(n,r,t._key,i,new kn(e.hasPendingWrites,e.fromCache),t.converter)}var AM={maxAttempts:5};var $d=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=dr(t)}set(t,e,i){this._verifyNotCommitted();let r=oi(t,this._firestore),o=Xd(r.converter,e,i),s=Qd(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Tt.none())),this}update(t,e,i,...r){this._verifyNotCommitted();let o=oi(t,this._firestore),s;return s=typeof(e=bt(e))=="string"||e instanceof Ze?n_(this._dataReader,"WriteBatch.update",o._key,e,i,r):e_(this._dataReader,"WriteBatch.update",o._key,e),this._mutations.push(s.toMutation(o._key,Tt.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=oi(t,this._firestore);return this._mutations=this._mutations.concat(new gi(e._key,Tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new v(g.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function oi(n,t){if((n=bt(n)).firestore!==t)throw new v(g.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Eg=class extends class{constructor(e,i){this._firestore=e,this._transaction=i,this._dataReader=dr(e)}get(e){let i=oi(e,this._firestore),r=new xg(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return R();let s=o[0];if(s.isFoundDocument())return new ar(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new ar(this._firestore,r,i._key,null,i.converter);throw R()})}set(e,i,r){let o=oi(e,this._firestore),s=Xd(o.converter,i,r),a=Qd(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,a),this}update(e,i,r,...o){let s=oi(e,this._firestore),a;return a=typeof(i=bt(i))=="string"||i instanceof Ze?n_(this._dataReader,"Transaction.update",s._key,i,r,o):e_(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,a),this}delete(e){let i=oi(e,this._firestore);return this._transaction.delete(i._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=oi(t,this._firestore),i=new Fn(this._firestore);return super.get(t).then(r=>new qe(this._firestore,i,e._key,r._document,new kn(!1,!1),e.converter))}};function eT(n,t,e){n=nt(n,gt);let i=Object.assign(Object.assign({},AM),e);return function(o){if(o.maxAttempts<1)throw new v(g.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,a){let c=new Bt;return o.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){let l=yield pM(o);new sg(o.asyncQueue,l,a,s,c).ja()})),c.promise}(Gt(n),r=>t(new Eg(n,r)),i)}function nT(){return new La("deleteField")}function iT(){return new mg("serverTimestamp")}function rT(...n){return new pg("arrayUnion",n)}function oT(...n){return new gg("arrayRemove",n)}function sT(n){return new _g("increment",n)}(function(t,e=!0){(function(r){So=r})(gb),Xo(new Di("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),a=new gt(new Dm(i.getProvider("auth-internal")),new Mm(i.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new v(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ui(l.options.projectId,d)}(s,r),s);return o=Object.assign({useFetchStreams:e},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),qn(zw,"4.4.2",t),qn(zw,"4.4.2","esm2017")})();var CM="@firebase/firestore-compat",SM="0.3.25";function p_(n,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new v("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function aT(){if(typeof Uint8Array>"u")throw new v("unimplemented","Uint8Arrays are not available in this environment.")}function cT(){if(!Jx())throw new v("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Zd=class n{constructor(t){this._delegate=t}static fromBase64String(t){return cT(),new n(vn.fromBase64String(t))}static fromUint8Array(t){return aT(),new n(vn.fromUint8Array(t))}toBase64(){return cT(),this._delegate.toBase64()}toUint8Array(){return aT(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function d_(n){return DM(n,["next","error","complete"])}function DM(n,t){if(typeof n!="object"||n===null)return!1;let e=n;for(let i of t)if(i in e&&typeof e[i]=="function")return!0;return!1}var u_=class{enableIndexedDbPersistence(t,e){return vI(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return yI(t._delegate)}clearIndexedDbPersistence(t){return xI(t._delegate)}},Jd=class{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof ui||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ue("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,i={}){pI(this._delegate,t,e,i)}enableNetwork(){return II(this._delegate)}disableNetwork(){return TI(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Xg("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return EI(this._delegate)}onSnapshotsInSync(t){return tT(this._delegate,t)}get app(){if(!this._appCompat)throw new v("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new Vo(this,Zg(this._delegate,t))}catch(e){throw he(e,"collection()","Firestore.collection()")}}doc(t){try{return new yn(this,Ha(this._delegate,t))}catch(e){throw he(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new pr(this,gI(this._delegate,t))}catch(e){throw he(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return eT(this._delegate,e=>t(new tu(this,e)))}batch(){return Gt(this._delegate),new eu(new $d(this._delegate,t=>No(this._delegate,t)))}loadBundle(t){return AI(this._delegate,t)}namedQuery(t){return CI(this._delegate,t).then(e=>e?new pr(this,e):null)}},Oo=class extends Co{constructor(t){super(),this.firestore=t}convertBytes(t){return new Zd(new vn(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return yn.forKey(e,this.firestore,null)}};function RM(n){Ux(n)}var tu=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Oo(t)}get(t){let e=hr(t);return this._delegate.get(e).then(i=>new fr(this._firestore,new qe(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){let r=hr(t);return i?(p_("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=hr(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=hr(t);return this._delegate.delete(e),this}},eu=class{constructor(t){this._delegate=t}set(t,e,i){let r=hr(t);return i?(p_("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){let o=hr(t);return arguments.length===2?this._delegate.update(o,e):this._delegate.update(o,e,i,...r),this}delete(t){let e=hr(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},Fo=class n{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){let i=new ai(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new mr(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let i=n.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));let o=r.get(e);return o||(o=new n(t,new Oo(t),e),r.set(e,o)),o}};Fo.INSTANCES=new WeakMap;var yn=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Oo(t)}static forPath(t,e,i){if(t.length%2!==0)throw new v("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new n(e,new ht(e._delegate,i,new T(t)))}static forKey(t,e,i){return new n(e,new ht(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new Vo(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new Vo(this.firestore,Zg(this._delegate,t))}catch(e){throw he(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=bt(t),t instanceof ht?Jg(this._delegate,t):!1}set(t,e){e=p_("DocumentReference.set",e);try{return e?s_(this._delegate,t,e):s_(this._delegate,t)}catch(i){throw he(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return arguments.length===1?a_(this._delegate,t):a_(this._delegate,t,e,...i)}catch(r){throw he(r,"updateDoc()","DocumentReference.update()")}}delete(){return ZI(this._delegate)}onSnapshot(...t){let e=lT(t),i=dT(t,r=>new fr(this.firestore,new qe(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return c_(this._delegate,e,i)}get(t){let e;return t?.source==="cache"?e=WI(this._delegate):t?.source==="server"?e=KI(this._delegate):e=HI(this._delegate),e.then(i=>new fr(this.firestore,new qe(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Fo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function he(n,t,e){return n.message=n.message.replace(t,e),n}function lT(n){for(let t of n)if(typeof t=="object"&&!d_(t))return t;return{}}function dT(n,t){var e,i;let r;return d_(n[0])?r=n[0]:d_(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:o=>{r.next&&r.next(t(o))},error:(e=r.error)===null||e===void 0?void 0:e.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var fr=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new yn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return o_(this._delegate,t._delegate)}},mr=class extends fr{data(t){let e=this._delegate.data(t);return this._delegate._converter||zx(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},pr=class n{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Oo(t)}where(t,e,i){try{return new n(this.firestore,Ln(this._delegate,FI(t,e,i)))}catch(r){throw he(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new n(this.firestore,Ln(this._delegate,VI(t,e)))}catch(i){throw he(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new n(this.firestore,Ln(this._delegate,LI(t)))}catch(e){throw he(e,"limit()","Query.limit()")}}limitToLast(t){try{return new n(this.firestore,Ln(this._delegate,jI(t)))}catch(e){throw he(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new n(this.firestore,Ln(this._delegate,BI(...t)))}catch(e){throw he(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new n(this.firestore,Ln(this._delegate,UI(...t)))}catch(e){throw he(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new n(this.firestore,Ln(this._delegate,zI(...t)))}catch(e){throw he(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new n(this.firestore,Ln(this._delegate,qI(...t)))}catch(e){throw he(e,"endAt()","Query.endAt()")}}isEqual(t){return t_(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=YI(this._delegate):t?.source==="server"?e=XI(this._delegate):e=QI(this._delegate),e.then(i=>new Wa(this.firestore,new Je(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){let e=lT(t),i=dT(t,r=>new Wa(this.firestore,new Je(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return c_(this._delegate,e,i)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Fo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},h_=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new mr(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Wa=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new pr(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new mr(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new h_(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new mr(this._firestore,i))})}isEqual(t){return o_(this._delegate,t._delegate)}},Vo=class n extends pr{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new yn(this.firestore,t):null}doc(t){try{return t===void 0?new yn(this.firestore,Ha(this._delegate)):new yn(this.firestore,Ha(this._delegate,t))}catch(e){throw he(e,"doc()","CollectionReference.doc()")}}add(t){return JI(this._delegate,t).then(e=>new yn(this.firestore,e))}isEqual(t){return Jg(this._delegate,t._delegate)}withConverter(t){return new n(this.firestore,t?this._delegate.withConverter(Fo.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function hr(n){return nt(n,ht)}var f_=class n{constructor(...t){this._delegate=new Ze(...t)}static documentId(){return new n(Pt.keyField().canonicalString())}isEqual(t){return t=bt(t),t instanceof Ze?this._delegate._internalPath.isEqual(t._internalPath):!1}};var m_=class n{constructor(t){this._delegate=t}static serverTimestamp(){let t=iT();return t._methodName="FieldValue.serverTimestamp",new n(t)}static delete(){let t=nT();return t._methodName="FieldValue.delete",new n(t)}static arrayUnion(...t){let e=rT(...t);return e._methodName="FieldValue.arrayUnion",new n(e)}static arrayRemove(...t){let e=oT(...t);return e._methodName="FieldValue.arrayRemove",new n(e)}static increment(t){let e=sT(t);return e._methodName="FieldValue.increment",new n(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var kM={Firestore:Jd,GeoPoint:sr,Timestamp:vt,Blob:Zd,Transaction:tu,WriteBatch:eu,DocumentReference:yn,DocumentSnapshot:fr,Query:pr,QueryDocumentSnapshot:mr,QuerySnapshot:Wa,CollectionReference:Vo,FieldPath:f_,FieldValue:m_,setLogLevel:RM,CACHE_SIZE_UNLIMITED:_I};function PM(n,t){n.INTERNAL.registerComponent(new Di("firestore-compat",e=>{let i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},kM)))}function MM(n){PM(n,(t,e)=>new Jd(t,e,new u_)),n.registerVersion(CM,SM)}MM(Te);function NM(n,t=Qa){return new me(e=>{let i;return t!=null?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}function uT(n,t){return NM(n,t)}function OM(n,t){return uT(n,t).pipe(xn(void 0),Uo(),j(e=>{let[i,r]=e;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function b_(n,t){return uT(n,t).pipe(j(e=>({payload:e,type:"query"})))}var nu=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let i=this.ref.collection(t),{ref:r,query:o}=mT(i,e);return new ru(r,o,this.afs)}snapshotChanges(){return OM(this.ref,this.afs.schedulers.outsideAngular).pipe(ve)}valueChanges(t={}){return this.snapshotChanges().pipe(j(({payload:e})=>t.idField?ot(I({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return pt(this.ref.get(t)).pipe(ve)}};function iu(n,t){return b_(n,t).pipe(xn(void 0),Uo(),j(e=>{let[i,r]=e,o=r.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=o.find(u=>u.doc.ref.isEqual(a.ref)),d=i?.payload.docs.find(u=>u.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function hT(n,t,e){return iu(n,e).pipe(yr((i,r)=>FM(i,r.map(o=>o.payload),t),[]),jo(),j(i=>i.map(r=>({type:r.type,payload:r}))))}function FM(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=VM(n,i))}),n}function g_(n,t,e,...i){let r=n.slice();return r.splice(t,e,...i),r}function VM(n,t){switch(t.type){case"added":if(!(n[t.newIndex]&&n[t.newIndex].doc.ref.isEqual(t.doc.ref)))return g_(n,t.newIndex,0,t);break;case"modified":if(n[t.oldIndex]==null||n[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return g_(n,t.newIndex,1,t);break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return g_(n,t.oldIndex,1);break}return n}function fT(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ru=class{ref;query;afs;constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=iu(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(j(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(xn(void 0),Uo(),yt(([i,r])=>r.length>0||!i),j(([,i])=>i),ve)}auditTrail(t){return this.stateChanges(t).pipe(yr((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=fT(t);return hT(this.query,e,this.afs.schedulers.outsideAngular).pipe(ve)}valueChanges(t={}){return b_(this.query,this.afs.schedulers.outsideAngular).pipe(j(e=>e.payload.docs.map(i=>t.idField?ot(I({},i.data()),{[t.idField]:i.id}):i.data())),ve)}get(t){return pt(this.query.get(t)).pipe(ve)}add(t){return this.ref.add(t)}doc(t){return new nu(this.ref.doc(t),this.afs)}},__=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?iu(this.query,this.afs.schedulers.outsideAngular).pipe(ve):iu(this.query,this.afs.schedulers.outsideAngular).pipe(j(e=>e.filter(i=>t.indexOf(i.type)>-1)),yt(e=>e.length>0),ve)}auditTrail(t){return this.stateChanges(t).pipe(yr((e,i)=>[...e,...i],[]))}snapshotChanges(t){let e=fT(t);return hT(this.query,e,this.afs.schedulers.outsideAngular).pipe(ve)}valueChanges(t={}){return b_(this.query,this.afs.schedulers.outsideAngular).pipe(j(i=>i.payload.docs.map(r=>t.idField?I({[t.idField]:r.id},r.data()):r.data())),ve)}get(t){return pt(this.query.get(t)).pipe(ve)}},LM=new k("angularfire2.enableFirestorePersistence"),jM=new k("angularfire2.firestore.persistenceSettings"),BM=new k("angularfire2.firestore.settings"),UM=new k("angularfire2.firestore.use-emulator");function mT(n,t=e=>e){return{query:t(n),ref:n}}var ij=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(e,i,r,o,s,a,c,l,d,u,h,f,y,b,w,O,B){this.schedulers=c;let P=Ms(e,a,i),K=d;u&&Pf(P,a,h,y,b,w,f,O),[this.firestore,this.persistenceEnabled$]=il(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{let X=a.runOutsideAngular(()=>P.firestore());if(o&&X.settings(o),K&&X.useEmulator(...K),r&&!Si(s)){let it=()=>{try{return pt(X.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(Nt){return typeof console<"u"&&console.warn(Nt),N(!1)}};return[X,a.runOutsideAngular(it)]}else return[X,N(!1)]},[o,K,r])}collection(e,i){let r;typeof e=="string"?r=this.firestore.collection(e):r=e;let{ref:o,query:s}=mT(r,i),a=this.schedulers.ngZone.run(()=>o);return new ru(a,s,this)}collectionGroup(e,i){let r=i||(s=>s),o=this.firestore.collectionGroup(e);return new __(r(o),this)}doc(e){let i;typeof e=="string"?i=this.firestore.doc(e):i=e;let r=this.schedulers.ngZone.run(()=>i);return new nu(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(p($r),p(Gr,8),p(LM,8),p(BM,8),p(xe),p(V),p(el),p(jM,8),p(UM,8),p(y0,8),p(Af,8),p(Cf,8),p(Sf,8),p(Df,8),p(Rf,8),p(kf,8),p(Vi,8))};static \u0275prov=S({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();export{GM as a,Sb as b,aN as c,cN as d,qT as e,sn as f,yA as g,Kn as h,CN as i,SN as j,YV as k,y0 as l,Dh as m,LN as n,st as o,Yn as p,Cv as q,Ts as r,Qy as s,cf as t,Yy as u,df as v,Os as w,rl as x,pL as y,Zy as z,Lr as A,al as B,s0 as C,_f as D,bf as E,cl as F,ck as G,NL as H,OL as I,Rv as J,QN as K,fO as L,mO as M,kv as N,bS as O,DS as P,pO as Q,gO as R,Oh as S,_O as T,bO as U,Ce as V,Lc as W,Bv as X,jc as Y,tD as Z,KO as _,Qv as $,lD as aa,dD as ba,QO as ca,YO as da,XO as ea,ZO as fa,ij as ga,hF as ha,fF as ia,mF as ja,Kc as ka,dy as la,Qc as ma,Uc as na,Cn as oa,PF as pa,MF as qa,Jh as ra,WD as sa,OF as ta,QD as ua,tf as va,ZD as wa,FF as xa,VF as ya,LF as za,Fy as Aa,nf as Ba,rf as Ca,pV as Da,of as Ea,OR as Fa,kV as Ga,PV as Ha};
